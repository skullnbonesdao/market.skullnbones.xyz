var l1=Object.defineProperty;var d1=(t,e,r)=>e in t?l1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Te=(t,e,r)=>(d1(t,typeof e!="symbol"?e+"":e,r),r);import{Z as mr,$ as q,a0 as Zg,a1 as Vl,a2 as h1,a as X,a3 as Qi,a4 as ga,a5 as ey,a6 as Gc,a7 as p1,a8 as g1,a9 as y1,aa as ty,ab as ry,ac as Ue,ad as m1,ae as Vr,af as Jh,ag as b1,b as Vc,ah as x1,ai as v1,aj as w1,ak as Jl,al as _1,am as E1}from"./index.8d89bac6.js";function A1(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Wl={},Pc={},Yl={},Jc={exports:{}},Xl={exports:{}},ny=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},S1=ny,Zi=Object.prototype.toString;function Ql(t){return Array.isArray(t)}function bl(t){return typeof t>"u"}function T1(t){return t!==null&&!bl(t)&&t.constructor!==null&&!bl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function iy(t){return Zi.call(t)==="[object ArrayBuffer]"}function k1(t){return Zi.call(t)==="[object FormData]"}function P1(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&iy(t.buffer),e}function C1(t){return typeof t=="string"}function I1(t){return typeof t=="number"}function sy(t){return t!==null&&typeof t=="object"}function lc(t){if(Zi.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function R1(t){return Zi.call(t)==="[object Date]"}function N1(t){return Zi.call(t)==="[object File]"}function B1(t){return Zi.call(t)==="[object Blob]"}function ay(t){return Zi.call(t)==="[object Function]"}function M1(t){return sy(t)&&ay(t.pipe)}function O1(t){return Zi.call(t)==="[object URLSearchParams]"}function D1(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function U1(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Zl(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ql(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function xl(){var t={};function e(i,s){lc(t[s])&&lc(i)?t[s]=xl(t[s],i):lc(i)?t[s]=xl({},i):Ql(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Zl(arguments[r],e);return t}function L1(t,e,r){return Zl(e,function(i,s){r&&typeof i=="function"?t[s]=S1(i,r):t[s]=i}),t}function F1(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Yr={isArray:Ql,isArrayBuffer:iy,isBuffer:T1,isFormData:k1,isArrayBufferView:P1,isString:C1,isNumber:I1,isObject:sy,isPlainObject:lc,isUndefined:bl,isDate:R1,isFile:N1,isBlob:B1,isFunction:ay,isStream:M1,isURLSearchParams:O1,isStandardBrowserEnv:U1,forEach:Zl,merge:xl,extend:L1,trim:D1,stripBOM:F1},Us=Yr;function Wh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var oy=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Us.isURLSearchParams(r))i=r.toString();else{var s=[];Us.forEach(r,function(c,f){c===null||typeof c>"u"||(Us.isArray(c)?f=f+"[]":c=[c],Us.forEach(c,function(d){Us.isDate(d)?d=d.toISOString():Us.isObject(d)&&(d=JSON.stringify(d)),s.push(Wh(f)+"="+Wh(d))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},j1=Yr;function Wc(){this.handlers=[]}Wc.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Wc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Wc.prototype.forEach=function(e){j1.forEach(this.handlers,function(n){n!==null&&e(n)})};var K1=Wc,$1=Yr,q1=function(e,r){$1.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},cy=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},qf,Yh;function fy(){if(Yh)return qf;Yh=1;var t=cy;return qf=function(r,n,i,s,a){var o=new Error(r);return t(o,n,i,s,a)},qf}var Hf,Xh;function H1(){if(Xh)return Hf;Xh=1;var t=fy();return Hf=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Hf}var zf,Qh;function z1(){if(Qh)return zf;Qh=1;var t=Yr;return zf=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,a,o,c){var f=[];f.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),t.isString(a)&&f.push("path="+a),t.isString(o)&&f.push("domain="+o),c===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),zf}var Gf,Zh;function G1(){return Zh||(Zh=1,Gf=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Gf}var Vf,e0;function V1(){return e0||(e0=1,Vf=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Vf}var Jf,t0;function J1(){if(t0)return Jf;t0=1;var t=G1(),e=V1();return Jf=function(n,i){return n&&!t(i)?e(n,i):i},Jf}var Wf,r0;function W1(){if(r0)return Wf;r0=1;var t=Yr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Wf=function(n){var i={},s,a,o;return n&&t.forEach(n.split(`
`),function(f){if(o=f.indexOf(":"),s=t.trim(f.substr(0,o)).toLowerCase(),a=t.trim(f.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},Wf}var Yf,n0;function Y1(){if(n0)return Yf;n0=1;var t=Yr;return Yf=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){var c=t.isString(o)?s(o):o;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Yf}var Xf,i0;function Yc(){if(i0)return Xf;i0=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Xf=t,Xf}var Qf,s0;function a0(){if(s0)return Qf;s0=1;var t=Yr,e=H1(),r=z1(),n=oy,i=J1(),s=W1(),a=Y1(),o=fy(),c=Xc(),f=Yc();return Qf=function(d){return new Promise(function(b,E){var w=d.data,y=d.headers,_=d.responseType,A;function B(){d.cancelToken&&d.cancelToken.unsubscribe(A),d.signal&&d.signal.removeEventListener("abort",A)}t.isFormData(w)&&delete y["Content-Type"];var N=new XMLHttpRequest;if(d.auth){var O=d.auth.username||"",U=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";y.Authorization="Basic "+btoa(O+":"+U)}var H=i(d.baseURL,d.url);N.open(d.method.toUpperCase(),n(H,d.params,d.paramsSerializer),!0),N.timeout=d.timeout;function V(){if(!!N){var ae="getAllResponseHeaders"in N?s(N.getAllResponseHeaders()):null,de=!_||_==="text"||_==="json"?N.responseText:N.response,ee={data:de,status:N.status,statusText:N.statusText,headers:ae,config:d,request:N};e(function(l){b(l),B()},function(l){E(l),B()},ee),N=null}}if("onloadend"in N?N.onloadend=V:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(V)},N.onabort=function(){!N||(E(o("Request aborted",d,"ECONNABORTED",N)),N=null)},N.onerror=function(){E(o("Network Error",d,null,N)),N=null},N.ontimeout=function(){var de=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",ee=d.transitional||c.transitional;d.timeoutErrorMessage&&(de=d.timeoutErrorMessage),E(o(de,d,ee.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",N)),N=null},t.isStandardBrowserEnv()){var re=(d.withCredentials||a(H))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;re&&(y[d.xsrfHeaderName]=re)}"setRequestHeader"in N&&t.forEach(y,function(de,ee){typeof w>"u"&&ee.toLowerCase()==="content-type"?delete y[ee]:N.setRequestHeader(ee,de)}),t.isUndefined(d.withCredentials)||(N.withCredentials=!!d.withCredentials),_&&_!=="json"&&(N.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&N.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&N.upload&&N.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(A=function(ae){!N||(E(!ae||ae&&ae.type?new f("canceled"):ae),N.abort(),N=null)},d.cancelToken&&d.cancelToken.subscribe(A),d.signal&&(d.signal.aborted?A():d.signal.addEventListener("abort",A))),w||(w=null),N.send(w)})},Qf}var Zf,o0;function Xc(){if(o0)return Zf;o0=1;var t=Yr,e=q1,r=cy,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,f){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=f)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof mr.exports<"u"&&Object.prototype.toString.call(mr.exports)==="[object process]")&&(c=a0()),c}function a(c,f,u){if(t.isString(c))try{return(f||JSON.parse)(c),t.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(u||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(f,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(f)||t.isArrayBuffer(f)||t.isBuffer(f)||t.isStream(f)||t.isFile(f)||t.isBlob(f)?f:t.isArrayBufferView(f)?f.buffer:t.isURLSearchParams(f)?(i(u,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):t.isObject(f)||u&&u["Content-Type"]==="application/json"?(i(u,"application/json"),a(f)):f}],transformResponse:[function(f){var u=this.transitional||o.transitional,d=u&&u.silentJSONParsing,g=u&&u.forcedJSONParsing,b=!d&&this.responseType==="json";if(b||g&&t.isString(f)&&f.length)try{return JSON.parse(f)}catch(E){if(b)throw E.name==="SyntaxError"?r(E,this,"E_JSON_PARSE"):E}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(f){o.headers[f]={}}),t.forEach(["post","put","patch"],function(f){o.headers[f]=t.merge(n)}),Zf=o,Zf}var X1=Yr,Q1=Xc(),Z1=function(e,r,n){var i=this||Q1;return X1.forEach(n,function(a){e=a.call(i,e,r)}),e},eu,c0;function uy(){return c0||(c0=1,eu=function(e){return!!(e&&e.__CANCEL__)}),eu}var f0=Yr,tu=Z1,ev=uy(),tv=Xc(),rv=Yc();function ru(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rv("canceled")}var nv=function(e){ru(e),e.headers=e.headers||{},e.data=tu.call(e,e.data,e.headers,e.transformRequest),e.headers=f0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),f0.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||tv.adapter;return r(e).then(function(i){return ru(e),i.data=tu.call(e,i.data,i.headers,e.transformResponse),i},function(i){return ev(i)||(ru(e),i&&i.response&&(i.response.data=tu.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},rn=Yr,ly=function(e,r){r=r||{};var n={};function i(u,d){return rn.isPlainObject(u)&&rn.isPlainObject(d)?rn.merge(u,d):rn.isPlainObject(d)?rn.merge({},d):rn.isArray(d)?d.slice():d}function s(u){if(rn.isUndefined(r[u])){if(!rn.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function a(u){if(!rn.isUndefined(r[u]))return i(void 0,r[u])}function o(u){if(rn.isUndefined(r[u])){if(!rn.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var f={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return rn.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var g=f[d]||s,b=g(d);rn.isUndefined(b)&&g!==c||(n[d]=b)}),n},nu,u0;function dy(){return u0||(u0=1,nu={version:"0.25.0"}),nu}var iv=dy().version,ed={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){ed[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var l0={};ed.transitional=function(e,r,n){function i(s,a){return"[Axios v"+iv+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,o){if(e===!1)throw new Error(i(a," has been removed"+(r?" in "+r:"")));return r&&!l0[a]&&(l0[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function sv(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var av={assertOptions:sv,validators:ed},hy=Yr,ov=oy,d0=K1,h0=nv,Qc=ly,py=av,Ls=py.validators;function Eo(t){this.defaults=t,this.interceptors={request:new d0,response:new d0}}Eo.prototype.request=function(e,r){if(typeof e=="string"?(r=r||{},r.url=e):r=e||{},!r.url)throw new Error("Provided config url is not valid");r=Qc(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&py.assertOptions(n,{silentJSONParsing:Ls.transitional(Ls.boolean),forcedJSONParsing:Ls.transitional(Ls.boolean),clarifyTimeoutError:Ls.transitional(Ls.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(s=s&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});var a=[];this.interceptors.response.forEach(function(b){a.push(b.fulfilled,b.rejected)});var o;if(!s){var c=[h0,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var f=r;i.length;){var u=i.shift(),d=i.shift();try{f=u(f)}catch(g){d(g);break}}try{o=h0(f)}catch(g){return Promise.reject(g)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Eo.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=Qc(this.defaults,e),ov(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};hy.forEach(["delete","get","head","options"],function(e){Eo.prototype[e]=function(r,n){return this.request(Qc(n||{},{method:e,url:r,data:(n||{}).data}))}});hy.forEach(["post","put","patch"],function(e){Eo.prototype[e]=function(r,n,i){return this.request(Qc(i||{},{method:e,url:r,data:n}))}});var cv=Eo,iu,p0;function fv(){if(p0)return iu;p0=1;var t=Yc();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;this.promise.then(function(s){if(!!i._listeners){var a,o=i._listeners.length;for(a=0;a<o;a++)i._listeners[a](s);i._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){i.subscribe(c),a=c}).then(s);return o.cancel=function(){i.unsubscribe(a)},o},r(function(a){i.reason||(i.reason=new t(a),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(a){n=a});return{token:i,cancel:n}},iu=e,iu}var su,g0;function uv(){return g0||(g0=1,su=function(e){return function(n){return e.apply(null,n)}}),su}var au,y0;function lv(){if(y0)return au;y0=1;var t=Yr;return au=function(r){return t.isObject(r)&&r.isAxiosError===!0},au}var m0=Yr,dv=ny,dc=cv,hv=ly,pv=Xc();function gy(t){var e=new dc(t),r=dv(dc.prototype.request,e);return m0.extend(r,dc.prototype,e),m0.extend(r,e),r.create=function(i){return gy(hv(t,i))},r}var ai=gy(pv);ai.Axios=dc;ai.Cancel=Yc();ai.CancelToken=fv();ai.isCancel=uy();ai.VERSION=dy().version;ai.all=function(e){return Promise.all(e)};ai.spread=uv();ai.isAxiosError=lv();Xl.exports=ai;Xl.exports.default=ai;(function(t){t.exports=Xl.exports})(Jc);var gv=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yl,"__esModule",{value:!0});const yv=gv(Jc.exports);class mv{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){const e=yv.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response:   ${r.config.url} - ${r.status}`),r))),e}}Yl.default=mv;var td={},Zc={},Ao={},Tn={},So={},Jt={},bv=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xv=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vv=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bv(e,t,r);return xv(e,t),e};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.b64UrlDecode=Jt.b64UrlEncode=Jt.bufferTob64Url=Jt.bufferTob64=Jt.b64UrlToBuffer=Jt.stringToB64Url=Jt.stringToBuffer=Jt.bufferToString=Jt.b64UrlToString=Jt.concatBuffers=void 0;const yy=vv(Zg);function wv(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}Jt.concatBuffers=wv;function _v(t){let e=xy(t);return my(e)}Jt.b64UrlToString=_v;function my(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}Jt.bufferToString=my;function by(t){return new TextEncoder().encode(t)}Jt.stringToBuffer=by;function Ev(t){return wy(by(t))}Jt.stringToB64Url=Ev;function xy(t){return new Uint8Array(yy.toByteArray(Ey(t)))}Jt.b64UrlToBuffer=xy;function vy(t){return yy.fromByteArray(new Uint8Array(t))}Jt.bufferTob64=vy;function wy(t){return _y(vy(t))}Jt.bufferTob64Url=wy;function _y(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Jt.b64UrlEncode=_y;function Ey(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}Jt.b64UrlDecode=Ey;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.isBrowser=lr.arraybufferEqual=lr.byteArrayToLong=lr.longTo32ByteArray=lr.longTo16ByteArray=lr.shortTo2ByteArray=lr.longTo8ByteArray=void 0;function Av(t){const e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}lr.longTo8ByteArray=Av;function Sv(t){if(t>(2^32-1))throw new Error("Short too long");const e=[0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}lr.shortTo2ByteArray=Sv;function Tv(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return e}lr.longTo16ByteArray=Tv;function kv(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}lr.longTo32ByteArray=kv;function Pv(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}lr.byteArrayToLong=Pv;function Cv(t,e){const r=t.buffer,n=e.buffer;if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;const i=new DataView(r),s=new DataView(n);let a=r.byteLength;for(;a--;)if(i.getUint8(a)!==s.getUint8(a))return!1;return!0}lr.arraybufferEqual=Cv;lr.isBrowser=typeof window<"u"&&typeof window.document<"u";var Ei={},As={},Yo={},rd={};const es=Vl(h1);Object.defineProperty(rd,"__esModule",{value:!0});const Iv=es;class Rv{constructor(){Te(this,"BigNum");this.BigNum=(e,r)=>{let n=Iv.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:i=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return r?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.comparedTo(i)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isLessThan(i)}isGreaterThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isGreaterThan(i)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}rd.default=Rv;var nd={};Object.defineProperty(nd,"__esModule",{value:!0});class Nv{constructor(e){Te(this,"METHOD_GET","GET");Te(this,"METHOD_POST","POST");Te(this,"config");this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){return await this.request(e,{...r,method:this.METHOD_GET})}async post(e,r,n){const i=new Headers(n?.headers||{});return i.get("content-type")?.includes("application/json")||i.append("content-type","application/json"),i.append("accept","application/json, text/plain, */*"),await this.request(e,{...n,method:this.METHOD_POST,body:typeof r!="string"?JSON.stringify(r):r,headers:i})}async request(e,r){const n=new Headers(r?.headers||{}),i=`${this.config.protocol}://${this.config.host}:${this.config.port}`,s=r?.responseType;delete r?.responseType,e.startsWith("/")&&(e=e.slice(1)),this.config.network&&n.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${i}/${e}`);let a=await fetch(`${i}/${e}`,{...r||{},headers:n});this.config.logging&&this.config.logger(`Response:   ${a.url} - ${a.status}`);const c=a.headers.get("content-type")?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],f=a,u=async()=>{if(c)try{f.data=new TextDecoder(c).decode(await a.arrayBuffer())}catch{f.data=await a.text()}else f.data=await a.text()};if(s==="arraybuffer")f.data=await a.arrayBuffer();else if(s==="text")await u();else if(s==="webstream")f.data=Bv(a.body);else try{let d=await a.clone().json();typeof d!="object"?await u():f.data=await a.json(),d=null}catch{await u()}return f}}nd.default=Nv;const Bv=t=>{const e=t;return typeof e[Symbol.asyncIterator]>"u"?(e[Symbol.asyncIterator]=Mv(t),e):t},Mv=function(t){return async function*(){const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)return;yield i}}finally{r.releaseLock()}}};var id={},lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.b64UrlDecode=lt.b64UrlEncode=lt.bufferTob64Url=lt.bufferTob64=lt.b64UrlToBuffer=lt.stringToB64Url=lt.stringToBuffer=lt.bufferToString=lt.b64UrlToString=lt.concatBuffers=void 0;const Ay=Zg;function Ov(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}lt.concatBuffers=Ov;function Dv(t){let e=ky(t);return Sy(e)}lt.b64UrlToString=Dv;function Sy(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}lt.bufferToString=Sy;function Ty(t){return new TextEncoder().encode(t)}lt.stringToBuffer=Ty;function Uv(t){return Cy(Ty(t))}lt.stringToB64Url=Uv;function ky(t){return new Uint8Array(Ay.toByteArray(Ry(t)))}lt.b64UrlToBuffer=ky;function Py(t){return Ay.fromByteArray(new Uint8Array(t))}lt.bufferTob64=Py;function Cy(t){return Iy(Py(t))}lt.bufferTob64Url=Cy;function Iy(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}lt.b64UrlEncode=Iy;function Ry(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}lt.b64UrlDecode=Ry;Object.defineProperty(id,"__esModule",{value:!0});const Oi=lt;class Lv{constructor(){Te(this,"keyLength",4096);Te(this,"publicExponent",65537);Te(this,"hashAlgorithm","sha256");Te(this,"driver");if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),a=await this.driver.digest("SHA-256",r),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),c=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),f=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-a.byteLength-2},s,n,r);return o||c||f}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto?.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Oi.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Oi.stringToBuffer(n):Oi.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const o=await this.driver.encrypt({name:"AES-CBC",iv:a},s,e);return Oi.concatBuffers([a,o])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Oi.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Oi.stringToBuffer(n):Oi.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:a},s,e.slice(16));return Oi.concatBuffers([o])}}id.default=Lv;var sd={};Object.defineProperty(sd,"__esModule",{value:!0});class Fv{constructor(e){Te(this,"api");this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}sd.default=Fv;var Xo={},ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.getError=void 0;class jv extends Error{constructor(r,n={}){var e=(...args)=>{super(...args);Te(this,"type");Te(this,"response")};n.message?e(n.message):e(),this.type=r,this.response=n.response}getType(){return this.type}}ts.default=jv;function Kv(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}ts.getError=Kv;var Fs={},Qo={},b0;function Ny(){if(b0)return Qo;b0=1,Object.defineProperty(Qo,"__esModule",{value:!0});const t=Cc();async function e(n){if(Array.isArray(n)){const a=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("list"),t.default.utils.stringToBuffer(n.length.toString())]);return await r(n,await t.default.crypto.hash(a,"SHA-384"))}const i=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("blob"),t.default.utils.stringToBuffer(n.byteLength.toString())]),s=t.default.utils.concatBuffers([await t.default.crypto.hash(i,"SHA-384"),await t.default.crypto.hash(n,"SHA-384")]);return await t.default.crypto.hash(s,"SHA-384")}Qo.default=e;async function r(n,i){if(n.length<1)return i;const s=t.default.utils.concatBuffers([i,await e(n[0])]),a=await t.default.crypto.hash(s,"SHA-384");return await r(n.slice(1),a)}return Qo}var ou={},x0;function By(){return x0||(x0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=Cc(),r=lt;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,i=32;async function s(O){let U=[],H=O,V=0;for(;H.byteLength>=t.MAX_CHUNK_SIZE;){let re=t.MAX_CHUNK_SIZE,ae=H.byteLength-t.MAX_CHUNK_SIZE;ae>0&&ae<t.MIN_CHUNK_SIZE&&(re=Math.ceil(H.byteLength/2));const de=H.slice(0,re),ee=await e.default.crypto.hash(de);V+=de.byteLength,U.push({dataHash:ee,minByteRange:V-de.byteLength,maxByteRange:V}),H=H.slice(re)}return U.push({dataHash:await e.default.crypto.hash(H),minByteRange:V,maxByteRange:V+H.byteLength}),U}t.chunkData=s;async function a(O){return Promise.all(O.map(async({dataHash:U,minByteRange:H,maxByteRange:V})=>({type:"leaf",id:await w(await Promise.all([w(U),w(y(V))])),dataHash:U,minByteRange:H,maxByteRange:V})))}t.generateLeaves=a;async function o(O){return(await c(O)).id}t.computeRootHash=o;async function c(O){return await u(await a(await s(O)))}t.generateTree=c;async function f(O){const U=await s(O),H=await a(U),V=await u(H),re=await d(V),ae=U.slice(-1)[0];return ae.maxByteRange-ae.minByteRange===0&&(U.splice(U.length-1,1),re.splice(re.length-1,1)),{data_root:V.id,chunks:U,proofs:re}}t.generateTransactionChunks=f;async function u(O,U=0){if(O.length<2)return O[0];const H=[];for(let V=0;V<O.length;V+=2)H.push(await E(O[V],O[V+1]));return u(H,U+1)}t.buildLayers=u;function d(O){const U=g(O);return Array.isArray(U)?b(U):[U]}t.generateProofs=d;function g(O,U=new Uint8Array,H=0){if(O.type=="leaf")return{offset:O.maxByteRange-1,proof:(0,r.concatBuffers)([U,O.dataHash,y(O.maxByteRange)])};if(O.type=="branch"){const V=(0,r.concatBuffers)([U,O.leftChild.id,O.rightChild.id,y(O.byteRange)]);return[g(O.leftChild,V,H+1),g(O.rightChild,V,H+1)]}throw new Error("Unexpected node type")}function b(O){const U=[];return O.forEach(H=>{Array.isArray(H)?U.push(...b(H)):U.push(H)}),U}t.arrayFlatten=b;async function E(O,U){return U?{type:"branch",id:await w([await w(O.id),await w(U.id),await w(y(O.maxByteRange))]),byteRange:O.maxByteRange,maxByteRange:U.maxByteRange,leftChild:O,rightChild:U}:O}async function w(O){return Array.isArray(O)&&(O=e.default.utils.concatBuffers(O)),new Uint8Array(await e.default.crypto.hash(O))}function y(O){const U=new Uint8Array(n);for(var H=U.length-1;H>=0;H--){var V=O%256;U[H]=V,O=(O-V)/256}return U}t.intToBuffer=y;function _(O){let U=0;for(var H=0;H<O.length;H++)U*=256,U+=O[H];return U}t.bufferToInt=_;const A=(O,U)=>O.every((H,V)=>U[V]===H);t.arrayCompare=A;async function B(O,U,H,V,re){if(V<=0)return!1;if(U>=V)return B(O,0,V-1,V,re);if(U<0)return B(O,0,0,V,re);if(re.length==i+n){const S=re.slice(0,i),I=re.slice(S.length,S.length+n),M=await w([await w(S),await w(I)]);return(0,t.arrayCompare)(O,M)?{offset:V-1,leftBound:H,rightBound:V,chunkSize:V-H}:!1}const ae=re.slice(0,i),de=re.slice(ae.length,ae.length+i),ee=re.slice(ae.length+de.length,ae.length+de.length+n),T=_(ee),l=re.slice(ae.length+de.length+ee.length),m=await w([await w(ae),await w(de),await w(ee)]);return(0,t.arrayCompare)(O,m)?U<T?await B(ae,U,H,Math.min(V,T),l):await B(de,U,Math.max(H,T),V,l):!1}t.validatePath=B;async function N(O,U=""){if(O.byteLength<1)return U;const H=O.slice(0,i),V=O.slice(H.length,H.length+i),re=O.slice(H.length+V.length,H.length+V.length+n),ae=_(re),de=O.slice(H.length+V.length+re.length),ee=await w([await w(H),await w(V),await w(re)]),T=`${U}
${JSON.stringify(X.Buffer.from(H))},${JSON.stringify(X.Buffer.from(V))},${ae} => ${JSON.stringify(ee)}`;return N(de,T)}t.debug=N}(ou)),ou}var v0;function ad(){if(v0)return Fs;v0=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.Tag=void 0;const t=lt,e=Ny(),r=By();class n{get(o,c){if(!Object.getOwnPropertyNames(this).includes(o))throw new Error(`Field "${o}" is not a property of the Arweave Transaction class.`);if(this[o]instanceof Uint8Array)return c&&c.decode&&c.string?t.bufferToString(this[o]):c&&c.decode&&!c.string?this[o]:t.bufferTob64Url(this[o]);if(this[o]instanceof Array){if(c?.decode!==void 0||c?.string!==void 0)throw o==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[o]}return c&&c.decode==!0?c&&c.string?t.b64UrlToString(this[o]):t.b64UrlToBuffer(this[o]):this[o]}}class i extends n{constructor(c,f,u=!1){super();Te(this,"name");Te(this,"value");this.name=c,this.value=f}}Fs.Tag=i;class s extends n{constructor(c={}){super();Te(this,"format",2);Te(this,"id","");Te(this,"last_tx","");Te(this,"owner","");Te(this,"tags",[]);Te(this,"target","");Te(this,"quantity","0");Te(this,"data_size","0");Te(this,"data",new Uint8Array);Te(this,"data_root","");Te(this,"reward","0");Te(this,"signature","");Te(this,"chunks");Object.assign(this,c),typeof this.data=="string"&&(this.data=t.b64UrlToBuffer(this.data)),c.tags&&(this.tags=c.tags.map(f=>new i(f.name,f.value)))}addTag(c,f){this.tags.push(new i(t.stringToB64Url(c),t.stringToB64Url(f)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:t.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(c){this.owner=c}setSignature({id:c,owner:f,reward:u,tags:d,signature:g}){this.id=c,this.owner=f,u&&(this.reward=u),d&&(this.tags=d),this.signature=g}async prepareChunks(c){!this.chunks&&c.byteLength>0&&(this.chunks=await(0,r.generateTransactionChunks)(c),this.data_root=t.bufferTob64Url(this.chunks.data_root)),!this.chunks&&c.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(c,f){if(!this.chunks)throw new Error("Chunks have not been prepared");const u=this.chunks.proofs[c],d=this.chunks.chunks[c];return{data_root:this.data_root,data_size:this.data_size,data_path:t.bufferTob64Url(u.proof),offset:u.offset.toString(),chunk:t.bufferTob64Url(f.slice(d.minByteRange,d.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let c=this.tags.reduce((u,d)=>t.concatBuffers([u,d.get("name",{decode:!0,string:!1}),d.get("value",{decode:!0,string:!1})]),new Uint8Array);return t.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),c]);case 2:this.data_root||await this.prepareChunks(this.data);const f=this.tags.map(u=>[u.get("name",{decode:!0,string:!1}),u.get("value",{decode:!0,string:!1})]);return await(0,e.default)([t.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),f,t.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}return Fs.default=s,Fs}var Ca={},w0;function $v(){if(w0)return Ca;w0=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.TransactionUploader=void 0;const t=ad(),e=lt,r=ts,n=By(),i=1,s=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],a=1e3*40;class o{constructor(f,u){Te(this,"api");Te(this,"chunkIndex",0);Te(this,"txPosted",!1);Te(this,"transaction");Te(this,"lastRequestTimeEnd",0);Te(this,"totalErrors",0);Te(this,"data");Te(this,"lastResponseStatus",0);Te(this,"lastResponseError","");if(this.api=f,!u.id)throw new Error("Transaction is not signed");if(!u.chunks)throw new Error("Transaction chunks not prepared");this.data=u.data,this.transaction=new t.default(Object.assign({},u,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(f){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let u=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+a-Date.now(),a);if(u>0&&(u=u-u*Math.random()*.3,await new Promise(E=>setTimeout(E,u))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}f&&(this.chunkIndex=f);const d=this.transaction.getChunk(f||this.chunkIndex,this.data);if(!await(0,n.validatePath)(this.transaction.chunks.data_root,parseInt(d.offset),0,parseInt(d.data_size),e.b64UrlToBuffer(d.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const b=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(E=>(console.error(E.message),{status:-1,data:{error:E.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=b.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,r.getError)(b),s.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(f,u,d){if(!u||typeof u.chunkIndex!="number"||typeof u.transaction!="object")throw new Error("Serialized object does not match expected format.");var g=new t.default(u.transaction);g.chunks||await g.prepareChunks(d);const b=new o(f,g);if(b.chunkIndex=u.chunkIndex,b.lastRequestTimeEnd=u.lastRequestTimeEnd,b.lastResponseError=u.lastResponseError,b.lastResponseStatus=u.lastResponseStatus,b.txPosted=u.txPosted,b.data=d,b.transaction.data_root!==u.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return b}static async fromTransactionId(f,u){const d=await f.get(`tx/${u}`);if(d.status!==200)throw new Error(`Tx ${u} not found: ${d.status}`);const g=d.data;return g.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:g}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=i){this.transaction.data=this.data;const d=await this.api.post("tx",this.transaction).catch(g=>(console.error(g),{status:-1,data:{error:g.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=d.status,this.transaction.data=new Uint8Array(0),d.status>=200&&d.status<300){this.txPosted=!0,this.chunkIndex=i;return}throw this.lastResponseError=(0,r.getError)(d),new Error(`Unable to upload transaction: ${d.status}, ${this.lastResponseError}`)}const u=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=u.status,!(u.status>=200&&u.status<300))throw this.lastResponseError=(0,r.getError)(u),new Error(`Unable to upload transaction: ${u.status}, ${this.lastResponseError}`);this.txPosted=!0}}return Ca.TransactionUploader=o,Ca}var _0;function qv(){if(_0)return Xo;_0=1,Object.defineProperty(Xo,"__esModule",{value:!0});const t=ts,e=ad(),r=lt,n=$v();class i{constructor(a,o,c){Te(this,"api");Te(this,"crypto");Te(this,"chunks");this.api=a,this.crypto=o,this.chunks=c}async getTransactionAnchor(){const a=await this.api.get("tx_anchor");if(!a.data.match(/^[a-z0-9_-]{43,}/i)||!a.ok)throw new Error(`Could not getTransactionAnchor. Received: ${a.data}. Status: ${a.status}, ${a.statusText}`);return a.data}async getPrice(a,o){let c=o?`price/${a}/${o}`:`price/${a}`;const f=await this.api.get(c);if(!/^\d+$/.test(f.data)||!f.ok)throw new Error(`Could not getPrice. Received: ${f.data}. Status: ${f.status}, ${f.statusText}`);return f.data}async get(a){const o=await this.api.get(`tx/${a}`);if(o.status==200){const c=parseInt(o.data.data_size);if(o.data.format>=2&&c>0&&c<=1024*1024*12){const f=await this.getData(a);return new e.default({...o.data,data:f})}return new e.default({...o.data,format:o.data.format||1})}throw o.status==404?new t.default("TX_NOT_FOUND"):o.status==410?new t.default("TX_FAILED"):new t.default("TX_INVALID")}fromRaw(a){return new e.default(a)}async search(a,o){return this.api.post("arql",{op:"equals",expr1:a,expr2:o}).then(c=>c.data?c.data:[])}getStatus(a){return this.api.get(`tx/${a}/status`).then(o=>o.status==200?{status:200,confirmed:o.data}:{status:o.status,confirmed:null})}async getData(a,o){let c;try{c=await this.chunks.downloadChunkedData(a)}catch(f){console.error(`Error while trying to download chunked data for ${a}`),console.error(f)}if(!c){console.warn(`Falling back to gateway cache for ${a}`);try{const{data:f,ok:u,status:d,statusText:g}=await this.api.get(`/${a}`,{responseType:"arraybuffer"});if(!u)throw new Error("Bad http status code",{cause:{status:d,statusText:g}});c=f}catch(f){console.error(`Error while trying to download contiguous data from gateway cache for ${a}`),console.error(f)}}if(!c)throw new Error(`${a} data was not found!`);return o&&o.decode&&!o.string?c:o&&o.decode&&o.string?r.bufferToString(c):r.bufferTob64Url(c)}async sign(a,o,c){const u=typeof o=="object"&&(g=>{let b=!0;return["n","e","d","p","q","dp","dq","qi"].map(E=>!(E in g)&&(b=!1)),b})(o),d=typeof arweaveWallet=="object";if(!u&&!d)throw new Error("No valid JWK or external wallet found to sign transaction.");if(d){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const g=await arweaveWallet.sign(a,c);a.setSignature({id:g.id,owner:g.owner,reward:g.reward,tags:g.tags,signature:g.signature})}else if(u){a.setOwner(o.n);let g=await a.getSignatureData(),b=await this.crypto.sign(o,g,c),E=await this.crypto.hash(b);a.setSignature({id:r.bufferTob64Url(E),owner:o.n,signature:r.bufferTob64Url(b)})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(a){const o=await a.getSignatureData(),c=a.get("signature",{decode:!0,string:!1}),f=r.bufferTob64Url(await this.crypto.hash(c));if(a.id!==f)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(a.owner,o,c)}async post(a){if(typeof a=="string"?a=new e.default(JSON.parse(a)):typeof a.readInt32BE=="function"?a=new e.default(JSON.parse(a.toString())):typeof a=="object"&&!(a instanceof e.default)&&(a=new e.default(a)),!(a instanceof e.default))throw new Error("Must be Transaction object");a.chunks||await a.prepareChunks(a.data);const o=await this.getUploader(a,a.data);try{for(;!o.isComplete;)await o.uploadChunk()}catch(c){if(o.lastResponseStatus>0)return{status:o.lastResponseStatus,statusText:o.lastResponseError,data:{error:o.lastResponseError}};throw c}return{status:200,statusText:"OK",data:{}}}async getUploader(a,o){let c;if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),a instanceof e.default){if(o||(o=a.data),!(o instanceof Uint8Array))throw new Error("Data format is invalid");a.chunks||await a.prepareChunks(o),c=new n.TransactionUploader(this.api,a),(!c.data||c.data.length===0)&&(c.data=o)}else{if(typeof a=="string"&&(a=await n.TransactionUploader.fromTransactionId(this.api,a)),!o||!(o instanceof Uint8Array))throw new Error("Must provide data when resuming upload");c=await n.TransactionUploader.fromSerialized(this.api,a,o)}return c}async*upload(a,o){const c=await this.getUploader(a,o);for(;!c.isComplete;)await c.uploadChunk(),yield c;return c}}return Xo.default=i,Xo}var od={};Object.defineProperty(od,"__esModule",{value:!0});const E0=lt;class Hv{constructor(e,r){Te(this,"api");Te(this,"crypto");this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return E0.bufferTob64Url(await this.crypto.hash(E0.b64UrlToBuffer(e)))}}od.default=Hv;var To={};Object.defineProperty(To,"__esModule",{value:!0});To.SiloResource=void 0;const A0=lt;class zv{constructor(e,r,n){Te(this,"api");Te(this,"crypto");Te(this,"transactions");this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],i=Math.pow(2,parseInt(r[2])),s=await this.hash(A0.stringToBuffer(n),i),a=A0.bufferTob64(s.slice(0,15)),o=await this.hash(s.slice(16,31),1);return new My(e,a,o)}async hash(e,r){let n=await this.crypto.hash(e);for(let i=0;i<r-1;i++)n=await this.crypto.hash(n);return n}}To.default=zv;class My{constructor(e,r,n){Te(this,"uri");Te(this,"accessKey");Te(this,"encryptionKey");this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}To.SiloResource=My;var cd={};Object.defineProperty(cd,"__esModule",{value:!0});const S0=ts,Gv=lt;class Vv{constructor(e){Te(this,"api");this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,S0.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,S0.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return Gv.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),s=parseInt(r.offset)-n+1,a=new Uint8Array(n);let o=0;for(;o<n;){this.api.config.logging&&console.log(`[chunk] ${o}/${n}`);let c;try{c=await this.getChunkData(s+o)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+o}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(c)a.set(c,o),o+=c.length;else throw new Error(`Couldn't complete data download at ${o}/${n}`)}return a}}cd.default=Vv;var fd={};Object.defineProperty(fd,"__esModule",{value:!0});const Jv=ts,Vh=class{constructor(e,r){Te(this,"api");Te(this,"network");this.api=e,this.network=r}async get(e){const r=await this.api.get(`${Vh.ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new Jv.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}};let hc=Vh;Te(hc,"ENDPOINT","block/hash/");fd.default=hc;var T0;function Cc(){if(T0)return Yo;T0=1,Object.defineProperty(Yo,"__esModule",{value:!0});const t=rd,e=nd,r=id,n=sd,i=qv(),s=od,a=ad(),o=lt,c=To,f=cd,u=fd,g=class{constructor(E){Te(this,"api");Te(this,"wallets");Te(this,"transactions");Te(this,"network");Te(this,"blocks");Te(this,"ar");Te(this,"silo");Te(this,"chunks");this.api=new e.default(E),this.wallets=new s.default(this.api,g.crypto),this.chunks=new f.default(this.api),this.transactions=new i.default(this.api,g.crypto,this.chunks),this.silo=new c.default(this.api,this.crypto,this.transactions),this.network=new n.default(this.api),this.blocks=new u.default(this.api,this.network),this.ar=new t.default}get crypto(){return g.crypto}get utils(){return g.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(E,w){const y={};if(Object.assign(y,E),!E.data&&!(E.target&&E.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(E.owner==null&&w&&w!=="use_wallet"&&(y.owner=w.n),E.last_tx==null&&(y.last_tx=await this.transactions.getTransactionAnchor()),typeof E.data=="string"&&(E.data=o.stringToBuffer(E.data)),E.data instanceof ArrayBuffer&&(E.data=new Uint8Array(E.data)),E.data&&!(E.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(E.reward==null){const A=E.data?E.data.byteLength:0;y.reward=await this.transactions.getPrice(A,y.target)}y.data_root="",y.data_size=E.data?E.data.byteLength.toString():"0",y.data=E.data||new Uint8Array(0);const _=new a.default(y);return await _.getSignatureData(),_}async createSiloTransaction(E,w,y){const _={};if(Object.assign(_,E),!E.data)throw new Error("Silo transactions must have a 'data' value");if(!y)throw new Error("No Silo URI specified.");if(E.target||E.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(E.owner==null){if(!w||!w.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");_.owner=w.n}E.last_tx==null&&(_.last_tx=await this.transactions.getTransactionAnchor());const A=await this.silo.parseUri(y);if(typeof E.data=="string"){const N=await this.crypto.encrypt(o.stringToBuffer(E.data),A.getEncryptionKey());_.reward=await this.transactions.getPrice(N.byteLength),_.data=o.bufferTob64Url(N)}if(E.data instanceof Uint8Array){const N=await this.crypto.encrypt(E.data,A.getEncryptionKey());_.reward=await this.transactions.getPrice(N.byteLength),_.data=o.bufferTob64Url(N)}const B=new a.default(_);return B.addTag("Silo-Name",A.getAccessKey()),B.addTag("Silo-Version","0.1.0"),B}arql(E){return this.api.post("/arql",E).then(w=>w.data||[])}};let d=g;return Te(d,"init"),Te(d,"crypto",new r.default),Te(d,"utils",o),Yo.default=d,Yo}var ef={};Object.defineProperty(ef,"__esModule",{value:!0});ef.getDefaultConfig=void 0;const Wv=(t,e)=>{const r=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,n=e.split("."),i=n[n.length-1],s=["localhost","[::1]"];return s.includes(e)||t=="file"||s.includes(i)||!!e.match(r)||!!i.match(r)},Yv=t=>{const e=t.charAt(0)==="[",r=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!t.match(r)||e},Xv=(t,e)=>{if(Wv(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!Yv(e)){let r=e.split(".");if(r.length>=3){r.shift();const n=r.join(".");return{protocol:t,host:n}}}return{protocol:t,host:e}};ef.getDefaultConfig=Xv;(function(t){var e=q&&q.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o);var f=Object.getOwnPropertyDescriptor(a,o);(!f||("get"in f?!a.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(s,c,f)}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=q&&q.__exportStar||function(s,a){for(var o in s)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,s,o)};Object.defineProperty(t,"__esModule",{value:!0});const n=Cc(),i=ef;n.default.init=function(s={}){const a={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new n.default({...s,...a});const o=location.protocol.replace(":",""),c=location.hostname,f=location.port?parseInt(location.port):o=="https"?443:80,u=(0,i.getDefaultConfig)(o,c),d=s.protocol||u.protocol,g=s.host||u.host,b=s.port||u.port||f;return new n.default({...s,host:g,protocol:d,port:b})},typeof globalThis=="object"?globalThis.Arweave=n.default:typeof self=="object"&&(self.Arweave=n.default),r(Cc(),t),t.default=n.default})(As);var Qv=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.hashStream=Ei.deepHashChunks=Ei.deepHash=void 0;const hr=Qv(As),Oy=Qi();async function Dy(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=Oy.createHash("sha384");let a=0;for await(const f of i)a+=f.byteLength,s.update(f);const o=hr.default.utils.concatBuffers([hr.default.utils.stringToBuffer("blob"),hr.default.utils.stringToBuffer(a.toString())]),c=hr.default.utils.concatBuffers([await hr.default.crypto.hash(o,"SHA-384"),s.digest()]);return await hr.default.crypto.hash(c,"SHA-384")}else if(Array.isArray(t)){const i=hr.default.utils.concatBuffers([hr.default.utils.stringToBuffer("list"),hr.default.utils.stringToBuffer(t.length.toString())]);return await ud(t,await hr.default.crypto.hash(i,"SHA-384"))}const e=t,r=hr.default.utils.concatBuffers([hr.default.utils.stringToBuffer("blob"),hr.default.utils.stringToBuffer(e.byteLength.toString())]),n=hr.default.utils.concatBuffers([await hr.default.crypto.hash(r,"SHA-384"),await hr.default.crypto.hash(e,"SHA-384")]);return await hr.default.crypto.hash(n,"SHA-384")}Ei.deepHash=Dy;async function ud(t,e){if(t.length<1)return e;const r=hr.default.utils.concatBuffers([e,await Dy(t[0])]),n=await hr.default.crypto.hash(r,"SHA-384");return await ud(t.slice(1),n)}Ei.deepHashChunks=ud;async function Zv(t){const e=Oy.createHash("sha384");for await(const r of t)e.update(r);return e.digest()}Ei.hashStream=Zv;var ew=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tw=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rw=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ew(e,t,r);return tw(e,t),e};Object.defineProperty(So,"__esModule",{value:!0});So.getSignatureData=void 0;const js=Jt,nw=lr,iw=Ei;async function sw(t){return nw.isBrowser?(await Promise.resolve().then(()=>rw(Ny()))).default([js.stringToBuffer("dataitem"),js.stringToBuffer("1"),js.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData]):iw.deepHash([js.stringToBuffer("dataitem"),js.stringToBuffer("1"),js.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}So.getSignatureData=sw;var Zo={},Un={exports:{}},ld={},dd={};Object.defineProperty(dd,"__esModule",{value:!0});function aw(t){var e=4,r=t.length,n=r%e;if(!n)return t;var i=r,s=e-n,a=r+s,o=X.Buffer.alloc(a);for(o.write(t);s--;)o.write("=",i++);return o.toString()}dd.default=aw;Object.defineProperty(ld,"__esModule",{value:!0});var ow=dd;function Uy(t,e){return e===void 0&&(e="utf8"),X.Buffer.isBuffer(t)?vl(t.toString("base64")):vl(X.Buffer.from(t,e).toString("base64"))}function cw(t,e){return e===void 0&&(e="utf8"),X.Buffer.from(hd(t),"base64").toString(e)}function hd(t){return t=t.toString(),ow.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function vl(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fw(t){return X.Buffer.from(hd(t),"base64")}var ya=Uy;ya.encode=Uy;ya.decode=cw;ya.toBase64=hd;ya.fromBase64=vl;ya.toBuffer=fw;ld.default=ya;(function(t){t.exports=ld.default,t.exports.default=t.exports})(Un);var cu={},pd={},Ly={exports:{}},Fy={exports:{}},uw=Qi(),lw=ga,dw=new $y(4096);function co(t){return typeof X.Buffer.alloc=="function"?X.Buffer.alloc(t):new X.Buffer(t)}function jy(t,e){return typeof X.Buffer.from=="function"?X.Buffer.from(t,e):new X.Buffer(t,e)}function Ky(t){return t.charAt(0).toUpperCase()+t.slice(1)}function hw(t,e){return t===e?0:t<e?-1:1}function pw(t,e,r){var n=t[e];return n===void 0?r:n}function gw(t,e){e=e||"md5";var r=uw.createHash(e);return r.end(t),r.read()}function yw(t,e){var r=-1,n,i;if(!t)return-1;for(n=0,i=t.length;n<i;n++)if(t[n]===e){if(r>=0)return-2;r=n}return r}function mw(t,e){var r={},n,i;for(n=0;n<t.length;n++)i=t[n],r[e(i)]=i;return r}function bw(t){return Object.keys(t).map(function(e){return t[e]})}function xw(t,e){var r={},n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],e&&(s=e(s)),r[s])return!0;r[s]=!0}return!1}function vw(t,e,r){var n=Object.getOwnPropertyNames(t),i,s,a;for(i=0,s=n.length;i<s;i++)if(a=n[i],!e.hasOwnProperty(a)||r){var o=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,o)}return e}function ww(t,e){e=e|0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}else{if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4}var n=0,i=!1;do switch(r){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(r=t.charAt(e++));return-1}function _w(){throw new Error("abstract")}function Ew(t,e){var r=t.prototype,n,i,s,a;for(n=0,i=e.length;n<i;n++)s=e[n],a="get"+Ky(s),r[a]=lw.deprecate(o(s),"use `."+s+"` instead of `."+a+"()`");function o(c){return function(){var f=this[c];return typeof f=="function"?f.apply(this,arguments):f}}}function $y(t){this._len=t|0,this._pos=0,this._slab=co(this._len)}$y.prototype.alloc=function(t){var e=this._len;return t>e?co(t):(this._pos+t>e&&(this._slab=co(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))};function Ss(t){var e=1103515245,r=12345,n=Math.pow(2,31),i=Math.floor(t||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+r)%n}}Ss.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};Ss.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};Ss.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};Ss.prototype.nextString=function(t,e){t|=0,e=e||"aA";var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<t;i++)n.push(this.choice(r));return n.join("")};Ss.prototype.nextBuffer=function(t){var e=[],r;for(r=0;r<t;r++)e.push(this.nextInt(256));return jy(e)};Ss.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function gd(){this._index=0,this._items=[]}gd.prototype.push=function(t){var e=this._items,r=e.length|0,n;for(e.push(t);r>0&&e[r].index<e[n=r-1>>1].index;)t=e[r],e[r]=e[n],e[n]=t,r=n};gd.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n=e>>1,i=0,s,a,o,c,f,u,d;i<n&&(c=t[i],s=(i<<1)+1,a=i+1<<1,u=t[s],d=t[a],!d||u.index<=d.index?(f=u,o=s):(f=d,o=a),!(f.index>=c.index));)t[o]=c,t[i]=f,i=o;return r};function Ke(t,e){if(this.buf=t,this.pos=e|0,this.pos<0)throw new Error("negative offset")}Ke.prototype.isValid=function(){return this.pos<=this.buf.length};Ke.prototype.readBoolean=function(){return!!this.buf[this.pos++]};Ke.prototype.skipBoolean=function(){this.pos++};Ke.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};Ke.prototype.readInt=Ke.prototype.readLong=function(){var t=0,e=0,r=this.buf,n,i,s,a;do n=r[this.pos++],i=n&128,t|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=t,a=268435456;do n=r[this.pos++],s+=(n&127)*a,a*=128;while(n&128);return(s%2?-(s+1):s)/2}return t>>1^-(t&1)};Ke.prototype.skipInt=Ke.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};Ke.prototype.writeInt=Ke.prototype.writeLong=function(t){var e=this.buf,r,n;if(t>=-1073741824&&t<1073741824){n=t>=0?t<<1:~t<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++};Ke.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)};Ke.prototype.skipFloat=function(){this.pos+=4};Ke.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)};Ke.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)};Ke.prototype.skipDouble=function(){this.pos+=8};Ke.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)};Ke.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var r=dw.alloc(t);return this.buf.copy(r,0,e,e+t),r}};Ke.prototype.skipFixed=function(t){this.pos+=t};Ke.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,r,0,e)};Ke.prototype.readBytes=function(){return this.readFixed(this.readLong())};Ke.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t};Ke.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};typeof X.Buffer.prototype.utf8Slice=="function"?Ke.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.utf8Slice(e,e+t)}:Ke.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()};Ke.prototype.skipString=function(){var t=this.readLong();this.pos+=t};Ke.prototype.writeString=function(t){var e=X.Buffer.byteLength(t),r=this.buf;this.writeLong(e);var n=this.pos;if(this.pos+=e,!(this.pos>r.length))if(e>64)this._writeUtf8(t,e);else{var i,s,a,o;for(i=0,s=e;i<s;i++)a=t.charCodeAt(i),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)===55296&&((o=t.charCodeAt(i+1))&64512)===56320?(a=65536+((a&1023)<<10)+(o&1023),i++,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128)}};typeof X.Buffer.prototype.utf8Write=="function"?Ke.prototype._writeUtf8=function(t,e){this.buf.utf8Write(t,this.pos-e,e)}:Ke.prototype._writeUtf8=function(t,e){this.buf.write(t,this.pos-e,e,"utf8")};typeof X.Buffer.prototype.latin1Write=="function"?Ke.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(t,r,e)}:typeof X.Buffer.prototype.binaryWrite=="function"?Ke.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(t,r,e)}:Ke.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,r,e,"binary")};Ke.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};Ke.prototype.matchInt=Ke.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1};Ke.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1};Ke.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1};Ke.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};Ke.prototype.matchBytes=Ke.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),i=t.pos;t.pos+=n;var s=this.buf.slice(r,this.pos),a=t.buf.slice(i,t.pos);return s.compare(a)};Ke.prototype.unpackLongBytes=function(){var t=co(8),e=0,r=0,n=6,i=this.buf,s,a;for(s=i[this.pos++],a=s&1,t.fill(0),e|=(s&127)>>1;s&128;)s=i[this.pos++],e|=(s&127)<<n,n+=7,n>=8&&(n-=8,t[r++]=e,e>>=8);return t[r]=e,a&&wl(t,8),t};Ke.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,r=this.buf,n=1,i=0,s=3,a;e?(wl(t,8),a=1):a=0;for(var o=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!o[--s];);for(;i<s;)for(a|=o[i++]<<n,n+=24;n>7;)r[this.pos++]=a&127|128,a>>=7,n-=7;a|=o[s]<<n;do r[this.pos]=a&127,a>>=7;while(a&&(r[this.pos++]|=128));this.pos++,e&&wl(t,8)};function wl(t,e){for(;e--;)t[e]=~t[e]}var ma={abstractFunction:_w,addDeprecatedGetters:Ew,bufferFrom:jy,capitalize:Ky,copyOwnProperties:vw,getHash:gw,compare:hw,getOption:pw,jsonEnd:ww,newBuffer:co,objectValues:bw,toMap:mw,singleIndexOf:yw,hasDuplicates:xw,Lcg:Ss,OrderedQueue:gd,Tap:Ke},Xe=ma,qy=X,ir=ga,xs=Xe.Tap,_l=ir.debuglog("avsc:types"),Ye=ir.format,Ic={array:Zr,boolean:ki,bytes:fn,double:ci,enum:Xr,error:rr,fixed:Qr,float:oi,int:Pi,long:cn,map:Hr,null:bn,record:rr,string:Ln},Aw=/^[A-Za-z_][A-Za-z0-9_]*$/,Tr=new Xe.Lcg,ps=new xs(new qy.SlowBuffer(1024)),qi=null,ia=[];function ne(t,e){var r;if(qi?(r=qi,ia.push([qi,this]),qi=null):r=this,this._hash=new Sw,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,i=t.namespace===void 0?e&&e.namespace:t.namespace;if(n!==void 0){if(n=Rc(n,i),ba(n))throw new Error(Ye("cannot rename primitive type: %j",n));var s=e&&e.registry;if(s){if(s[n]!==void 0)throw new Error(Ye("duplicate type name: %s",n));s[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(Ye("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map(function(a){return Rc(a,i)}):[]}}ne.forSchema=function(t,e){e=e||{},e.registry=e.registry||{};var r=function(c){switch(c===!0?c="always":c===!1?c="never":c===void 0?c="auto":typeof c=="string"&&(c=c.toLowerCase()),c){case"always":return xn;case"never":return Wr;case"auto":return;default:throw new Error(Ye("invalid wrap unions option: %j",c))}}(e.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(ne.isType(t))return t;var n;if(e.typeHook&&(n=e.typeHook(t,e))){if(!ne.isType(n))throw new Error(Ye("invalid typehook return value: %j",n));return n}if(typeof t=="string"){if(t=Rc(t,e.namespace),n=e.registry[t],n)return n;if(ba(t))return e.registry[t]=ne.forSchema({type:t},e);throw new Error(Ye("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!qi){var i=e.logicalTypes[t.logicalType];if(i){var s=e.namespace,a={};Object.keys(e.registry).forEach(function(c){a[c]=e.registry[c]});try{return _l("instantiating logical type for %s",t.logicalType),new i(t,e)}catch(c){if(_l("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw c;qi=null,e.namespace=s,e.registry=a}}}if(Array.isArray(t)){var o=t.map(function(c){return ne.forSchema(c,e)});r||(r=Tw(o)?xn:Wr),n=new r(o,e)}else n=function(c){var f=Ic[c];if(f===void 0)throw new Error(Ye("unknown type: %j",c));return new f(t,e)}(t.type);return n};ne.forValue=function(t,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||ne.forSchema({type:"array",items:"null"}),e.valueHook){var r=e.valueHook(t,e);if(r!==void 0){if(!ne.isType(r))throw new Error(Ye("invalid value hook return value: %j",r));return r}}switch(typeof t){case"string":return ne.forSchema("string",e);case"boolean":return ne.forSchema("boolean",e);case"number":return(t|0)===t?ne.forSchema("int",e):Math.abs(t)<9007199254740991?ne.forSchema("float",e):ne.forSchema("double",e);case"object":if(t===null)return ne.forSchema("null",e);if(Array.isArray(t))return t.length?ne.forSchema({type:"array",items:ne.forTypes(t.map(function(i){return ne.forValue(i,e)}))},e):e.emptyArrayType;if(X.Buffer.isBuffer(t))return ne.forSchema("bytes",e);var n=Object.keys(t);return n.some(function(i){return!ko(i)})?ne.forSchema({type:"map",values:ne.forTypes(n.map(function(i){return ne.forValue(t[i],e)}),e)},e):ne.forSchema({type:"record",fields:n.map(function(i){return{name:i,type:ne.forValue(t[i],e)}})},e);default:throw new Error(Ye("cannot infer type from: %j",t))}};ne.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];e=e||{};var r=[],n=0,i=!0;if(t.forEach(function(d){switch(d.typeName){case"union:unwrapped":i=!1,r=r.concat(d.types);break;case"union:wrapped":n++,r=r.concat(d.types);break;case"null":r.push(d);break;default:i=!1,r.push(d)}}),n){if(!i)throw new Error("cannot combine wrapped union");var s={};r.forEach(function(d){var g=d.branchName,b=s[g];if(!b)s[g]=d;else if(!d.equals(b))throw new Error("inconsistent branch type")});var a=e.wrapUnions,o;e.wrapUnions=!0;try{o=ne.forSchema(Object.keys(s).map(function(d){return s[d]}),e)}catch(d){throw e.wrapUnions=a,d}return e.wrapUnions=a,o}var c={};r.forEach(function(d){var g=tf(d),b=c[g];b||(c[g]=b=[]),b.push(d)});var f=Object.keys(c),u=f.map(function(d){var g=c[d];if(g.length===1)return g[0];switch(d){case"null":case"boolean":return g[0];case"number":return kw(g);case"string":return Pw(g,e);case"buffer":return Cw(g,e);case"array":return g=g.filter(function(b){return b!==e.emptyArrayType}),g.length?ne.forSchema({type:"array",items:ne.forTypes(g.map(function(b){return b.itemsType}))},e):e.emptyArrayType;default:return Iw(g,e)}});return u.length===1?u[0]:ne.forSchema(u,e)};ne.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(t===1)return!0;var r=e.typeName,n;for(n=1;n<t;n++)if(r.indexOf(arguments[n])===0)return!0;return!1};ne.__reset=function(t){_l("resetting type buffer to %d",t),ps.buf=new qy.SlowBuffer(t)};Object.defineProperty(ne.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var t=ne.isType(this,"logical")?this.underlyingType:this;return ne.isType(t,"abstract")?t._concreteTypeName:ne.isType(t,"union")?void 0:t.typeName}});ne.prototype.clone=function(t,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))};ne.prototype.compare=Xe.abstractFunction;ne.prototype.compareBuffers=function(t,e){return this._match(new xs(t),new xs(e))};ne.prototype.createResolver=function(t,e){if(!ne.isType(t))throw new Error(Ye("not a type: %j",t));if(!ne.isType(this,"union","logical")&&ne.isType(t,"logical"))return this.createResolver(t.underlyingType,e);e=e||{},e.registry=e.registry||{};var r,n;if(ne.isType(this,"record","error")&&ne.isType(t,"record","error")&&(n=this.name+":"+t.name,r=e.registry[n],r))return r;if(r=new yd(this),n&&(e.registry[n]=r),ne.isType(t,"union")){var i=t.types.map(function(s){return this.createResolver(s,e)},this);r._read=function(s){var a=s.readLong(),o=i[a];if(o===void 0)throw new Error(Ye("invalid union index: %s",a));return i[a]._read(s)}}else this._update(r,t,e);if(!r._read)throw new Error(Ye("cannot read %s as %s",t,this));return Object.freeze(r)};ne.prototype.decode=function(t,e,r){var n=new xs(t,e),i=Hy(this,n,r);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}};ne.prototype.encode=function(t,e,r){var n=new xs(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos};ne.prototype.equals=function(t){return ne.isType(t)&&this.fingerprint().equals(t.fingerprint())};ne.prototype.fingerprint=function(t){if(t)return Xe.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=Xe.getHash(e).toString("binary")}return Xe.bufferFrom(this._hash.str,"binary")};ne.prototype.fromBuffer=function(t,e,r){var n=new xs(t),i=Hy(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return i};ne.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};ne.prototype.inspect=function(){var t=this.typeName,e=zy(t);if(ba(t))return Ye("<%s>",e);var r=this.schema({exportAttrs:!0,noDeref:!0});return typeof r=="object"&&!ne.isType(this,"logical")&&(r.type=void 0),Ye("<%s %j>",e,r)};ne.prototype.isValid=function(t,e){var r=(e&&e.noUndeclaredFields)|0,n=e&&e.errorHook,i,s;return n&&(s=[],i=function(a,o){n.call(this,s.slice(),a,o,t)}),this._check(t,r,i,s)};ne.prototype.random=Xe.abstractFunction;ne.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})};ne.prototype.toBuffer=function(t){ps.pos=0,this._write(ps,t);var e=Xe.newBuffer(ps.pos);return ps.isValid()?ps.buf.copy(e,0,0,ps.pos):this._write(new xs(e),t),e};ne.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};ne.prototype.toString=function(t){return t===void 0?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(t,{coerce:3}))};ne.prototype.wrap=function(t){var e=this._branchConstructor;return e===null?null:new e(t)};ne.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(e!==void 0){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var r={};this.name!==void 0&&(r.name=e),r.type=this.typeName;var n=this._deref(r,t);return n!==void 0&&(r=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(r.aliases=this.aliases),this.doc!==void 0&&(r.doc=this.doc)),r};ne.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;function e(){return function(i){~t.indexOf(".")?this[`${t}`]=i:this[t]=i}}var r=e();return r.type=this,r.prototype.unwrap=function(){return this[`${t}`]},r.prototype.unwrapped=r.prototype.unwrap,r};ne.prototype._peek=function(t){var e=t.pos,r=this._read(t);return t.pos=e,r};ne.prototype._check=Xe.abstractFunction;ne.prototype._copy=Xe.abstractFunction;ne.prototype._deref=Xe.abstractFunction;ne.prototype._match=Xe.abstractFunction;ne.prototype._read=Xe.abstractFunction;ne.prototype._skip=Xe.abstractFunction;ne.prototype._update=Xe.abstractFunction;ne.prototype._write=Xe.abstractFunction;ne.prototype.getAliases=function(){return this.aliases};ne.prototype.getFingerprint=ne.prototype.fingerprint;ne.prototype.getName=function(t){return this.name||!t?this.name:this.branchName};ne.prototype.getSchema=ne.prototype.schema;ne.prototype.getTypeName=function(){return this.typeName};function Yt(t){ne.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}ir.inherits(Yt,ne);Yt.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)};Yt.prototype._copy=function(t){return this._check(t,void 0,Ct),t};Yt.prototype._deref=function(){return this.typeName};Yt.prototype.compare=Xe.compare;function bn(){Yt.call(this)}ir.inherits(bn,Yt);bn.prototype._check=function(t,e,r){var n=t===null;return!n&&r&&r(t,this),n};bn.prototype._read=function(){return null};bn.prototype._skip=function(){};bn.prototype._write=function(t,e){e!==null&&Ct(e,this)};bn.prototype._match=function(){return 0};bn.prototype.compare=bn.prototype._match;bn.prototype.typeName="null";bn.prototype.random=bn.prototype._read;function ki(){Yt.call(this)}ir.inherits(ki,Yt);ki.prototype._check=function(t,e,r){var n=typeof t=="boolean";return!n&&r&&r(t,this),n};ki.prototype._read=function(t){return t.readBoolean()};ki.prototype._skip=function(t){t.skipBoolean()};ki.prototype._write=function(t,e){typeof e!="boolean"&&Ct(e,this),t.writeBoolean(e)};ki.prototype._match=function(t,e){return t.matchBoolean(e)};ki.prototype.typeName="boolean";ki.prototype.random=function(){return Tr.nextBoolean()};function Pi(){Yt.call(this)}ir.inherits(Pi,Yt);Pi.prototype._check=function(t,e,r){var n=t===(t|0);return!n&&r&&r(t,this),n};Pi.prototype._read=function(t){return t.readInt()};Pi.prototype._skip=function(t){t.skipInt()};Pi.prototype._write=function(t,e){e!==(e|0)&&Ct(e,this),t.writeInt(e)};Pi.prototype._match=function(t,e){return t.matchInt(e)};Pi.prototype.typeName="int";Pi.prototype.random=function(){return Tr.nextInt(1e3)|0};function cn(){Yt.call(this)}ir.inherits(cn,Yt);cn.prototype._check=function(t,e,r){var n=typeof t=="number"&&t%1===0&&bd(t);return!n&&r&&r(t,this),n};cn.prototype._read=function(t){var e=t.readLong();if(!bd(e))throw new Error("potential precision loss");return e};cn.prototype._skip=function(t){t.skipLong()};cn.prototype._write=function(t,e){(typeof e!="number"||e%1||!bd(e))&&Ct(e,this),t.writeLong(e)};cn.prototype._match=function(t,e){return t.matchLong(e)};cn.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}};cn.prototype.typeName="long";cn.prototype.random=function(){return Tr.nextInt()};cn.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new Lr(e);return Object.keys(r).forEach(function(i){if(t[i]===void 0)throw new Error(Ye("missing method implementation: %s",i));n[r[i]]=t[i]}),Object.freeze(n)};function oi(){Yt.call(this)}ir.inherits(oi,Yt);oi.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};oi.prototype._read=function(t){return t.readFloat()};oi.prototype._skip=function(t){t.skipFloat()};oi.prototype._write=function(t,e){typeof e!="number"&&Ct(e,this),t.writeFloat(e)};oi.prototype._match=function(t,e){return t.matchFloat(e)};oi.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};oi.prototype.typeName="float";oi.prototype.random=function(){return Tr.nextFloat(1e3)};function ci(){Yt.call(this)}ir.inherits(ci,Yt);ci.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};ci.prototype._read=function(t){return t.readDouble()};ci.prototype._skip=function(t){t.skipDouble()};ci.prototype._write=function(t,e){typeof e!="number"&&Ct(e,this),t.writeDouble(e)};ci.prototype._match=function(t,e){return t.matchDouble(e)};ci.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};ci.prototype.typeName="double";ci.prototype.random=function(){return Tr.nextFloat()};function Ln(){Yt.call(this)}ir.inherits(Ln,Yt);Ln.prototype._check=function(t,e,r){var n=typeof t=="string";return!n&&r&&r(t,this),n};Ln.prototype._read=function(t){return t.readString()};Ln.prototype._skip=function(t){t.skipString()};Ln.prototype._write=function(t,e){typeof e!="string"&&Ct(e,this),t.writeString(e)};Ln.prototype._match=function(t,e){return t.matchString(e)};Ln.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}};Ln.prototype.typeName="string";Ln.prototype.random=function(){return Tr.nextString(Tr.nextInt(32))};function fn(){Yt.call(this)}ir.inherits(fn,Yt);fn.prototype._check=function(t,e,r){var n=X.Buffer.isBuffer(t);return!n&&r&&r(t,this),n};fn.prototype._read=function(t){return t.readBytes()};fn.prototype._skip=function(t){t.skipBytes()};fn.prototype._write=function(t,e){X.Buffer.isBuffer(e)||Ct(e,this),t.writeBytes(e)};fn.prototype._match=function(t,e){return t.matchBytes(e)};fn.prototype._update=Ln.prototype._update;fn.prototype._copy=function(t,e){var r;switch((e&&e.coerce)|0){case 3:return this._check(t,void 0,Ct),t.toString("binary");case 2:if(typeof t!="string")throw new Error(Ye("cannot coerce to buffer: %j",t));return r=Xe.bufferFrom(t,"binary"),this._check(r,void 0,Ct),r;case 1:if(!Gy(t))throw new Error(Ye("cannot coerce to buffer: %j",t));return r=Xe.bufferFrom(t.data),this._check(r,void 0,Ct),r;default:return this._check(t,void 0,Ct),Xe.bufferFrom(t)}};fn.prototype.compare=X.Buffer.compare;fn.prototype.typeName="bytes";fn.prototype.random=function(){return Tr.nextBuffer(Tr.nextInt(32))};function fi(t,e){if(ne.call(this),!Array.isArray(t))throw new Error(Ye("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(r){return ne.forSchema(r,e)})),this._branchIndices={},this.types.forEach(function(r,n){if(ne.isType(r,"union"))throw new Error("unions cannot be directly nested");var i=r.branchName;if(this._branchIndices[i]!==void 0)throw new Error(Ye("duplicate union branch name: %j",i));this._branchIndices[i]=n},this)}ir.inherits(fi,ne);fi.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};fi.prototype._skip=function(t){this.types[t.readLong()]._skip(t)};fi.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this.types[r]._match(t,e):r<n?-1:1};fi.prototype._deref=function(t,e){return this.types.map(function(r){return r._attrs(e)})};fi.prototype.getTypes=function(){return this.types};function Wr(t,e){fi.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(r,n){if(ne.isType(r,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:r});else{var i=tf(r);if(this._bucketIndices[i]!==void 0)throw new Error(Ye("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=n}},this),Object.freeze(this)}ir.inherits(Wr,fi);Wr.prototype._getIndex=function(t){var e=this._bucketIndices[Vy(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e};Wr.prototype._getBranchIndex=function(t,e){var r=this._dynamicBranches,n,i,s;for(n=0,i=r.length;n<i;n++)if(s=r[n],s.type._check(t))if(e===void 0)e=s.index;else throw new Error("ambiguous conversion");return e};Wr.prototype._check=function(t,e,r,n){var i=this._getIndex(t),s=i!==void 0;return s?this.types[i]._check(t,e,r,n):(r&&r(t,this),s)};Wr.prototype._read=function(t){var e=t.readLong(),r=this.types[e];if(r)return r._read(t);throw new Error(Ye("invalid union index: %s",e))};Wr.prototype._write=function(t,e){var r=this._getIndex(e);r===void 0&&Ct(e,this),t.writeLong(r),e!==null&&this.types[r]._write(t,e)};Wr.prototype._update=function(t,e,r){var n,i,s;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}t._read=function(a){return s._read(a)};return}};Wr.prototype._copy=function(t,e){var r=e&&e.coerce|0,n=e&&e.wrap|0,i;if(n===2)i=0;else{switch(r){case 1:Gy(t)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(t);break;case 2:if(t===null)i=this._bucketIndices.null;else if(typeof t=="object"){var s=Object.keys(t);s.length===1&&(i=this._branchIndices[s[0]],t=t[s[0]])}break;default:i=this._getIndex(t)}i===void 0&&Ct(t,this)}var a=this.types[i];if(t===null||n===3)return a._copy(t,e);switch(r){case 3:var o={};return o[a.branchName]=a._copy(t,e),o;default:return a._copy(t,e)}};Wr.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(r===void 0)Ct(t,this);else if(n===void 0)Ct(e,this);else return r===n?this.types[r].compare(t,e):Xe.compare(r,n)};Wr.prototype.typeName="union:unwrapped";Wr.prototype.random=function(){var t=Tr.nextInt(this.types.length);return this.types[t].random()};function xn(t,e){fi.call(this,t,e),Object.freeze(this)}ir.inherits(xn,fi);xn.prototype._check=function(t,e,r,n){var i=!1;if(t===null)i=this._branchIndices.null!==void 0;else if(typeof t=="object"){var s=Object.keys(t);if(s.length===1){var a=s[0],o=this._branchIndices[a];if(o!==void 0)return r?(n.push(a),i=this.types[o]._check(t[a],e,r,n),n.pop(),i):this.types[o]._check(t[a],e)}}return!i&&r&&r(t,this),i};xn.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(Ye("invalid union index"));var r=e._branchConstructor;return r===null?null:new r(e._read(t))};xn.prototype._write=function(t,e){var r,n,i;e===null?(r=this._branchIndices.null,r===void 0&&Ct(e,this),t.writeLong(r)):(n=Object.keys(e),n.length===1&&(i=n[0],r=this._branchIndices[i]),r===void 0&&Ct(e,this),t.writeLong(r),this.types[r]._write(t,e[i]))};xn.prototype._update=function(t,e,r){var n,i,s,a;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}a=this.types[n]._branchConstructor,a?t._read=function(o){return new a(s._read(o))}:t._read=function(){return null};return}};xn.prototype._copy=function(t,e){var r=e&&e.wrap|0;if(r===2){var n=this.types[0];return t===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(t,e))}if(t===null&&this._branchIndices.null!==void 0)return null;var i,s,a;if(typeof t=="object"){var o=Object.keys(t);if(o.length===1){var c=o[0];if(i=this._branchIndices[c],i===void 0&&e.qualifyNames){var f,u;for(f=0,s=this.types.length;f<s;f++)if(u=this.types[f],u.name&&c===md(u.name)){i=f;break}}i!==void 0&&(a=this.types[i]._copy(t[c],e))}}if(r===1&&a===void 0)for(i=0,s=this.types.length;i<s&&a===void 0;)try{a=this.types[i]._copy(t,e)}catch{i++}if(a!==void 0)return r===3?a:new this.types[i]._branchConstructor(a);Ct(t,this)};xn.prototype.compare=function(t,e){var r=t===null?"null":Object.keys(t)[0],n=e===null?"null":Object.keys(e)[0],i=this._branchIndices[r];return r===n?r==="null"?0:this.types[i].compare(t[r],e[r]):Xe.compare(i,this._branchIndices[n])};xn.prototype.typeName="union:wrapped";xn.prototype.random=function(){var t=Tr.nextInt(this.types.length),e=this.types[t],r=e._branchConstructor;return r?new r(e.random()):null};function Xr(t,e){if(ne.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(Ye("invalid enum symbols: %j",t.symbols));this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(r,n){if(!ko(r))throw new Error(Ye("invalid %s symbol: %j",this,r));if(this._indices[r]!==void 0)throw new Error(Ye("duplicate %s symbol: %j",this,r));this._indices[r]=n},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ir.inherits(Xr,ne);Xr.prototype._check=function(t,e,r){var n=this._indices[t]!==void 0;return!n&&r&&r(t,this),n};Xr.prototype._read=function(t){var e=t.readLong(),r=this.symbols[e];if(r===void 0)throw new Error(Ye("invalid %s enum index: %s",this.name,e));return r};Xr.prototype._skip=function(t){t.skipLong()};Xr.prototype._write=function(t,e){var r=this._indices[e];r===void 0&&Ct(e,this),t.writeLong(r)};Xr.prototype._match=function(t,e){return t.matchLong(e)};Xr.prototype.compare=function(t,e){return Xe.compare(this._indices[t],this._indices[e])};Xr.prototype._update=function(t,e){var r=this.symbols;e.typeName==="enum"&&(!e.name||~Ya(this).indexOf(e.name))&&e.symbols.every(function(n){return~r.indexOf(n)})&&(t.symbols=e.symbols,t._read=e._read)};Xr.prototype._copy=function(t){return this._check(t,void 0,Ct),t};Xr.prototype._deref=function(t){t.symbols=this.symbols};Xr.prototype.getSymbols=function(){return this.symbols};Xr.prototype.typeName="enum";Xr.prototype.random=function(){return Tr.choice(this.symbols)};function Qr(t,e){if(ne.call(this,t,e),t.size!==(t.size|0)||t.size<1)throw new Error(Ye("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ir.inherits(Qr,ne);Qr.prototype._check=function(t,e,r){var n=X.Buffer.isBuffer(t)&&t.length===this.size;return!n&&r&&r(t,this),n};Qr.prototype._read=function(t){return t.readFixed(this.size)};Qr.prototype._skip=function(t){t.skipFixed(this.size)};Qr.prototype._write=function(t,e){(!X.Buffer.isBuffer(e)||e.length!==this.size)&&Ct(e,this),t.writeFixed(e,this.size)};Qr.prototype._match=function(t,e){return t.matchFixed(e,this.size)};Qr.prototype.compare=X.Buffer.compare;Qr.prototype._update=function(t,e){e.typeName==="fixed"&&this.size===e.size&&(!e.name||~Ya(this).indexOf(e.name))&&(t.size=this.size,t._read=this._read)};Qr.prototype._copy=fn.prototype._copy;Qr.prototype._deref=function(t){t.size=this.size};Qr.prototype.getSize=function(){return this.size};Qr.prototype.typeName="fixed";Qr.prototype.random=function(){return Tr.nextBuffer(this.size)};function Hr(t,e){if(ne.call(this),!t.values)throw new Error(Ye("missing map values: %j",t));this.valuesType=ne.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ir.inherits(Hr,ne);Hr.prototype._check=function(t,e,r,n){if(!t||typeof t!="object"||Array.isArray(t))return r&&r(t,this),!1;var i=Object.keys(t),s=!0,a,o,c,f;if(r){for(c=n.length,n.push(""),a=0,o=i.length;a<o;a++)f=n[c]=i[a],this.valuesType._check(t[f],e,r,n)||(s=!1);n.pop()}else for(a=0,o=i.length;a<o;a++)if(!this.valuesType._check(t[i[a]],e))return!1;return s};Hr.prototype._read=function(t){for(var e=this.valuesType,r={},n;n=El(t);)for(;n--;){var i=t.readString();r[i]=e._read(t)}return r};Hr.prototype._skip=function(t){for(var e=this.valuesType,r,n;n=t.readLong();)if(n<0)r=t.readLong(),t.pos+=r;else for(;n--;)t.skipString(),e._skip(t)};Hr.prototype._write=function(t,e){(!e||typeof e!="object"||Array.isArray(e))&&Ct(e,this);var r=this.valuesType,n=Object.keys(e),i=n.length,s,a;if(i)for(t.writeLong(i),s=0;s<i;s++)a=n[s],t.writeString(a),r._write(t,e[a]);t.writeLong(0)};Hr.prototype._match=function(){throw new Error("maps cannot be compared")};Hr.prototype._update=function(t,e,r){e.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(e.valuesType,r),t._read=this._read)};Hr.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!Array.isArray(t)){var r=this.valuesType,n=Object.keys(t),i,s,a,o={};for(i=0,s=n.length;i<s;i++)a=n[i],o[a]=r._copy(t[a],e);return o}Ct(t,this)};Hr.prototype.compare=Hr.prototype._match;Hr.prototype.typeName="map";Hr.prototype.getValuesType=function(){return this.valuesType};Hr.prototype.random=function(){var t={},e,r;for(e=0,r=Tr.nextInt(10);e<r;e++)t[Tr.nextString(Tr.nextInt(20))]=this.valuesType.random();return t};Hr.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)};function Zr(t,e){if(ne.call(this),!t.items)throw new Error(Ye("missing array items: %j",t));this.itemsType=ne.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}ir.inherits(Zr,ne);Zr.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var i=!0,s,a,o;if(r){for(o=n.length,n.push(""),s=0,a=t.length;s<a;s++)n[o]=""+s,this.itemsType._check(t[s],e,r,n)||(i=!1);n.pop()}else for(s=0,a=t.length;s<a;s++)if(!this.itemsType._check(t[s],e))return!1;return i};Zr.prototype._read=function(t){for(var e=this.itemsType,r=[],n;n=t.readLong();)for(n<0&&(n=-n,t.skipLong());n--;)r.push(e._read(t));return r};Zr.prototype._skip=function(t){for(var e,r;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)this.itemsType._skip(t)};Zr.prototype._write=function(t,e){Array.isArray(e)||Ct(e,this);var r=e.length,n;if(r)for(t.writeLong(r),n=0;n<r;n++)this.itemsType._write(t,e[n]);t.writeLong(0)};Zr.prototype._match=function(t,e){for(var r=t.readLong(),n=e.readLong(),i;r&&n;){if(i=this.itemsType._match(t,e),i)return i;--r||(r=El(t)),--n||(n=El(e))}return Xe.compare(r,n)};Zr.prototype._update=function(t,e,r){e.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(e.itemsType,r),t._read=this._read)};Zr.prototype._copy=function(t,e){Array.isArray(t)||Ct(t,this);var r=new Array(t.length),n,i;for(n=0,i=t.length;n<i;n++)r[n]=this.itemsType._copy(t[n],e);return r};Zr.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)};Zr.prototype.compare=function(t,e){var r=t.length,n=e.length,i,s,a;for(i=0,s=Math.min(r,n);i<s;i++)if(a=this.itemsType.compare(t[i],e[i]))return a;return Xe.compare(r,n)};Zr.prototype.getItemsType=function(){return this.itemsType};Zr.prototype.typeName="array";Zr.prototype.random=function(){var t=[],e,r;for(e=0,r=Tr.nextInt(10);e<r;e++)t.push(this.itemsType.random());return t};function rr(t,e){e=e||{};var r=e.namespace;if(t.namespace!==void 0)e.namespace=t.namespace;else if(t.name){var n=/^(.*)\.[^.]+$/.exec(t.name);n&&(e.namespace=n[1])}if(ne.call(this,t,e),!Array.isArray(t.fields))throw new Error(Ye("non-array record fields: %j",t.fields));if(Xe.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(Ye("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(i){var s=new Ai(i,e);return this._fieldsByName[s.name]=s,s},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r,Object.freeze(this)}ir.inherits(rr,ne);rr.prototype._getConstructorName=function(){return this.name?md(this.name):this._isError?"Error$":"Record$"};rr.prototype._createConstructor=function(t){var e={},r,n,i,s,a,o,c;for(r=0,n=this.fields.length;r<n;r++)i=this.fields[r],a=i.defaultValue,o=a()!==void 0,s=i.name,t&&this._isError&&s==="stack"&&ne.isType(i.type,"string")&&!o&&(c=i),o&&(e[r]=a);var f=this;function u(g){const b=f._getConstructorName();var E={[b]:function(...w){for(var y=0,_=f.fields.length;y<_;y++){let A=f.fields[y];A.defaultValue()===void 0?this[A.name]=w[y]:w[y]===void 0?this[A.name]=g[y]():this[A.name]=w[y]}c&&this.stack===void 0&&(typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack)}}[b];return E}var d=u(e);return d.getType=function(){return f},d.type=f,this._isError&&(ir.inherits(d,Error),d.prototype.name=this._getConstructorName()),d.prototype.clone=function(g){return f.clone(this,g)},d.prototype.compare=function(g){return f.compare(this,g)},d.prototype.isValid=function(g){return f.isValid(this,g)},d.prototype.toBuffer=function(){return f.toBuffer(this)},d.prototype.toString=function(){return f.toString(this)},d.prototype.wrap=function(){return f.wrap(this)},d.prototype.wrapped=d.prototype.wrap,d};rr.prototype._createChecker=function(){const t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(a,o,c,f){if(a===null||typeof a!="object"||o&&!this._checkFields(a))return c&&c(a,this),!1;const u=[];if(e.fields.length)for(var d=0,g=e.fields.length;d<g;d++){let w=e.fields[d];w.defaultValue()!==void 0&&u.push(a[w.name])}else return!0;if(c){var b=1,E=f.length;f.push("");for(var d=0,g=e.fields.length;d<g;d++){let _=e.fields[d];f[E]=_.name,b&=_.defaultValue()===void 0?n[d]._check(a[_.name],_,c,f):u[d]===void 0||n[d]._check(u[d],_,c,f)}return f.pop(),!!b}else return e.fields.reduce((w,y,_)=>w&&(y.defaultValue()===void 0?n[_]._check(a[y.name]):u[_]===void 0||n[_]._check(u[_],o)),!0)}}[i];return s}return r(t)};rr.prototype._createReader=function(){var t=[this.recordConstructor],e,r;for(e=0,r=this.fields.length;e<r;e++)t.push(this.fields[e].type);var n=this;function i(s){var a=n._getConstructorName(),o={[a]:function(c){return new s[0](...s.slice(1).map(f=>f._read(c)))}}[a];return o}return i(t)};rr.prototype._createSkipper=function(){var t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(a){n.forEach(o=>o._skip(a))}}[i];return s}return r(t)};rr.prototype._createWriter=function(){var t=[],e={};this.fields.forEach((i,s)=>{t.push(i.type),i.defaultValue()!==void 0&&(e[s]=i.type.toBuffer(i.defaultValue()).toString("binary"))});var r=this;function n(i,s){var a=r._getConstructorName(),o={[a]:function(c,f){for(var u=0,d=r.fields.length;u<d;u++){let g=r.fields[u];g.defaultValue()===void 0?i[u]._write(c,f[g.name]):f[g.name]===void 0?c.writeBinary(s[u],s[u].length):i[u]._write(c,f[g.name])}}}[a];return o}return n(t,e)};rr.prototype._update=function(t,e,r){if(e.name&&!~Ya(this).indexOf(e.name))throw new Error(Ye("no alias found for %s",e.name));var n=this.fields,i=e.fields,s=Xe.toMap(i,function(y){return y.name}),a={},o,c,f,u,d,g,b;for(o=0;o<n.length;o++){for(f=n[o],d=Ya(f),g=[],c=0;c<d.length;c++)u=d[c],s[u]&&g.push(u);if(g.length>1)throw new Error(Ye("ambiguous aliasing for %s.%s (%s)",e.name,f.name,g));if(g.length)u=g[0],b={resolver:f.type.createResolver(s[u].type,r),name:"_"+f.name},a[u]?a[u].push(b):a[u]=[b];else if(f.defaultValue()===void 0)throw new Error(Ye("no matching field for default-less %s.%s",e.name,f.name))}var E=this;function w(){var y=E._getConstructorName(),_={[y]:function(A,B){if(!B){var N=[];for(O=0;O<n.length;O++){for(f=n[O],d=Ya(f),g=[],U=0;U<d.length;U++)u=d[U],s[u]&&g.push(u);g.length||N.push(void 0)}for(var O=0;O<i.length;O++){let H=e.fields[O];if(u=H.name,a[u]===void 0)H.type._skip(A);else for(var U=a[u].length;U--;)N.unshift(U?a[u][U].resolver._peek(A):a[u][U].resolver._read(A))}return new E.recordConstructor(...N)}}}[y];return _}t._read=w()};rr.prototype._match=function(t,e){var r=this.fields,n,i,s,a,o;for(n=0,i=r.length;n<i;n++)if(s=r[n],a=s._order,o=s.type,a){if(a*=o._match(t,e),a)return a}else o._skip(t),o._skip(e);return 0};rr.prototype._checkFields=function(t){var e=Object.keys(t),r,n;for(r=0,n=e.length;r<n;r++)if(!this._fieldsByName[e[r]])return!1;return!0};rr.prototype._copy=function(t,e){var r=e&&e.fieldHook,n=[void 0],i,s,a,o;for(i=0,s=this.fields.length;i<s;i++)a=this.fields[i],o=t[a.name],o===void 0&&a.hasOwnProperty("defaultValue")&&(o=a.defaultValue()),(e&&!e.skip||o!==void 0)&&(o=a.type._copy(o,e)),r&&(o=r(a,o,this)),n.push(o);var c=this.recordConstructor;return new(c.bind.apply(c,n))};rr.prototype._deref=function(t,e){t.fields=this.fields.map(function(r){var n=r.type,i={name:r.name,type:n._attrs(e)};if(e.exportAttrs){var s=r.defaultValue();s!==void 0&&(i.default=n._copy(s,{coerce:3,wrap:3}));var a=r.order;a!=="ascending"&&(i.order=a);var o=r.aliases;o.length&&(i.aliases=o);var c=r.doc;c!==void 0&&(i.doc=c)}return i})};rr.prototype.compare=function(t,e){var r=this.fields,n,i,s,a,o,c;for(n=0,i=r.length;n<i;n++)if(s=r[n],a=s.name,o=s._order,c=s.type,o&&(o*=c.compare(t[a],e[a]),o))return o;return 0};rr.prototype.random=function(){var t=this.fields.map(function(r){return r.type.random()});t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))};rr.prototype.field=function(t){return this._fieldsByName[t]};rr.prototype.getField=rr.prototype.field;rr.prototype.getFields=function(){return this.fields};rr.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(rr.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function xr(t,e){this._logicalTypeName=t.logicalType,ne.call(this),qi=this;try{this._underlyingType=ne.forSchema(t,e)}finally{qi=null;var r=ia.length;r&&ia[r-1][0]===this&&ia.pop()}ne.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}ir.inherits(xr,ne);Object.defineProperty(xr.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(xr.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,r;for(t=0,e=ia.length;t<e;t++)if(r=ia[t],r[0]===this)return r[1]}});xr.prototype.getUnderlyingType=function(){return this.underlyingType};xr.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))};xr.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))};xr.prototype._check=function(t,e,r,n){try{var i=this._toValue(t)}catch{}return i===void 0?(r&&r(t,this),!1):this.underlyingType._check(i,e,r,n)};xr.prototype._copy=function(t,e){var r=this.underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}};xr.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(i){return n(e._read(i))})};xr.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this.underlyingType.compare(r,n)};xr.prototype.random=function(){return this._fromValue(this.underlyingType.random())};xr.prototype._deref=function(t,e){var r=this.underlyingType,n=r.name!==void 0&&e.derefed[r.name];return t=r._attrs(e),!n&&e.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t};xr.prototype._skip=function(t){this.underlyingType._skip(t)};xr.prototype._export=function(){};xr.prototype._fromValue=Xe.abstractFunction;xr.prototype._toValue=Xe.abstractFunction;xr.prototype._resolve=Xe.abstractFunction;function Lr(t){this._concreteTypeName="long",Yt.call(this,!0),this._noUnpack=!!t}ir.inherits(Lr,cn);Lr.prototype.typeName="abstract:long";Lr.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n};Lr.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};Lr.prototype._write=function(t,e){this._isValid(e)||Ct(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)};Lr.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}};Lr.prototype._deref=function(){return"long"};Lr.prototype._update=function(t,e){var r=this;switch(e.typeName){case"int":t._read=function(n){return r._fromJSON(e._read(n))};break;case"long":t._read=function(n){return r._read(n)}}};Lr.prototype.random=function(){return this._fromJSON(cn.prototype.random())};Lr.prototype._fromBuffer=Xe.abstractFunction;Lr.prototype._toBuffer=Xe.abstractFunction;Lr.prototype._fromJSON=Xe.abstractFunction;Lr.prototype._toJSON=Xe.abstractFunction;Lr.prototype._isValid=Xe.abstractFunction;Lr.prototype.compare=Xe.abstractFunction;function Ai(t,e){var r=t.name;if(typeof r!="string"||!ko(r))throw new Error(Ye("invalid field name: %s",r));this.name=r,this.type=ne.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(a){switch(a){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Ye("invalid order: %j",a))}}(t.order===void 0?"ascending":t.order);var n=t.default;if(n!==void 0){var i=this.type,s=i._copy(n,{coerce:2,wrap:2});ba(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return s}:this.defaultValue=function(){return i._copy(s)}}Object.freeze(this)}Ai.prototype.defaultValue=function(){};Object.defineProperty(Ai.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});Ai.prototype.getAliases=function(){return this.aliases};Ai.prototype.getDefault=Ai.prototype.defaultValue;Ai.prototype.getName=function(){return this.name};Ai.prototype.getOrder=function(){return this.order};Ai.prototype.getType=function(){return this.type};function yd(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}yd.prototype._peek=ne.prototype._peek;yd.prototype.inspect=function(){return"<Resolver>"};function Sw(){this.str=void 0}function Hy(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}else return t._read(e)}function md(t){var e=t.split(".");return e[e.length-1]}function Rc(t,e){~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(n){if(!ko(n))throw new Error(Ye("invalid name: %j",t))});var r=md(t);return ba(r)?r:t}function Ya(t){var e={};t.name&&(e[t.name]=!0);var r=t.aliases,n,i;for(n=0,i=r.length;n<i;n++)e[r[n]]=!0;return Object.keys(e)}function ba(t){var e=Ic[t];return e&&e.prototype instanceof Yt}function zy(t){if(t==="error")t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(e[1]==="union"?t=e[2]+"Union":t=e[1])}return Xe.capitalize(t)+"Type"}function El(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function bd(t){return t>=-9007199254740990&&t<=9007199254740990}function Gy(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function ko(t){return Aw.test(t)}function Ct(t,e){throw new Error(Ye("invalid %s: %j",e,t))}function tf(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function Vy(t){if(t===null)return"null";var e=typeof t;if(e==="object"){if(Array.isArray(t))return"array";if(X.Buffer.isBuffer(t))return"buffer"}return e}function Tw(t){var e={},r,n,i,s;for(r=0,n=t.length;r<n;r++)if(s=t[r],!ne.isType(s,"logical")){if(i=tf(s),e[i])return!0;e[i]=!0}return!1}function kw(t){var e=["int","long","float","double"],r=-1,n=null,i,s,a,o;for(i=0,s=t.length;i<s;i++)a=t[i],o=e.indexOf(a.typeName),o>r&&(r=o,n=a);return n}function Pw(t,e){var r={},n,i,s,a;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="string")return s;a=s.symbols;var o,c;for(o=0,c=a.length;o<c;o++)r[a[o]]=!0}return ne.forSchema({type:"enum",symbols:Object.keys(r)},e)}function Cw(t,e){var r=-1,n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="bytes")return s;r===-1?r=s.size:s.size!==r&&(r=-2)}return r<0?ne.forSchema("bytes",e):t[0]}function Iw(t,e){var r=[],n={},i={},s=!0,a,o,c,f;for(a=0,o=t.length;a<o;a++)if(c=t[a],c.typeName==="map")s=!1,r.push(c.valuesType);else{f=c.fields;var u,d,g,b,E,w;for(u=0,d=f.length;u<d;u++)g=f[u],E=g.name,w=g.type,r.push(w),s&&(n[E]||(n[E]=[]),n[E].push(w),b=g.defaultValue(),b!==void 0&&(i[E]=b))}if(s){var y=Object.keys(n);for(a=0,o=y.length;a<o;a++)E=y[a],n[E].length<t.length&&i[E]===void 0&&(e&&e.strictDefaults?s=!1:(n[E].unshift(ne.forSchema("null",e)),i[E]=null))}var _;return s?_={type:"record",fields:y.map(function(A){var B=ne.forTypes(n[A],e),N=i[A];if(N!==void 0&&~B.typeName.indexOf("union")){var O=B.types.slice(),U,H;for(U=0,H=O.length;U<H&&!O[U].isValid(N);U++);if(U>0){var V=O[0];O[0]=O[U],O[U]=V,B=ne.forSchema(O,e)}}return{name:A,type:B,default:i[A]}})}:_={type:"map",values:ne.forTypes(r,e)},ne.forSchema(_,e)}var xd={Type:ne,getTypeBucket:tf,getValueBucket:Vy,isPrimitive:ba,isValidName:ko,qualify:Rc,builtins:function(){var t={LogicalType:xr,UnwrappedUnionType:Wr,WrappedUnionType:xn},e=Object.keys(Ic),r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],t[zy(i)]=Ic[i];return t}()},Va=xd;function Rw(t,e){var r;if(typeof t=="string")try{r=JSON.parse(t)}catch{r=t}else r=t;return Va.Type.forSchema(r,e)}var Nw={Type:Va.Type,parse:Rw,types:Va.builtins,combine:Va.Type.forTypes,infer:Va.Type.forValue},vd=xd,It=ma,rs=ey.exports,ei=Gc,vt=ga,wd=It.Tap,yr=vd.Type,cr=vt.debuglog("avsc:services"),br=vt.format,Xn={namespace:"org.apache.avro.ipc"},Jy=yr.forSchema("boolean",Xn),ti=yr.forSchema({type:"map",values:"bytes"},Xn),_d=yr.forSchema("string",Xn),Po=yr.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",ti],default:null}]},Xn),Co=yr.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",ti],default:null}]},Xn),Ed=16,Ad=new Si("",yr.forSchema({name:"PingRequest",type:"record",fields:[]},Xn),yr.forSchema(["string"],Xn),yr.forSchema("null",Xn));function Si(t,e,r,n,i,s){if(this.name=t,!yr.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!yr.isType(r,"union")||!yr.isType(r.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=r,i&&(!yr.isType(n,"null")||r.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=n,this.oneWay=!!i,this.doc=s!==void 0?""+s:void 0,Object.freeze(this)}Si.forSchema=function(t,e,r){if(r=r||{},!vd.isValidName(t))throw new Error(br("invalid message name: %s",t));if(!Array.isArray(e.request))throw new Error(br("invalid message request: %s",t));var n=br("%s.%sRequest",Xn.namespace,It.capitalize(t)),i=yr.forSchema({name:n,type:"record",namespace:r.namespace||"",fields:e.request},r);if(delete r.registry[n],!e.response)throw new Error(br("invalid message response: %s",t));var s=yr.forSchema(e.response,r);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(br("invalid message errors: %s",t));var a=yr.forSchema(["string"].concat(e.errors||[]),r),o=!!e["one-way"];return new Si(t,i,a,s,o,e.doc)};Si.prototype.schema=yr.prototype.getSchema;Si.prototype._attrs=function(t){var e=this.requestType._attrs(t),r={request:e.fields,response:this.responseType._attrs(t)},n=this.doc;n!==void 0&&(r.doc=n);var i=this.errorType._attrs(t);return i.length>1&&(r.errors=i.slice(1)),this.oneWay&&(r["one-way"]=!0),r};It.addDeprecatedGetters(Si,["name","errorType","requestType","responseType"]);Si.prototype.isOneWay=vt.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function dt(t,e,r,n,i){if(typeof t!="string")return dt.forProtocol(t,e);this.name=t,this._messagesByName=e||{},this.messages=Object.freeze(It.objectValues(this._messagesByName)),this._typesByName=r||{},this.types=Object.freeze(It.objectValues(this._typesByName)),this.protocol=n,this._hashStr=It.getHash(JSON.stringify(n)).toString("binary"),this.doc=n.doc?""+n.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}dt.Client=un;dt.Server=Fn;dt.compatible=function(t,e){try{Xy(t,e)}catch{return!1}return!0};dt.forProtocol=function(t,e){e=e||{};var r=t.protocol;if(!r)throw new Error("missing protocol name");if(t.namespace!==void 0)e.namespace=t.namespace;else{var n=/^(.*)\.[^.]+$/.exec(r);n&&(e.namespace=n[1])}r=vd.qualify(r,e.namespace),t.types&&t.types.forEach(function(s){yr.forSchema(s,e)});var i;return t.messages&&(i={},Object.keys(t.messages).forEach(function(s){i[s]=Si.forSchema(s,t.messages[s],e)})),new dt(r,i,e.registry,t)};dt.isService=function(t){return!!t&&t.hasOwnProperty("_hashStr")};dt.prototype.createClient=function(t){var e=new un(this,t);return mr.exports.nextTick(function(){if(t&&t.server){var r={objectMode:!0},n=[new ei.PassThrough(r),new ei.PassThrough(r)];t.server.createChannel({readable:n[0],writable:n[1]},r),e.createChannel({readable:n[1],writable:n[0]},r)}else t&&t.transport&&e.createChannel(t.transport)}),e};dt.prototype.createServer=function(t){return new Fn(this,t)};Object.defineProperty(dt.prototype,"hash",{enumerable:!0,get:function(){return It.bufferFrom(this._hashStr,"binary")}});dt.prototype.message=function(t){return this._messagesByName[t]};dt.prototype.type=function(t){return this._typesByName[t]};dt.prototype.inspect=function(){return br("<Service %j>",this.name)};It.addDeprecatedGetters(dt,["message","messages","name","type","types"]);dt.prototype.createEmitter=vt.deprecate(function(t,e){e=e||{};var r=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),n=r.createChannel(t,e);return Mw(r,n),n},"use `.createClient()` instead of `.createEmitter()`");dt.prototype.createListener=vt.deprecate(function(t,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(t,e)},"use `.createServer().createChannel()` instead of `.createListener()`");dt.prototype.emit=vt.deprecate(function(t,e,r,n){if(!r||!this.equals(r.client._svc$))throw new Error("invalid emitter");var i=r.client;return un.prototype.emitMessage.call(i,t,e,n&&n.bind(this)),r.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");dt.prototype.equals=vt.deprecate(function(t){return dt.isService(t)&&this.getFingerprint().equals(t.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");dt.prototype.getFingerprint=vt.deprecate(function(t){return It.getHash(JSON.stringify(this.protocol),t)},"use `.hash` instead of `.getFingerprint()`");dt.prototype.getSchema=vt.deprecate(yr.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");dt.prototype.on=vt.deprecate(function(t,e){var r=this;return this._server.onMessage(t,function(n,i){return e.call(r,n,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");dt.prototype.subprotocol=vt.deprecate(function(){var t=this._server,e={strictTypes:t._strict,cache:t._cache},r=new Fn(t.service,e);return r._handlers=Object.create(t._handlers),new dt(this.name,this._messagesByName,this._typesByName,this.protocol,r)},"`.subprotocol()` will be removed in 5.1");dt.prototype._attrs=function(t){var e={protocol:this.name},r=[];this.types.forEach(function(i){if(i.getName()!==void 0){var s=i._attrs(t);typeof s!="string"&&r.push(s)}}),r.length&&(e.types=r);var n=Object.keys(this._messagesByName);return n.length&&(e.messages={},n.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(t)},this)),t&&t.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function Bw(t,e,r){r===void 0&&typeof e=="function"&&(r=e,e=void 0);var n=new dt({protocol:"Empty"},Xn),i;n.createClient({timeout:e&&e.timeout}).createChannel(t,{scope:e&&e.scope,endWritable:typeof t=="function"}).once("handshake",function(s,a){i=a.serverProtocol,this.destroy(!0)}).once("eot",function(s,a){a&&!/interrupted/.test(a)?r(a):r(null,JSON.parse(i))})}function un(t,e){e=e||{},rs.EventEmitter.call(this),this._svc$=t,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=It.getOption(e,"timeout",1e4),e.remoteProtocols&&Qy(this._cache$,e.remoteProtocols,t,!0),this._svc$.messages.forEach(function(r){this[r.name]=this._createMessageHandler$(r)},this)}vt.inherits(un,rs.EventEmitter);un.prototype.activeChannels=function(){return this._channels$.slice()};un.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(u){var d=new Ro,g=t(function(b,E){if(b){u(b);return}var w=new Ts().once("error",function(y){n.destroy(y)});u(null,E.pipe(w))});if(g)return d.pipe(g),d},n=new Sd(this,i,e)}else{var s,a;if(rm(t)?s=a=t:(s=t.readable,a=t.writable),!r){var o=new xa;s=s.pipe(o);var c=new No;c.pipe(a),a=c}n=new rf(this,s,a,e),r||(n.once("eot",function(){s.unpipe(o),c.unpipe(a)}),o.once("error",function(u){n.destroy(u)}))}var f=this._channels$;return f.push(n),n.once("_drain",function(){f.splice(f.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",n),n};un.prototype.destroyChannels=function(t){this._channels$.forEach(function(e){e.destroy(t&&t.noWait)})};un.prototype.emitMessage=function(t,e,r,n){var i=nm(this._svc$,t),s=new nf(i,{},e);this._emitMessage$(s,r,n)};un.prototype.remoteProtocols=function(){return Zy(this._cache$,!0)};Object.defineProperty(un.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});un.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns$.push(r.length<3?r(this):r);return this};un.prototype._emitMessage$=function(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0);var n=this,i=this._channels$,s=i.length;if(!s){if(this._buffering$)cr("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(t,e,r)});else{var a=new Error("no active channels");mr.exports.nextTick(function(){r?r.call(new kd(t._msg),a):n.emit("error",a)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var o;if(s===1)o=i[0];else if(this._policy$){if(o=this._policy$(this._channels$.slice()),!o){cr("policy returned no channel, skipping call");return}}else o=i[Math.floor(Math.random()*s)];o._emit(t,e,function(c,f){var u=this,d=u.message.errorType;if(c){n._strict$&&(c=d.clone(c.message,{wrapUnions:!0})),g(c);return}if(!f){g();return}c=f.error,n._strict$||(c===void 0?c=null:yr.isType(d,"union:unwrapped")?typeof c=="string"&&(c=new Error(c)):c&&c.string&&typeof c.string=="string"&&(c=new Error(c.string))),g(c,f.response);function g(b,E){r?r.call(u,b,E):b&&n.emit("error",b)}})};un.prototype._createMessageHandler$=function(t){var e=t.requestType.getFields(),r=e.map(function(i){return i.getName()}),n="return function "+t.name+"(";return r.length&&(n+=r.join(", ")+", "),n+=`opts, cb) {
`,n+="  var req = {",n+=r.map(function(i){return i+": "+i}).join(", "),n+=`};
`,n+="  return this.emitMessage('"+t.name+`', req, opts, cb);
`,n+="};",new Function(n)()};function Fn(t,e){e=e||{},rs.EventEmitter.call(this),this.service=t,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&Qy(this._cache,e.remoteProtocols,t,!1),t.messages.forEach(function(r){var n=r.name;e.noCapitalize||(n=It.capitalize(n)),this["on"+n]=this._createMessageHandler(r)},this)}vt.inherits(Fn,rs.EventEmitter);Fn.prototype.activeChannels=function(){return It.objectValues(this._channels)};Fn.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(d){var g=new Ts().once("error",function(b){n.destroy(b)});return t(function(b,E){if(b){d(b);return}var w=new Ro;w.pipe(E),d(null,w)}).pipe(g)},n=new Wy(this,i,e)}else{var s,a;if(rm(t)?s=a=t:(s=t.readable,a=t.writable),!r){var o=new xa;s=s.pipe(o);var c=new No;c.pipe(a),a=c}n=new Yy(this,s,a,e),r||(n.once("eot",function(){s.unpipe(o),c.unpipe(a)}),o.once("error",function(d){n.destroy(d)}))}this.listeners("error").length||this.on("error",this._onError);var f=this._nextChannelId++,u=this._channels;return u[f]=n.once("eot",function(){delete u[f]}),this.emit("channel",n),n};Fn.prototype.onMessage=function(t,e){return nm(this.service,t),this._handlers[t]=e,this};Fn.prototype.remoteProtocols=function(){return Zy(this._cache,!1)};Fn.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns.push(r.length<3?r(this):r);return this};Fn.prototype._createMessageHandler=function(t){var e=t.name,r=t.requestType.fields,n=r.length,i=r.length?", "+r.map(function(a){return"req."+a.name}).join(", "):"",s=`return function (handler) {
`;return s+="  if (handler.length > "+n+`) {
`,s+="    return this.onMessage('"+e+`', function (req, cb) {
`,s+="      return handler.call(this"+i+`, cb);
`,s+=`    });
`,s+=`  } else {
`,s+="    return this.onMessage('"+e+`', function (req) {
`,s+="      return handler.call(this"+i+`);
`,s+=`    });
`,s+=`  }
`,s+=`};
`,new Function(s)()};Fn.prototype._onError=function(t){!this._silent&&t.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),t.rpcCode?(console.error(t.rpcCode),console.error(t.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(t)))};function Pr(t,e){e=e||{},rs.EventEmitter.call(this),this.client=t,this.timeout=It.getOption(e,"timeout",t._timeout$),this._endWritable=!!It.getOption(e,"endWritable",!0),this._prefix=em(e.scope);var r=t._cache$,n=t._svc$,i=e.serverHash;i||(i=n.hash);var s=r[i];s||(i=n.hash,s=r[i]=new ns(n,n,i)),this._adapter=s,this._registry=new Io(this,Ed),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(a,o){cr("client channel EOT"),this.destroyed=!0,this.emit("eot",a,o)})}vt.inherits(Pr,rs.EventEmitter);Pr.prototype.destroy=function(t){cr("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,r=this.pending;t&&e.clear(),t||!r?Pd(t)?(cr("fatal client channel error: %s",t),this.emit("_eot",r,t)):this.emit("_eot",r):cr("client channel entering drain mode (%s pending)",r)};Pr.prototype.ping=function(t,e){!e&&typeof t=="function"&&(e=t,t=void 0);var r=this,n=new nf(Ad);this._emit(n,{timeout:t},function(i){e?e.call(r,i):i&&r.destroy(i)})};Pr.prototype._createHandshakeRequest=function(t,e){var r=this.client._svc$;return{clientHash:r.hash,clientProtocol:e?null:JSON.stringify(r.protocol),serverHash:t._hash}};Pr.prototype._emit=function(t,e,r){var n=t._msg,i=n.oneWay?void 0:new Td(n,{}),s=new kd(n,this),a=this;this.pending++,mr.exports.nextTick(function(){if(!n.name)o(t,i,c);else{a.emit("outgoingCall",s,e);var u=a.client._fns$;cr("starting client middleware chain (%s middleware)",u.length),im({fns:u,ctx:s,wreq:t,wres:i,onTransition:o,onCompletion:c,onError:f})}});function o(u,d,g){var b,E;if(a.destroyed)b=new Error("channel destroyed");else try{E=u.toBuffer()}catch{b=Sl(br("invalid %j request",n.name),u,[{name:"headers",type:ti},{name:"request",type:n.requestType}])}if(b){g(b);return}var w=e&&e.timeout!==void 0?e.timeout:a.timeout,y=a._registry.add(w,function(_,A,B){if(!_&&!n.oneWay)try{B._decodeResponse(A,d,n)}catch(N){_=N}g(_)});y|=a._prefix,cr("sending message %s",y),a._send(y,E,!!n&&n.oneWay)}function c(u){a.pending--,r.call(s,u,i),a.draining&&!a.destroyed&&!a.pending&&a.destroy()}function f(u){a.client.emit("error",u,a)}};Pr.prototype._getAdapter=function(t){var e=t.serverHash,r=this.client._cache$,n=r[e];if(n)return n;var i=JSON.parse(t.serverProtocol),s=dt.forProtocol(i);return n=new ns(this.client._svc$,s,e,!0),r[e]=n};Pr.prototype._matchesPrefix=function(t){return tm(t,this._prefix)};Pr.prototype._send=It.abstractFunction;It.addDeprecatedGetters(Pr,["pending","timeout"]);Pr.prototype.getCache=vt.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");Pr.prototype.getProtocol=vt.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");Pr.prototype.isDestroyed=vt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function Sd(t,e,r){Pr.call(this,t,r),this._writableFactory=e,(!r||!r.noPing)&&(cr("emitting ping request"),this.ping())}vt.inherits(Sd,Pr);Sd.prototype._send=function(t,e){var r=this._registry.get(t),n=this._adapter,i=this;return mr.exports.nextTick(s),!0;function s(a){if(!i.destroyed){var o=i._createHandshakeRequest(n,!a),c=i._writableFactory.call(i,function(f,u){if(f){r(f);return}u.on("data",function(d){cr("received response %s",d.id);var g=X.Buffer.concat(d.payload);try{var b=sf(Co,g),E=b.head;E.serverHash&&(n=i._getAdapter(E))}catch(y){r(y);return}var w=E.match;cr("handshake match: %s",w),i.emit("handshake",o,E),w==="NONE"?mr.exports.nextTick(function(){s(!0)}):(i._adapter=n,r(null,b.tail,n))})});if(!c){r(new Error("invalid writable stream"));return}c.write({id:t,payload:[Po.toBuffer(o),e]}),i._endWritable&&c.end()}}};function rf(t,e,r,n){Pr.call(this,t,n),this._readable=e,this._writable=r,this._connected=!!(n&&n.noPing),this._readable.on("end",u),this._writable.on("finish",d);var i=this,s=null;this.once("eot",function(){s&&(clearTimeout(s),s=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",d),this._endWritable&&(cr("ending transport"),this._writable.end()),this._readable.removeListener("data",c).removeListener("data",f).removeListener("end",u)});var a;this._connected?this._readable.on("data",f):(this._readable.on("data",c),mr.exports.nextTick(o),i.timeout&&(s=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function o(g){if(!i.destroyed){a=i._createHandshakeRequest(i._adapter,!g);var b=[Po.toBuffer(a),It.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:b})}}function c(g){if(!i._matchesPrefix(g.id)){cr("discarding unscoped response %s (still connecting)",g.id);return}var b=X.Buffer.concat(g.payload);try{var E=sf(Co,b).head;E.serverHash&&(i._adapter=i._getAdapter(E))}catch(y){i.destroy(y);return}var w=E.match;cr("handshake match: %s",w),i.emit("handshake",a,E),w==="NONE"?mr.exports.nextTick(function(){o(!0)}):(cr("successfully connected"),s&&(clearTimeout(s),s=null),i._readable.removeListener("data",c).on("data",f),i._connected=!0,i.emit("_ready"),a=null)}function f(g){var b=g.id;if(!i._matchesPrefix(b)){cr("discarding unscoped message %s",b);return}var E=i._registry.get(b);E&&mr.exports.nextTick(function(){cr("received message %s",b),E(null,X.Buffer.concat(g.payload),i._adapter)})}function u(){i.destroy(!0)}function d(){i.destroy()}}vt.inherits(rf,Pr);rf.prototype._emit=function(){if(this._connected||this.draining)Pr.prototype._emit.apply(this,arguments);else{cr("queuing request");var t=[],e,r;for(e=0,r=arguments.length;e<r;e++)t.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,t)})}};rf.prototype._send=function(t,e,r){if(r){var n=this;mr.exports.nextTick(function(){n._registry.get(t)(null,It.bufferFrom([0,0,0]),n._adapter)})}return this._writable.write({id:t,payload:[e]})};function zr(t,e){e=e||{},rs.EventEmitter.call(this),this.server=t,this._endWritable=!!It.getOption(e,"endWritable",!0),this._prefix=em(e.scope);var r=t._cache,n=t.service,i=n.hash;r[i]||(r[i]=new ns(n,n,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(s,a){cr("server channel EOT"),this.emit("eot",s,a)})}vt.inherits(zr,rs.EventEmitter);zr.prototype.destroy=function(t){this.draining||(this.draining=!0,this.emit("_drain")),(t||!this.pending)&&(this.destroyed=!0,Pd(t)?(cr("fatal server channel error: %s",t),this.emit("_eot",this.pending,t)):this.emit("_eot",this.pending))};zr.prototype._createHandshakeResponse=function(t,e){var r=this.server.service,n=r.hash,i=e&&e.serverHash.equals(n);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(r.protocol),serverHash:i?null:n}};zr.prototype._getAdapter=function(t){var e=t.clientHash,r=this.server._cache[e];if(r)return r;if(!t.clientProtocol)throw Vi("UNKNOWN_PROTOCOL");var n=JSON.parse(t.clientProtocol),i=dt.forProtocol(n);return r=new ns(i,this.server.service,e,!0),this.server._cache[e]=r};zr.prototype._matchesPrefix=function(t){return tm(t,this._prefix)};zr.prototype._receive=function(t,e,r){var n=this,i;try{i=e._decodeRequest(t)}catch(g){r(n._encodeSystemError(Vi("INVALID_REQUEST",g)));return}var s=i._msg,a=new Td(s,{});if(!s.name){a.response=null,r(a.toBuffer(),!1);return}var o=new kd(s,this);n.emit("incomingCall",o);var c=this.server._fns;cr("starting server middleware chain (%s middleware)",c.length),n.pending++,im({fns:c,ctx:o,wreq:i,wres:a,onTransition:f,onCompletion:u,onError:d});function f(g,b,E){var w=n.server._handlers[s.name];if(w){var A=!s.oneWay;try{A?w.call(o,g.request,function(B,N){A=!1,b.error=B,b.response=N,E()}):(w.call(o,g.request),E())}catch(B){A?(A=!1,E(B)):d(B)}}else{var y=n.server._defaultHandler;if(y)y.call(o,g,b,E);else{var _=new Error(br("no handler for %s",s.name));E(Vi("NOT_IMPLEMENTED",_))}}}function u(g){n.pending--;var b=n.server,E;if(!g){var w=a.error,y=b._strict;y||(Pd(w)?a.error=s.errorType.clone(w.message,{wrapUnions:!0}):w===null&&(w=a.error=void 0),w===void 0&&a.response===void 0&&s.responseType.isValid(null)&&(a.response=null));try{E=a.toBuffer()}catch{a.error!==void 0?g=Sl(br("invalid %j error",s.name),a,[{name:"headers",type:ti},{name:"error",type:s.errorType}]):g=Sl(br("invalid %j response",s.name),a,[{name:"headers",type:ti},{name:"response",type:s.responseType}])}}E?w!==void 0&&b.emit("error",Vi("APPLICATION_ERROR",w)):E=n._encodeSystemError(g,a.headers),r(E,s.oneWay),n.draining&&!n.pending&&n.destroy()}function d(g){n.server.emit("error",g,n)}};It.addDeprecatedGetters(zr,["pending"]);zr.prototype.getCache=vt.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");zr.prototype.getProtocol=vt.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");zr.prototype.isDestroyed=vt.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");zr.prototype._encodeSystemError=function(t,e){var r=this.server;r.emit("error",t,this);var n;r._sysErrFormatter?n=r._sysErrFormatter.call(this,t):t.rpcCode&&(n=t.message);var i;if(e)try{i=ti.toBuffer(e)}catch(s){r.emit("error",s,this)}return X.Buffer.concat([i||It.bufferFrom([0]),It.bufferFrom([1,0]),_d.toBuffer(n||"internal server error")])};function Wy(t,e,r){zr.call(this,t,r),this._writable=void 0;var n=this,i;mr.exports.nextTick(function(){i=e.call(n,function(c,f){mr.exports.nextTick(function(){if(c){o(c);return}n._writable=f.on("finish",o),n.emit("_writable")})}).on("data",s).on("end",a)});function s(c){var f=c.id,u=X.Buffer.concat(c.payload),d;try{var g=sf(Po,u),b=g.head,E=n._getAdapter(b)}catch(_){d=Vi("INVALID_HANDSHAKE_REQUEST",_)}var w=n._createHandshakeResponse(d,b);n.emit("handshake",b,w),d?y(n._encodeSystemError(d)):n._receive(g.tail,E,y);function y(_){if(!n.destroyed){if(!n._writable){n.once("_writable",function(){y(_)});return}n._writable.write({id:f,payload:[Co.toBuffer(w),_]})}n._writable&&n._endWritable&&n._writable.end()}}function a(){n.destroy()}function o(c){i.removeListener("data",s).removeListener("end",a),n.destroy(c||!0)}}vt.inherits(Wy,zr);function Yy(t,e,r,n){zr.call(this,t,n),this._adapter=void 0,this._writable=r.on("finish",c),this._readable=e.on("data",s).on("end",o),this.once("_drain",function(){this._readable.removeListener("data",s).removeListener("data",a).removeListener("end",o)}).once("eot",function(){this._writable.removeListener("finish",c),this._endWritable&&this._writable.end()});var i=this;function s(f){var u=f.id;if(!i._matchesPrefix(u))return;var d=X.Buffer.concat(f.payload),g;try{var b=sf(Po,d),E=b.head;i._adapter=i._getAdapter(E)}catch(_){g=Vi("INVALID_HANDSHAKE_REQUEST",_)}var w=i._createHandshakeResponse(g,E);i.emit("handshake",E,w),g?y(i._encodeSystemError(g)):(i._readable.removeListener("data",s).on("data",a),i._receive(b.tail,i._adapter,y));function y(_){i.destroyed||i._writable.write({id:u,payload:[Co.toBuffer(w),_]})}}function a(f){var u=f.id;if(!!i._matchesPrefix(u)){var d=X.Buffer.concat(f.payload);i._receive(d,i._adapter,function(g,b){i.destroyed||b||i._writable.write({id:u,payload:[g]})})}}function o(){i.destroy()}function c(){i.destroy(!0)}}vt.inherits(Yy,zr);function nf(t,e,r){this._msg=t,this.headers=e||{},this.request=r||{}}nf.prototype.toBuffer=function(){var t=this._msg;return X.Buffer.concat([ti.toBuffer(this.headers),_d.toBuffer(t.name),t.requestType.toBuffer(this.request)])};function Td(t,e,r,n){this._msg=t,this.headers=e,this.error=r,this.response=n}Td.prototype.toBuffer=function(){var t=ti.toBuffer(this.headers),e=this.error!==void 0;return X.Buffer.concat([t,Jy.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function kd(t,e){this.channel=e,this.locals={},this.message=t,Object.freeze(this)}function Io(t,e){this._ctx=t,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}Io.prototype.get=function(t){return this._cbs[t&this._mask]};Io.prototype.add=function(t,e){this._id=this._id+1&this._mask;var r=this,n=this._id,i;return t>0&&(i=setTimeout(function(){s(new Error("timeout"))},t)),this._cbs[n]=s,this._n++,n;function s(){!r._cbs[n]||(delete r._cbs[n],r._n--,i&&clearTimeout(i),e.apply(r._ctx,arguments))}};Io.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)};function ns(t,e,r,n){this._clientSvc=t,this._serverSvc=e,this._hash=r,this._isRemote=!!n,this._readers=Xy(t,e)}ns.prototype._decodeRequest=function(t){var e=new wd(t),r=ti._read(e),n=_d._read(e),i,s;if(n?(i=this._serverSvc.message(n),s=this._readers[n+"?"]._read(e)):i=Ad,!e.isValid())throw new Error(br("truncated %s request",n||"ping$"));return new nf(i,r,s)};ns.prototype._decodeResponse=function(t,e,r){var n=new wd(t);It.copyOwnProperties(ti._read(n),e.headers,!0);var i=Jy._read(n),s=r.name;if(s){var a=this._readers[s+(i?"*":"!")];if(r=this._clientSvc.message(s),i?e.error=a._read(n):e.response=a._read(n),!n.isValid())throw new Error(br("truncated %s response",s))}else r=Ad};function Ts(){ei.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=It.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}vt.inherits(Ts,ei.Transform);Ts.prototype._transform=function(t,e,r){t=X.Buffer.concat([this._buf,t]);for(var n;t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;){if(n)this._bufs.push(t.slice(4,n+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}t=t.slice(n+4)}this._buf=t,r()};Ts.prototype._flush=function(){if(this._buf.length||this._bufs.length){var t=this._bufs.slice();t.unshift(this._buf);var e=Vi("TRAILING_DATA");e.trailingData=X.Buffer.concat(t).toString(),this.emit("error",e)}};function Ro(){ei.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}vt.inherits(Ro,ei.Transform);Ro.prototype._transform=function(t,e,r){var n=t.payload,i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i],this.push(Al(a.length)),this.push(a);this.push(Al(0)),r()};function xa(){ei.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=It.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}vt.inherits(xa,ei.Transform);xa.prototype._transform=function(t,e,r){for(t=X.Buffer.concat([this._buf,t]);;){if(this._id===void 0){if(t.length<8){this._buf=t,r();return}this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var n;this._frameCount&&t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,n+4)),t=t.slice(n+4);if(this._frameCount){this._buf=t,r();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};xa.prototype._flush=Ts.prototype._flush;function No(){ei.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}vt.inherits(No,ei.Transform);No.prototype._transform=function(t,e,r){var n=t.payload,i=n.length,s;s=It.newBuffer(8),s.writeInt32BE(t.id,0),s.writeInt32BE(i,4),this.push(s);var a;for(a=0;a<i;a++)s=n[a],this.push(Al(s.length)),this.push(s);r()};function Al(t){var e=It.newBuffer(4);return e.writeInt32BE(t),e}function sf(t,e){var r=new wd(e),n=t._read(r);if(!r.isValid())throw new Error(br("truncated %s",t));return{head:n,tail:r.buf.slice(r.pos)}}function fu(t,e){return t.equals(e)?t:t.createResolver(e)}function Xy(t,e){var r={};return t.messages.forEach(function(n){var i=n.name,s=e.message(i);try{if(!s)throw new Error(br("missing server message: %s",i));if(s.oneWay!==n.oneWay)throw new Error(br("inconsistent one-way message: %s",i));r[i+"?"]=fu(s.requestType,n.requestType),r[i+"*"]=fu(n.errorType,s.errorType),r[i+"!"]=fu(n.responseType,s.responseType)}catch(a){throw Vi("INCOMPATIBLE_PROTOCOL",a)}}),r}function Qy(t,e,r,n){Object.keys(e).forEach(function(i){var s=e[i],a,o;n?(a=r,o=dt.forProtocol(s)):(a=dt.forProtocol(s),o=r),t[i]=new ns(a,o,i,!0)})}function Zy(t,e){var r={};return Object.keys(t).forEach(function(n){var i=t[n];if(i._isRemote){var s=e?i._serverSvc:i._clientSvc;r[n]=s.protocol}}),r}function Pd(t){return!!t&&Object.prototype.toString.call(t)==="[object Error]"}function Mw(t,e){return t.on("error",function(r){e.emit("error",r,t)})}function pc(t,e){var r=new Error(t);return r.cause=e,r}function Vi(t,e){var r=pc(t.toLowerCase().replace(/_/g," "),e);return r.rpcCode=e&&e.rpcCode?e.rpcCode:t,r}function Sl(t,e,r){var n=[],i,s,a;for(i=0,s=r.length;i<s;i++)a=r[i],a.type.isValid(e[a.name],{errorHook:f});var o=n.map(function(u){return br("%s = %j but expected %s",u.path,u.value,u.type)}).join(", "),c=new Error(br("%s (%s)",t,o));return c.details=n,c;function f(u,d,g){var b=[],E,w,y;for(E=0,w=u.length;E<w;E++)y=u[E],isNaN(y)?b.push("."+y):b.push("["+y+"]");n.push({path:a.name+b.join(""),value:d,type:g})}}function em(t){return t?It.getHash(t).readInt16BE(0)<<32-Ed:0}function tm(t,e){return(t^e)>>32-Ed===0}function rm(t){return!!(t&&t.pipe)}function nm(t,e){var r=t.message(e);if(!r)throw new Error(br("unknown message: %s",e));return r}function im(t){var e=[t.wreq,t.wres],r=[],n;i(0);function i(a){var o=!1;a<t.fns.length?t.fns[a].apply(t.ctx,e.concat(function(c,f){if(o){t.onError(pc("duplicate forward middleware call",c));return}if(o=!0,c||t.wres&&(t.wres.error!==void 0||t.wres.response!==void 0)){n=c,s();return}f&&r.push(f),i(++a)})):t.onTransition.apply(t.ctx,e.concat(function(c){if(o){t.onError(pc("duplicate handler call",c));return}o=!0,n=c,mr.exports.nextTick(s)}))}function s(){var a=r.pop();if(a){var o=!1;a.call(t.ctx,n,function(c){if(o){t.onError(pc("duplicate backward middleware call",c));return}n=c,o=!0,s()})}else t.onCompletion.call(t.ctx,n)}}var Ow={Adapter:ns,HANDSHAKE_REQUEST_TYPE:Po,HANDSHAKE_RESPONSE_TYPE:Co,Message:Si,Registry:Io,Service:dt,discoverProtocol:Bw,streams:{FrameDecoder:Ts,FrameEncoder:Ro,NettyDecoder:xa,NettyEncoder:No}};function Cd(){return new Error("unsupported in the browser")}function Dw(){return function(t,e,r){r(Cd())}}function Uw(){return function(){throw Cd()}}var Lw={createImportHook:Dw,createSyncImportHook:Uw,existsSync:function(){return!1},readFileSync:function(){throw Cd()}};function qn(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function k0(t,e){for(var r="",n=0,i=-1,s=0,a,o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=o,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=o,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,o):r=t.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s!==-1?++s:s=-1}return r}function Fw(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var sa={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=mr.exports.cwd()),s=n),qn(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=k0(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(qn(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=k0(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return qn(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];qn(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":sa.normalize(e)},relative:function(e,r){if(qn(e),qn(r),e===r||(e=sa.resolve(e),r=sa.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var o=r.length,c=o-a,f=s<c?s:c,u=-1,d=0;d<=f;++d){if(d===f){if(c>f){if(r.charCodeAt(a+d)===47)return r.slice(a+d+1);if(d===0)return r.slice(a+d)}else s>f&&(e.charCodeAt(n+d)===47?u=d:d===0&&(u=0));break}var g=e.charCodeAt(n+d),b=r.charCodeAt(a+d);if(g!==b)break;g===47&&(u=d)}var E="";for(d=n+u+1;d<=i;++d)(d===i||e.charCodeAt(d)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+r.slice(a+u):(a+=u,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(qn(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(r=e.charCodeAt(a),r===47){if(!s){i=a;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');qn(e);var n=0,i=-1,s=!0,a;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,c=-1;for(a=e.length-1;a>=0;--a){var f=e.charCodeAt(a);if(f===47){if(!s){n=a+1;break}}else c===-1&&(s=!1,c=a+1),o>=0&&(f===r.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=c))}return n===i?i=c:i===-1&&(i=e.length),e.slice(n,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){n=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(n,i)}},extname:function(e){qn(e);for(var r=-1,n=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!s){n=o+1;break}continue}i===-1&&(s=!1,i=o+1),c===46?r===-1?r=o:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Fw("/",e)},parse:function(e){qn(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,s;i?(r.root="/",s=1):s=0;for(var a=-1,o=0,c=-1,f=!0,u=e.length-1,d=0;u>=s;--u){if(n=e.charCodeAt(u),n===47){if(!f){o=u+1;break}continue}c===-1&&(f=!1,c=u+1),n===46?a===-1?a=u:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||c===-1||d===0||d===1&&a===c-1&&a===o+1?c!==-1&&(o===0&&i?r.base=r.name=e.slice(1,c):r.base=r.name=e.slice(o,c)):(o===0&&i?(r.name=e.slice(1,a),r.base=e.slice(1,c)):(r.name=e.slice(o,a),r.base=e.slice(o,c)),r.ext=e.slice(a,c)),o>0?r.dir=e.slice(0,o-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};sa.posix=sa;var jw=sa,gc=Lw,sm=ma,Tl=jw,Kw=ga,fa=Kw.format,$w={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function Id(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0),e=e||{},e.importHook||(e.importHook=gc.createImportHook());var n=[],i,s;e.importHook(t,"idl",function(c,f){if(c){r(c);return}if(f===void 0){r(null,{});return}try{var u=new nr(f,e),d=u._readProtocol(f,e)}catch(g){g.path=t,r(g);return}i=d.protocol,s=d.imports,a()});function a(){var c=s.shift();if(!c)n.length&&(i.types=i.types?n.concat(i.types):n),r(null,i);else{var f=Tl.join(Tl.dirname(t),c.name);c.kind==="idl"?Id(f,e,o):e.importHook(f,c.kind,function(u,d){if(u){r(u);return}switch(c.kind){case"protocol":case"schema":if(d===void 0){o(null,{});return}try{var g=JSON.parse(d)}catch(E){E.path=f,r(E);return}var b=c.kind==="schema"?{types:[g]}:g;o(null,b);break;default:r(new Error(fa("invalid import kind: %s",c.kind)))}})}}function o(c,f){if(c){r(c);return}(f.types||[]).forEach(function(u){if(u.namespace===void 0){var d=f.namespace;if(!d){var g=/^(.*)\.[^.]+$/.exec(f.protocol);g&&(d=g[1])}u.namespace=d||""}n.push(u)});try{Object.keys(f.messages||{}).forEach(function(u){if(i.messages||(i.messages={}),i.messages[u])throw new Error(fa("duplicate message: %s",u));i.messages[u]=f.messages[u]})}catch(u){r(u);return}a()}}function qw(t){var e;if(typeof t=="string"&&~t.indexOf(Tl.sep)&&gc.existsSync(t)){var r=gc.readFileSync(t,{encoding:"utf8"});try{return JSON.parse(r)}catch{var n={importHook:gc.createSyncImportHook()};Id(t,n,function(s,a){e=s?r:a})}}else e=t;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return nr.readProtocol(e)}catch{try{return nr.readSchema(e)}catch{return e}}}}function nr(t,e){e=e||{},this._tk=new is(t),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||$w}nr.readProtocol=function(t,e){var r=new nr(t,e),n=r._readProtocol();if(n.imports.length)throw new Error("unresolvable import");return n.protocol};nr.readSchema=function(t,e){var r=new nr(t,e),n=r._readJavadoc(),i=r._readType(n===void 0?{}:{doc:n});return r._tk.next({id:"(eof)"}),i};nr.prototype._readProtocol=function(){var t=this._tk,e=[],r=[],n={},i;this._readImports(e);var s={},a=this._readJavadoc();for(a!==void 0&&(s.doc=a),this._readAnnotations(s),t.next({val:"protocol"}),t.next({val:"{",silent:!0})||(s.protocol=t.next({id:"name"}).val,t.next({val:"{"}));!t.next({val:"}",silent:!0});)if(!this._readImports(e)){var o=this._readJavadoc(),c=this._readType(),f=this._readImports(e,!0),u=void 0;if(i=t.pos,!f&&(u=this._readMessage(c))){o!==void 0&&u.schema.doc===void 0&&(u.schema.doc=o);var d=!1;if((u.schema.response==="void"||u.schema.response.type==="void")&&(d=!this._ackVoidMessages&&!u.schema.errors,u.schema.response==="void"?u.schema.response="null":u.schema.response.type="null"),d&&(u.schema["one-way"]=!0),n[u.name])throw new Error(fa("duplicate message: %s",u.name));n[u.name]=u.schema}else o&&(typeof c=="string"?c={doc:o,type:c}:c.doc===void 0&&(c.doc=o)),r.push(c),t.pos=i,t.next({val:";",silent:!0});o=void 0}return t.next({id:"(eof)"}),r.length&&(s.types=r),Object.keys(n).length&&(s.messages=n),{protocol:s,imports:e}};nr.prototype._readAnnotations=function(t){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var r=[];!e.next({val:"(",silent:!0});)r.push(e.next().val);t[r.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};nr.prototype._readMessage=function(t){var e=this._tk,r={request:[],response:t};this._readAnnotations(r);var n=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do r.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":r.errors=[];do r.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":r["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:n,schema:r}}};nr.prototype._readJavadoc=function(){var t=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(t)return t.val};nr.prototype._readField=function(){var t=this._tk,e=this._readJavadoc(),r={type:this._readType()};return e!==void 0&&r.doc===void 0&&(r.doc=e),this._readAnnotations(r),r.name=t.next({id:"name"}).val,t.next({val:"=",silent:!0})&&(r.default=t.next({id:"json"}).val),r};nr.prototype._readType=function(t){switch(t=t||{},this._readAnnotations(t),t.type=this._tk.next({id:"name"}).val,t.type){case"record":case"error":return this._readRecord(t);case"fixed":return this._readFixed(t);case"enum":return this._readEnum(t);case"map":return this._readMap(t);case"array":return this._readArray(t);case"union":if(Object.keys(t).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var e=this._typeRefs[t.type];return e&&(delete t.type,sm.copyOwnProperties(e,t)),Object.keys(t).length>1?t:t.type}};nr.prototype._readFixed=function(t){var e=this._tk;return e.next({val:"(",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"("})),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),t};nr.prototype._readMap=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.values=this._readType(),e.next({val:">",silent:n}),t};nr.prototype._readArray=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.items=this._readType(),e.next({val:">",silent:n}),t};nr.prototype._readEnum=function(t){var e=this._tk;e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.symbols=[];do t.symbols.push(e.next().val);while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return t};nr.prototype._readUnion=function(){var t=this._tk,e=[];t.next({val:"{"});do e.push(this._readType());while(!t.next({val:"}",silent:!0})&&t.next({val:","}));return e};nr.prototype._readRecord=function(t){var e=this._tk;for(e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.fields=[];!e.next({val:"}",silent:!0});)t.fields.push(this._readField()),e.next({val:";"});return t};nr.prototype._readImports=function(t,e){for(var r=this._tk,n=0,i=r.pos;r.next({val:"import",silent:!0});){if(!n&&e&&r.next({val:"(",silent:!0})){r.pos=i;return}var s=r.next({id:"name"}).val,a=JSON.parse(r.next({id:"string"}).val);r.next({val:";"}),t.push({kind:s,name:a}),n++}return n};function is(t){this._str=t,this.pos=0}is.prototype.next=function(t){var e={pos:this.pos,id:void 0,val:void 0},r=this._skip(t&&t.emitJavadoc);if(r)e.id="javadoc",e.val=r;else{var n=this.pos,i=this._str,s=i.charAt(n);if(!s)e.id="(eof)";else if(t&&t.id==="json"?(e.id="json",this.pos=this._endOfJson()):s==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(s)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(s)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=n+1),e.val=i.slice(n,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var a;if(t&&t.id&&t.id!==e.id?a=this.error(fa("expected ID %s",t.id),e):t&&t.val&&t.val!==e.val&&(a=this.error(fa("expected value %s",t.val),e)),a)if(t&&t.silent){this.pos=e.pos;return}else throw a;else return e};is.prototype.error=function(t,e){var r=typeof e!="number",n=r?e.pos:e,i=this._str,s=1,a=0,o;for(o=0;o<n;o++)i.charAt(o)===`
`&&(s++,a=o);var c=r?fa("invalid token %j: %s",e,t):t,f=new Error(c);return f.token=r?e:void 0,f.lineNum=s,f.colNum=n-a,f};is.prototype._skip=function(t){for(var e=this._str,r=!1,n,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(n=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(t);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(r=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,r&&t?Hw(e.slice(n+3,this.pos-2)):this._skip(t);throw this.error("unterminated comment",n)}};is.prototype._endOf=function(t){for(var e=this.pos,r=this._str;t.test(r.charAt(e));)e++;return e};is.prototype._endOfString=function(){for(var t=this.pos+1,e=this._str,r;r=e.charAt(t);){if(r==='"')return t+1;r==="\\"?t+=2:t++}throw this.error("unterminated string",t-1)};is.prototype._endOfJson=function(){var t=sm.jsonEnd(this._str,this.pos);if(t<0)throw this.error("invalid JSON",t);return t};function Hw(t){for(var e=t.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(r,n){return n?r.replace(/^\s*\*\s?/,""):r});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();return e.join(`
`)}var zw={Tokenizer:is,assembleProtocol:Id,read:qw,readProtocol:nr.readProtocol,readSchema:nr.readSchema};(function(t){var e=Nw,r=Ow,n=zw,i=ma;function s(a,o){var c=n.read(a);return c.protocol?r.Service.forProtocol(c,o):e.Type.forSchema(c,o)}t.exports={Service:r.Service,assembleProtocol:n.assembleProtocol,discoverProtocol:r.discoverProtocol,parse:s,readProtocol:n.readProtocol,readSchema:n.readSchema},i.copyOwnProperties(e,t.exports)})(Fy);var ri=xd,kr=ma,ss=Gc,Bo=ga,am=p1,af={namespace:"org.apache.avro.file"},P0=ri.Type.forSchema("long",af),om=ri.Type.forSchema({type:"map",values:"bytes"},af),Rd=ri.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:om},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},af),cm=ri.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},af),Xa=kr.bufferFrom("Obj"),of=Bo.format,fo=kr.Tap;function cf(t,e){e=e||{};var r=!!e.noDecode;ss.Duplex.call(this,{readableObjectMode:!r,allowHalfOpen:!1}),this._type=ri.Type.forSchema(t),this._tap=new fo(kr.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=um(r,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}Bo.inherits(cf,ss.Duplex);cf.prototype._write=function(t,e,r){this._writeCb=r;var n=this._tap;n.buf=X.Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0,this._needPush&&(this._needPush=!1,this._read())};cf.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,r=this._readValue(t);t.isValid()?this.push(r):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function Mn(t){t=t||{};var e=!!t.noDecode;ss.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=t.readerSchema!==void 0?ri.Type.forSchema(t.readerSchema):void 0,this._wType=null,this._codecs=t.codecs,this._codec=void 0,this._parseHook=t.parseHook,this._tap=new fo(kr.newBuffer(0)),this._blockTap=new fo(kr.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new kr.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}Bo.inherits(Mn,ss.Duplex);Mn.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:am.inflateRaw}};Mn.getDefaultCodecs=Mn.defaultCodecs;Mn.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<Xa.length)return!1;if(!Xa.equals(t.buf.slice(0,Xa.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=Rd._read(t);if(!t.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var r=this._codecs||Mn.getDefaultCodecs();if(this._decompress=r[this._codec],!this._decompress){this.emit("error",new Error(of("unknown codec: %s",this._codec)));return}try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._wType=ri.Type.forSchema(n)}catch(i){this.emit("error",i);return}return this._readValue=um(this._noDecode,this._wType,this._rType),this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};Mn.prototype._write=function(t,e,r){var n=this._tap;if(n.buf=X.Buffer.concat([n.buf,t]),n.pos=0,!this._decodeHeader()){mr.exports.nextTick(r);return}this._write=this._writeChunk,this._write(kr.newBuffer(0),e,r)};Mn.prototype._writeChunk=function(t,e,r){var n=this._tap;n.buf=X.Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0;for(var i=1,s;s=Gw(n);){if(!this._syncMarker.equals(s.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(s.data,this._createBlockCallback(s.count,a))}a();function a(){--i||r()}};Mn.prototype._createBlockCallback=function(t,e){var r=this,n=this._index++;return function(i,s){if(i){var a=new Error(of("%s codec decompression error",r._codec));a.cause=i,r.emit("error",a),e()}else r._queue.push(new fm(n,s,e,t)),r._needPush&&r._read()}};Mn.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,t.buf=e.buf,t.pos=0}this._remaining--,this.push(this._readValue(t))};function ff(t,e){e=e||{},ss.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=ri.Type.forSchema(t),this._writeValue=function(r,n){try{this._type._write(r,n)}catch(i){this.emit("error",i)}},this._tap=new fo(kr.newBuffer(e.batchSize||65536))}Bo.inherits(ff,ss.Transform);ff.prototype._transform=function(t,e,r){var n=this._tap,i=n.buf,s=n.pos;if(this._writeValue(n,t),!n.isValid()){s&&this.push(Vw(n.buf,0,s));var a=n.pos-s;a>i.length&&(n.buf=kr.newBuffer(2*a)),n.pos=0,this._writeValue(n,t)}r()};ff.prototype._flush=function(t){var e=this._tap,r=e.pos;r&&this.push(e.buf.slice(0,r)),t()};function On(t,e){e=e||{},ss.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var r;if(ri.Type.isType(t)?(r=t,t=void 0):r=ri.Type.forSchema(t),this._schema=t,this._type=r,this._writeValue=function(i,s){try{this._type._write(i,s)}catch(a){this.emit("error",a)}},this._blockSize=e.blockSize||65536,this._tap=new fo(kr.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new kr.Lcg().nextBuffer(16),this._queue=new kr.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!om.isValid(this._metadata))throw new Error("invalid metadata");var n=this._codec;if(this._compress=(this._codecs||On.getDefaultCodecs())[n],!this._compress)throw new Error(of("unsupported codec: %s",n));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}Bo.inherits(On,ss.Duplex);On.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:am.deflateRaw}};On.getDefaultCodecs=On.defaultCodecs;On.prototype._writeHeader=function(){var t=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=kr.copyOwnProperties(this._metadata,{"avro.schema":kr.bufferFrom(t),"avro.codec":kr.bufferFrom(this._codec)},!0),r=Rd.getRecordConstructor(),n=new r(Xa,e,this._syncMarker);this.push(n.toBuffer())};On.prototype._write=function(t,e,r){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var n=this._tap,i=n.pos,s=!1;if(this._writeValue(n,t),!n.isValid()){i&&(this._flushChunk(i,r),s=!0);var a=n.pos-i;a>this._blockSize&&(this._blockSize=a*2),n.buf=kr.newBuffer(this._blockSize),n.pos=0,this._writeValue(n,t)}this._blockCount++,s||r()};On.prototype._flushChunk=function(t,e){var r=this._tap;t=t||r.pos,this._compress(r.buf.slice(0,t),this._createBlockCallback(e)),this._blockCount=0};On.prototype._read=function(){var t=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?mr.exports.nextTick(function(){t.push(null)}):this._needPush=!0;return}this.push(P0.toBuffer(e.count,!0)),this.push(P0.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};On.prototype._createBlockCallback=function(t){var e=this,r=this._index++,n=this._blockCount;return this._pending++,function(i,s){if(i){var a=new Error(of("%s codec compression error",e._codec));a.cause=i,e.emit("error",a);return}e._pending--,e._queue.push(new fm(r,s,t,n)),e._needPush&&(e._needPush=!1,e._read())}};function fm(t,e,r,n){this.index=t,this.buf=e,this.cb=r,this.count=n|0}function Gw(t){var e=t.pos,r=cm._read(t);return t.isValid()?r:(t.pos=e,null)}function um(t,e,r){if(t)return function(i){return function(s){var a=s.pos;return i(s),s.buf.slice(a,s.pos)}}(e._skip);if(r){var n=r.createResolver(e);return function(i){return n._read(i)}}else return function(i){return e._read(i)}}function Vw(t,e,r){var n=kr.newBuffer(r);return t.copy(n,0,e,e+r),n}var Jw={BLOCK_TYPE:cm,HEADER_TYPE:Rd,MAGIC_BYTES:Xa,streams:{BlockDecoder:Mn,BlockEncoder:On,RawDecoder:cf,RawEncoder:ff}};(function(t){var e=Fy.exports,r=Jw,n=ma,i=Gc,s=ga;function a(u,d){i.Readable.call(this),d=d||{},this._batchSize=d.batchSize||65536,this._blob=u,this._pos=0}s.inherits(a,i.Readable),a.prototype._read=function(){var u=this._pos;if(u>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var d=this._blob.slice(u,this._pos,this._blob.type),g=new FileReader,b=this;g.addEventListener("loadend",function E(w){g.removeEventListener("loadend",E,!1),w.error?b.emit("error",w.error):b.push(n.bufferFrom(g.result))},!1),g.readAsArrayBuffer(d)};function o(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}s.inherits(o,i.Transform),o.prototype._transform=function(u,d,g){this._bufs.push(u),g()},o.prototype._flush=function(u){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),u()};function c(u,d){return new a(u).pipe(new r.streams.BlockDecoder(d))}function f(u,d){var g=new r.streams.BlockEncoder(u,d),b=new o;return g.pipe(b),new i.Duplex({objectMode:!0,read:function(){var E=b.read();E?y(E):b.once("readable",y);var w=this;function y(_){w.push(_||b.read()),w.push(null)}},write:function(E,w,y){return g.write(E,w,y)}}).on("finish",function(){g.end()})}t.exports={createBlobDecoder:c,createBlobEncoder:f,streams:r.streams},n.copyOwnProperties(e,t.exports)})(Ly);(function(t){var e=q&&q.__createBinding||(Object.create?function(a,o,c,f){f===void 0&&(f=c),Object.defineProperty(a,f,{enumerable:!0,get:function(){return o[c]}})}:function(a,o,c,f){f===void 0&&(f=c),a[f]=o[c]}),r=q&&q.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=q&&q.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var c in a)c!=="default"&&Object.prototype.hasOwnProperty.call(a,c)&&e(o,a,c);return r(o,a),o};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTags=t.tagsParser=t.tagParser=void 0;const i=n(Ly.exports);t.tagParser=i.Type.forSchema({type:"record",name:"Tag",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]}),t.tagsParser=i.Type.forSchema({type:"array",items:t.tagParser});function s(a){if(a.length==0)return new Uint8Array(0);let o;try{o=t.tagsParser.toBuffer(a)}catch{throw new Error("Incorrect tag format used. Make sure your tags are { name: string!, value: string! }[]")}return Uint8Array.from(o)}t.serializeTags=s})(pd);var va={},uf={};Object.defineProperty(uf,"__esModule",{value:!0});uf.Signer=void 0;class Ww{static verify(e){throw new Error("You must implement verify method on child")}}uf.Signer=Ww;var lf={},Mo={};const lm=Vl(g1);var ks={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIG_CONFIG=t.SignatureConfig=void 0;var e;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA"})(e=t.SignatureConfig||(t.SignatureConfig={})),t.SIG_CONFIG={[e.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[e.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[e.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[e.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"}}})(ks);var Yw=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xw=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qw=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Yw(e,t,r);return Xw(e,t),e},Zw=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mo,"__esModule",{value:!0});const e_=Zw(Un.exports),C0=Qw(lm),I0=ks;class t_{constructor(e,r){this._key=e,this.pk=r,this.ownerLength=I0.SIG_CONFIG[2].pubLength,this.signatureLength=I0.SIG_CONFIG[2].sigLength,this.signatureType=2}get publicKey(){return this._publicKey}get key(){return new Uint8Array(0)}sign(e){return C0.sign(X.Buffer.from(e),X.Buffer.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=e_.default.toBuffer(e)),C0.verify(X.Buffer.from(n),X.Buffer.from(r),X.Buffer.from(i))}}Mo.default=t_;var wa={},Nd={};const ft={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function mn(t,e){if(!t)throw new Error(e)}function it(t,e,r){if(mn(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;mn(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;mn(e.length===r,n)}}function us(t){mn(Xs(t)==="Boolean","Expected compressed to be a Boolean")}function kn(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),it("output",t,e),t}function Xs(t){return Object.prototype.toString.call(t).slice(8,-1)}var r_=t=>({contextRandomize(e){switch(mn(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&it("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(ft.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return it("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(it("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(ft.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(it("private key",e,32),it("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(ft.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(it("private key",e,32),it("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(ft.TWEAK_MUL)}},publicKeyVerify(e){return it("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(it("private key",e,32),us(r),n=kn(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(ft.SECKEY_INVALID);case 2:throw new Error(ft.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(it("public key",e,[33,65]),us(r),n=kn(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(ft.PUBKEY_PARSE);case 2:throw new Error(ft.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(it("public key",e,[33,65]),us(r),n=kn(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(ft.PUBKEY_PARSE);case 2:throw new Error(ft.IMPOSSIBLE_CASE);case 3:throw new Error(ft.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){mn(Array.isArray(e),"Expected public keys to be an Array"),mn(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)it("public key",i,[33,65]);switch(us(r),n=kn(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(ft.PUBKEY_PARSE);case 2:throw new Error(ft.PUBKEY_COMBINE);case 3:throw new Error(ft.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(it("public key",e,[33,65]),it("tweak",r,32),us(n),i=kn(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(ft.PUBKEY_PARSE);case 2:throw new Error(ft.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(it("public key",e,[33,65]),it("tweak",r,32),us(n),i=kn(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(ft.PUBKEY_PARSE);case 2:throw new Error(ft.TWEAK_MUL)}},signatureNormalize(e){switch(it("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(ft.SIG_PARSE)}},signatureExport(e,r){it("signature",e,64),r=kn(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(ft.SIG_PARSE);case 2:throw new Error(ft.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(it("signature",e),r=kn(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(ft.SIG_PARSE);case 2:throw new Error(ft.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){it("message",e,32),it("private key",r,32),mn(Xs(n)==="Object","Expected options to be an Object"),n.data!==void 0&&it("options.data",n.data),n.noncefn!==void 0&&mn(Xs(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=kn(i,64);const s={signature:i,recid:null};switch(t.ecdsaSign(s,e,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(ft.SIGN);case 2:throw new Error(ft.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(it("signature",e,64),it("message",r,32),it("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(ft.SIG_PARSE);case 2:throw new Error(ft.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,s){switch(it("signature",e,64),mn(Xs(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),it("message",n,32),us(i),s=kn(s,i?33:65),t.ecdsaRecover(s,e,r,n)){case 0:return s;case 1:throw new Error(ft.SIG_PARSE);case 2:throw new Error(ft.RECOVER);case 3:throw new Error(ft.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(it("public key",e,[33,65]),it("private key",r,32),mn(Xs(n)==="Object","Expected options to be an Object"),n.data!==void 0&&it("options.data",n.data),n.hashfn!==void 0?(mn(Xs(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&it("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&it("options.ybuf",n.ybuf,32),it("output",i)):i=kn(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(ft.PUBKEY_PARSE);case 2:throw new Error(ft.ECDH)}}});const n_=y1().ec,zn=new n_("secp256k1"),Ze=zn.curve,Dt=Ze.n.constructor;function i_(t,e){let r=new Dt(e);if(r.cmp(Ze.p)>=0)return null;r=r.toRed(Ze.red);let n=r.redSqr().redIMul(r).redIAdd(Ze.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),zn.keyPair({pub:{x:r,y:n}})}function s_(t,e,r){let n=new Dt(e),i=new Dt(r);if(n.cmp(Ze.p)>=0||i.cmp(Ze.p)>=0||(n=n.toRed(Ze.red),i=i.toRed(Ze.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(Ze.b)).isZero()?zn.keyPair({pub:{x:n,y:i}}):null}function Di(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:i_(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:s_(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function ls(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var a_={contextRandomize(){return 0},privateKeyVerify(t){const e=new Dt(t);return e.cmp(Ze.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new Dt(t),r=Ze.n.sub(e).umod(Ze.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new Dt(e);if(r.cmp(Ze.n)>=0||(r.iadd(new Dt(t)),r.cmp(Ze.n)>=0&&r.isub(Ze.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new Dt(e);if(r.cmp(Ze.n)>=0||r.isZero())return 1;r.imul(new Dt(t)),r.cmp(Ze.n)>=0&&(r=r.umod(Ze.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Di(t)===null?1:0},publicKeyCreate(t,e){const r=new Dt(e);if(r.cmp(Ze.n)>=0||r.isZero())return 1;const n=zn.keyFromPrivate(e).getPublic();return ls(t,n),0},publicKeyConvert(t,e){const r=Di(e);if(r===null)return 1;const n=r.getPublic();return ls(t,n),0},publicKeyNegate(t,e){const r=Di(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),ls(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=Di(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(ls(t,n),0)},publicKeyTweakAdd(t,e,r){const n=Di(e);if(n===null)return 1;if(r=new Dt(r),r.cmp(Ze.n)>=0)return 2;const i=n.getPublic().add(Ze.g.mul(r));return i.isInfinity()?2:(ls(t,i),0)},publicKeyTweakMul(t,e,r){const n=Di(e);if(n===null)return 1;if(r=new Dt(r),r.cmp(Ze.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return ls(t,i),0},signatureNormalize(t){const e=new Dt(t.subarray(0,32)),r=new Dt(t.subarray(32,64));return e.cmp(Ze.n)>=0||r.cmp(Ze.n)>=0?1:(r.cmp(zn.nh)===1&&t.set(Ze.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new Dt(r).cmp(Ze.n)>=0||new Dt(n).cmp(Ze.n)>=0)return 1;const{output:i}=t;let s=i.subarray(4,4+33);s[0]=0,s.set(r,1);let a=33,o=0;for(;a>1&&s[o]===0&&!(s[o+1]&128);--a,++o);if(s=s.subarray(o),s[0]&128||a>1&&s[0]===0&&!(s[1]&128))return 1;let c=i.subarray(6+33,6+33+33);c[0]=0,c.set(n,1);let f=33,u=0;for(;f>1&&c[u]===0&&!(c[u+1]&128);--f,++u);return c=c.subarray(u),c[0]&128||f>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+a+f,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+a]=2,i[5+a]=c.length,i.set(c,6+a),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let a=new Dt(i);a.cmp(Ze.n)>=0&&(a=new Dt(0));let o=new Dt(e.subarray(6+r));return o.cmp(Ze.n)>=0&&(o=new Dt(0)),t.set(a.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const o=i;i=c=>{const f=o(e,r,null,n,c);if(!(f instanceof Uint8Array&&f.length===32))throw new Error("This is the way");return new Dt(f)}}const s=new Dt(r);if(s.cmp(Ze.n)>=0||s.isZero())return 1;let a;try{a=zn.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),t.recid=a.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new Dt(n.r),s=new Dt(n.s);if(i.cmp(Ze.n)>=0||s.cmp(Ze.n)>=0)return 1;if(s.cmp(zn.nh)===1||i.isZero()||s.isZero())return 3;const a=Di(r);if(a===null)return 2;const o=a.getPublic();return zn.verify(e,n,o)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new Dt(i.r),a=new Dt(i.s);if(s.cmp(Ze.n)>=0||a.cmp(Ze.n)>=0)return 1;if(s.isZero()||a.isZero())return 2;let o;try{o=zn.recoverPubKey(n,i,r)}catch{return 2}return ls(t,o),0},ecdh(t,e,r,n,i,s,a){const o=Di(e);if(o===null)return 1;const c=new Dt(r);if(c.cmp(Ze.n)>=0||c.isZero())return 2;const f=o.getPublic().mul(c);if(i===void 0){const u=f.encode(null,!0),d=zn.hash().update(u).digest();for(let g=0;g<32;++g)t[g]=d[g]}else{s||(s=new Uint8Array(32));const u=f.getX().toArray("be",32);for(let E=0;E<32;++E)s[E]=u[E];a||(a=new Uint8Array(32));const d=f.getY().toArray("be",32);for(let E=0;E<32;++E)a[E]=d[E];const g=i(s,a,n);if(!(g instanceof Uint8Array&&g.length===t.length))return 2;t.set(g)}return 0}},dm=r_(a_);const{Transform:o_}=ty.exports;var c_=t=>class hm extends o_{constructor(r,n,i,s,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=a,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!X.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return X.Buffer.isBuffer(r)||(r=X.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new hm(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:f_}=ty.exports;var u_=t=>class pm extends f_{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!X.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return X.Buffer.isBuffer(r)||(r=X.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new pm(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const l_=c_,d_=u_;var h_=function(t){const e=l_(t),r=d_(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},gm={};const R0=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];gm.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],o=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],u=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49];let g=u^(i<<1|s>>>31),b=d^(s<<1|i>>>31);const E=t[0]^g,w=t[1]^b,y=t[10]^g,_=t[11]^b,A=t[20]^g,B=t[21]^b,N=t[30]^g,O=t[31]^b,U=t[40]^g,H=t[41]^b;g=r^(a<<1|o>>>31),b=n^(o<<1|a>>>31);const V=t[2]^g,re=t[3]^b,ae=t[12]^g,de=t[13]^b,ee=t[22]^g,T=t[23]^b,l=t[32]^g,m=t[33]^b,S=t[42]^g,I=t[43]^b;g=i^(c<<1|f>>>31),b=s^(f<<1|c>>>31);const M=t[4]^g,D=t[5]^b,K=t[14]^g,x=t[15]^b,p=t[24]^g,P=t[25]^b,$=t[34]^g,F=t[35]^b,Z=t[44]^g,_e=t[45]^b;g=a^(u<<1|d>>>31),b=o^(d<<1|u>>>31);const ye=t[6]^g,ge=t[7]^b,He=t[16]^g,Oe=t[17]^b,Ve=t[26]^g,Ir=t[27]^b,yt=t[36]^g,Rt=t[37]^b,wr=t[46]^g,Ft=t[47]^b;g=c^(r<<1|n>>>31),b=f^(n<<1|r>>>31);const jt=t[8]^g,en=t[9]^b,wt=t[18]^g,Kt=t[19]^b,di=t[28]^g,Nt=t[29]^b,_t=t[38]^g,hi=t[39]^b,Et=t[48]^g,Bt=t[49]^b,jn=E,Mt=w,$t=_<<4|y>>>28,Kn=y<<4|_>>>28,At=A<<3|B>>>29,mt=B<<3|A>>>29,pn=O<<9|N>>>23,ut=N<<9|O>>>23,ht=U<<18|H>>>14,Sn=H<<18|U>>>14,pt=V<<1|re>>>31,gt=re<<1|V>>>31,$n=de<<12|ae>>>20,Ot=ae<<12|de>>>20,qt=ee<<10|T>>>22,Mi=T<<10|ee>>>22,tt=m<<13|l>>>19,ct=l<<13|m>>>19,tn=S<<2|I>>>30,St=I<<2|S>>>30,Tt=D<<30|M>>>2,pi=M<<30|D>>>2,Ht=K<<6|x>>>26,Je=x<<6|K>>>26,gi=P<<11|p>>>21,v=p<<11|P>>>21,k=$<<15|F>>>17,C=F<<15|$>>>17,h=_e<<29|Z>>>3,R=Z<<29|_e>>>3,G=ye<<28|ge>>>4,z=ge<<28|ye>>>4,Q=Oe<<23|He>>>9,oe=He<<23|Oe>>>9,pe=Ve<<25|Ir>>>7,ce=Ir<<25|Ve>>>7,$e=yt<<21|Rt>>>11,xe=Rt<<21|yt>>>11,ke=Ft<<24|wr>>>8,Pe=wr<<24|Ft>>>8,Me=jt<<27|en>>>5,Be=en<<27|jt>>>5,Ce=wt<<20|Kt>>>12,Re=Kt<<20|wt>>>12,Ie=Nt<<7|di>>>25,ve=di<<7|Nt>>>25,Ae=_t<<8|hi>>>24,me=hi<<8|_t>>>24,we=Et<<14|Bt>>>18,Ee=Bt<<14|Et>>>18;t[0]=jn^~$n&gi,t[1]=Mt^~Ot&v,t[10]=G^~Ce&At,t[11]=z^~Re&mt,t[20]=pt^~Ht&pe,t[21]=gt^~Je&ce,t[30]=Me^~$t&qt,t[31]=Be^~Kn&Mi,t[40]=Tt^~Q&Ie,t[41]=pi^~oe&ve,t[2]=$n^~gi&$e,t[3]=Ot^~v&xe,t[12]=Ce^~At&tt,t[13]=Re^~mt&ct,t[22]=Ht^~pe&Ae,t[23]=Je^~ce&me,t[32]=$t^~qt&k,t[33]=Kn^~Mi&C,t[42]=Q^~Ie&pn,t[43]=oe^~ve&ut,t[4]=gi^~$e&we,t[5]=v^~xe&Ee,t[14]=At^~tt&h,t[15]=mt^~ct&R,t[24]=pe^~Ae&ht,t[25]=ce^~me&Sn,t[34]=qt^~k&ke,t[35]=Mi^~C&Pe,t[44]=Ie^~pn&tn,t[45]=ve^~ut&St,t[6]=$e^~we&jn,t[7]=xe^~Ee&Mt,t[16]=tt^~h&G,t[17]=ct^~R&z,t[26]=Ae^~ht&pt,t[27]=me^~Sn&gt,t[36]=k^~ke&Me,t[37]=C^~Pe&Be,t[46]=pn^~tn&Tt,t[47]=ut^~St&pi,t[8]=we^~jn&$n,t[9]=Ee^~Mt&Ot,t[18]=h^~G&Ce,t[19]=R^~z&Re,t[28]=ht^~pt&Ht,t[29]=Sn^~gt&Je,t[38]=ke^~Me&$t,t[39]=Pe^~Be&Kn,t[48]=tn^~Tt&Q,t[49]=St^~pi&oe,t[0]^=R0[e*2],t[1]^=R0[e*2+1]}};const Nc=gm;function _a(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}_a.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};_a.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Nc.p1600(this.state),this.count=0)};_a.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(t&128)!==0&&this.count===this.blockSize-1&&Nc.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Nc.p1600(this.state),this.count=0,this.squeezing=!0};_a.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=X.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Nc.p1600(this.state),this.count=0);return e};_a.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var p_=_a,g_=h_(p_),ym=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const y_=ym(ry.exports),Fi=X,m_=ym(g_);function mm(t){return t=b_(t),m_.default("keccak256").update(t).digest()}function b_(t){if(!Fi.Buffer.isBuffer(t))if(Array.isArray(t))t=Fi.Buffer.from(t);else if(typeof t=="string")x_(t)?t=Fi.Buffer.from(bm(v_(t)),"hex"):t=Fi.Buffer.from(t);else if(typeof t=="number")t=__(t);else if(t==null)t=Fi.Buffer.allocUnsafe(0);else if(y_.default.isBN(t))t=t.toArrayLike(Fi.Buffer);else if(t.toArray)t=Fi.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function x_(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function bm(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function v_(t){return typeof t!="string"?t:w_(t)?t.slice(2):t}function w_(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}function __(t){const e=E_(t);return Fi.Buffer.from(bm(e.slice(2)),"hex")}function E_(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=mm);var xm=mm,Bd=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nd,"__esModule",{value:!0});const A_=Bd(Un.exports),N0=Bd(dm),Ia=ks,B0=Bd(xm);class S_{constructor(e,r){this._key=e,this.ownerLength=Ia.SIG_CONFIG[Ia.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=Ia.SIG_CONFIG[Ia.SignatureConfig.ETHEREUM].sigLength,this.signatureType=Ia.SignatureConfig.ETHEREUM,this.pk=r.toString("hex")}get publicKey(){return X.Buffer.alloc(0)}get key(){return X.Buffer.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=A_.default.toBuffer(e));let s=!1;try{s=N0.default.ecdsaVerify(n,B0.default(X.Buffer.from(r)),i)}catch{}return s}sign(e){return N0.default.ecdsaSign(B0.default(X.Buffer.from(e)),X.Buffer.from(this.key)).signature}}Nd.default=S_;const T_="logger/5.7.0";let M0=!1,O0=!1;const yc={debug:1,default:2,info:2,warning:3,error:4,off:5};let D0=yc.default,uu=null;function k_(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const U0=k_();var kl;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(kl||(kl={}));var sn;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(sn||(sn={}));const L0="0123456789abcdef";class j{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();yc[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(D0>yc[n])&&console.log.apply(console,r)}debug(...e){this._log(j.levels.DEBUG,e)}info(...e){this._log(j.levels.INFO,e)}warn(...e){this._log(j.levels.WARNING,e)}makeError(e,r,n){if(O0)return this.makeError("censored error",r,{});r||(r=j.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const f=n[c];try{if(f instanceof Uint8Array){let u="";for(let d=0;d<f.length;d++)u+=L0[f[d]>>4],u+=L0[f[d]&15];i.push(c+"=Uint8Array(0x"+u+")")}else i.push(c+"="+JSON.stringify(f))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let a="";switch(r){case sn.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case sn.CALL_EXCEPTION:case sn.INSUFFICIENT_FUNDS:case sn.MISSING_NEW:case sn.NONCE_EXPIRED:case sn.REPLACEMENT_UNDERPRICED:case sn.TRANSACTION_REPLACED:case sn.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=r,Object.keys(n).forEach(function(c){o[c]=n[c]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,j.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){U0&&this.throwError("platform missing String.prototype.normalize",j.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:U0})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,j.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,j.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",j.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return uu||(uu=new j(T_)),uu}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),M0){if(!e)return;this.globalLogger().throwError("error censorship permanent",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}O0=!!e,M0=!!r}static setLogLevel(e){const r=yc[e.toLowerCase()];if(r==null){j.globalLogger().warn("invalid log level - "+e);return}D0=r}static from(e){return new j(e)}}j.errors=sn;j.levels=kl;const P_="bytes/5.7.0",er=new j(P_);function vm(t){return!!t.toHexString}function aa(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return aa(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Oo(t){return je(t)&&!(t.length%2)||as(t)}function F0(t){return typeof t=="number"&&t==t&&t%1===0}function as(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!F0(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!F0(r)||r<0||r>=256)return!1}return!0}function ue(t,e){if(e||(e={}),typeof t=="number"){er.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),aa(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),vm(t)&&(t=t.toHexString()),je(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":er.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return aa(new Uint8Array(n))}return as(t)?aa(new Uint8Array(t)):er.throwArgumentError("invalid arrayify value","value",t)}function Ut(t){const e=t.map(i=>ue(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),aa(n)}function Qn(t){let e=ue(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function Qa(t,e){t=ue(t),t.length>e&&er.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),aa(r)}function je(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const lu="0123456789abcdef";function he(t,e){if(e||(e={}),typeof t=="number"){er.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=lu[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),vm(t))return t.toHexString();if(je(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":er.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(as(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=lu[(i&240)>>4]+lu[i&15]}return r}return er.throwArgumentError("invalid hexlify value","value",t)}function ni(t){if(typeof t!="string")t=he(t);else if(!je(t)||t.length%2)return null;return(t.length-2)/2}function or(t,e,r){return typeof t!="string"?t=he(t):(!je(t)||t.length%2)&&er.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function jr(t){let e="0x";return t.forEach(r=>{e+=he(r).substring(2)}),e}function Do(t){const e=wm(he(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function wm(t){typeof t!="string"&&(t=he(t)),je(t)||er.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function Lt(t,e){for(typeof t!="string"?t=he(t):je(t)||er.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&er.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Ps(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Oo(t)){let r=ue(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=he(r.slice(0,32)),e.s=he(r.slice(32,64))):r.length===65?(e.r=he(r.slice(0,32)),e.s=he(r.slice(32,64)),e.v=r[64]):er.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:er.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=he(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=Qa(ue(e._vs),32);e._vs=he(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&er.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=he(i);e.s==null?e.s=a:e.s!==a&&er.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?er.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&er.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!je(e.r)?er.throwArgumentError("signature missing or invalid r","signature",t):e.r=Lt(e.r,32),e.s==null||!je(e.s)?er.throwArgumentError("signature missing or invalid s","signature",t):e.s=Lt(e.s,32);const r=ue(e.s);r[0]>=128&&er.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=he(r);e._vs&&(je(e._vs)||er.throwArgumentError("signature invalid _vs","signature",t),e._vs=Lt(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&er.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Pl(t){return t=Ps(t),he(Ut([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const _m="bignumber/5.7.0";var uo=Ue.BN;const xi=new j(_m),du={},j0=9007199254740991;function C_(t){return t!=null&&(fe.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||je(t)||typeof t=="bigint"||as(t))}let K0=!1;class fe{constructor(e,r){e!==du&&xi.throwError("cannot call constructor directly; use BigNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Gr(Qe(this).fromTwos(e))}toTwos(e){return Gr(Qe(this).toTwos(e))}abs(){return this._hex[0]==="-"?fe.from(this._hex.substring(1)):this}add(e){return Gr(Qe(this).add(Qe(e)))}sub(e){return Gr(Qe(this).sub(Qe(e)))}div(e){return fe.from(e).isZero()&&gn("division-by-zero","div"),Gr(Qe(this).div(Qe(e)))}mul(e){return Gr(Qe(this).mul(Qe(e)))}mod(e){const r=Qe(e);return r.isNeg()&&gn("division-by-zero","mod"),Gr(Qe(this).umod(r))}pow(e){const r=Qe(e);return r.isNeg()&&gn("negative-power","pow"),Gr(Qe(this).pow(r))}and(e){const r=Qe(e);return(this.isNegative()||r.isNeg())&&gn("unbound-bitwise-result","and"),Gr(Qe(this).and(r))}or(e){const r=Qe(e);return(this.isNegative()||r.isNeg())&&gn("unbound-bitwise-result","or"),Gr(Qe(this).or(r))}xor(e){const r=Qe(e);return(this.isNegative()||r.isNeg())&&gn("unbound-bitwise-result","xor"),Gr(Qe(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&gn("negative-width","mask"),Gr(Qe(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&gn("negative-width","shl"),Gr(Qe(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&gn("negative-width","shr"),Gr(Qe(this).shrn(e))}eq(e){return Qe(this).eq(Qe(e))}lt(e){return Qe(this).lt(Qe(e))}lte(e){return Qe(this).lte(Qe(e))}gt(e){return Qe(this).gt(Qe(e))}gte(e){return Qe(this).gte(Qe(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Qe(this).isZero()}toNumber(){try{return Qe(this).toNumber()}catch{gn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return xi.throwError("this platform does not support BigInt",j.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?K0||(K0=!0,xi.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?xi.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",j.errors.UNEXPECTED_ARGUMENT,{}):xi.throwError("BigNumber.toString does not accept parameters",j.errors.UNEXPECTED_ARGUMENT,{})),Qe(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof fe)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new fe(du,lo(e)):e.match(/^-?[0-9]+$/)?new fe(du,lo(new uo(e))):xi.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&gn("underflow","BigNumber.from",e),(e>=j0||e<=-j0)&&gn("overflow","BigNumber.from",e),fe.from(String(e));const r=e;if(typeof r=="bigint")return fe.from(r.toString());if(as(r))return fe.from(he(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return fe.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(je(n)||n[0]==="-"&&je(n.substring(1))))return fe.from(n)}return xi.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function lo(t){if(typeof t!="string")return lo(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&xi.throwArgumentError("invalid hex","value",t),t=lo(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Gr(t){return fe.from(lo(t))}function Qe(t){const e=fe.from(t).toHexString();return e[0]==="-"?new uo("-"+e.substring(3),16):new uo(e.substring(2),16)}function gn(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),xi.throwError(t,j.errors.NUMERIC_FAULT,n)}function I_(t){return new uo(t,36).toString(16)}function R_(t){return new uo(t,16).toString(36)}const Kr=new j(_m),Za={},Em=fe.from(0),Am=fe.from(-1);function Sm(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Kr.throwError(t,j.errors.NUMERIC_FAULT,i)}let eo="0";for(;eo.length<256;)eo+=eo;function Md(t){if(typeof t!="number")try{t=fe.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+eo.substring(0,t):Kr.throwArgumentError("invalid decimal size","decimals",t)}function mc(t,e){e==null&&(e=0);const r=Md(e);t=fe.from(t);const n=t.lt(Em);n&&(t=t.mul(Am));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function Hn(t,e){e==null&&(e=0);const r=Md(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Kr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Kr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Kr.throwArgumentError("too many decimal points","value",t);let s=i[0],a=i[1];for(s||(s="0"),a||(a="0");a[a.length-1]==="0";)a=a.substring(0,a.length-1);for(a.length>r.length-1&&Sm("fractional component exceeds decimals","underflow","parseFixed"),a===""&&(a="0");a.length<r.length-1;)a+="0";const o=fe.from(s),c=fe.from(a);let f=o.mul(r).add(c);return n&&(f=f.mul(Am)),f}class oa{constructor(e,r,n,i){e!==Za&&Kr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Md(i),Object.freeze(this)}static from(e){if(e instanceof oa)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Kr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(a,o,c)=>e[a]==null?c:(typeof e[a]!==o&&Kr.throwArgumentError("invalid fixed format ("+a+" not "+o+")","format."+a,e[a]),e[a]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Kr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Kr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new oa(Za,r,n,i)}}class pr{constructor(e,r,n,i){e!==Za&&Kr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Kr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=Hn(this._value,this.format.decimals),n=Hn(e._value,e.format.decimals);return pr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=Hn(this._value,this.format.decimals),n=Hn(e._value,e.format.decimals);return pr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=Hn(this._value,this.format.decimals),n=Hn(e._value,e.format.decimals);return pr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=Hn(this._value,this.format.decimals),n=Hn(e._value,e.format.decimals);return pr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=pr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe($0.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=pr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe($0.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Kr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=pr.from("1"+eo.substring(0,e),this.format),i=N_.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Kr.throwArgumentError("invalid byte width","width",e);const r=fe.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Lt(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return pr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!C_(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),pr.fromString(mc(e,r),oa.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=oa.from(r),i=Hn(e,n.decimals);!n.signed&&i.lt(Em)&&Sm("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=Lt(s,n.width/8));const a=mc(i,n.decimals);return new pr(Za,s,a,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=oa.from(r);if(ue(e).length>n.width/8)throw new Error("overflow");let i=fe.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),a=mc(i,n.decimals);return new pr(Za,s,a,n)}static from(e,r){if(typeof e=="string")return pr.fromString(e,r);if(as(e))return pr.fromBytes(e,r);try{return pr.fromValue(e,0,r)}catch(n){if(n.code!==j.errors.INVALID_ARGUMENT)throw n}return Kr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const $0=pr.from(1),N_=pr.from("0.5"),B_="properties/5.7.0";var M_=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Bc=new j(B_);function Y(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Sr(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function tr(t){return M_(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Od(t,e){(!t||typeof t!="object")&&Bc.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Bc.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function zt(t){const e={};for(const r in t)e[r]=t[r];return e}const O_={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Tm(t){if(t==null||O_[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Tm(n))return!1}return!0}return Bc.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function D_(t){if(Tm(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>qr(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&Y(e,r,qr(n))}return e}return Bc.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function qr(t){return D_(t)}class Cs{constructor(e){for(const r in e)this[r]=qr(e[r])}}const Uo="abi/5.7.0",et=new j(Uo),vs={};let q0={calldata:!0,memory:!0,storage:!0},U_={calldata:!0,memory:!0};function ec(t,e){if(t==="bytes"||t==="string"){if(q0[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&U_[e])return!0;return(q0[e]||e==="payable")&&et.throwArgumentError("invalid modifier","name",e),!1}function L_(t,e){let r=t;function n(o){et.throwArgumentError(`unexpected character at position ${o}`,"param",t)}t=t.replace(/\s/g," ");function i(o){let c={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<t.length;o++){let c=t[o];switch(c){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=Qs(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),ec(a.type,a.name)&&(a.name=""),a.type=Qs(a.type);let f=a;a=a.parent,a||n(o),delete f.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),ec(a.type,a.name)&&(a.name=""),a.type=Qs(a.type);let u=i(a.parent);a.parent.components.push(u),delete a.parent,a=u;break;case" ":a.state.allowType&&a.type!==""&&(a.type=Qs(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):ec(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=c,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=c,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=c,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=c,delete a.state.allowArray):a.state.readArray?a.type+=c:n(o)}}return a.parent&&et.throwArgumentError("unexpected eof","param",t),delete s.state,a.name==="indexed"?(e||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):ec(a.type,a.name)&&(a.name=""),s.type=Qs(s.type),s}function bc(t,e){for(let r in e)Y(t,r,e[r])}const ot=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),F_=new RegExp(/^(.*)\[([0-9]*)\]$/);class gr{constructor(e,r){e!==vs&&et.throwError("use fromString",j.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),bc(this,r);let n=this.type.match(F_);n?bc(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:gr.fromObject({type:n[1],components:this.components}),baseType:"array"}):bc(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=ot.sighash),ot[e]||et.throwArgumentError("invalid format type","format",e),e===ot.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==ot.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===ot.full?", ":",")+")"):r+=this.type,e!==ot.sighash&&(this.indexed===!0&&(r+=" indexed"),e===ot.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?gr.fromString(e,r):gr.fromObject(e)}static fromObject(e){return gr.isParamType(e)?e:new gr(vs,{name:e.name||null,type:Qs(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(gr.fromObject):null})}static fromString(e,r){function n(i){return gr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(L_(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function ho(t,e){return K_(t).map(r=>gr.fromString(r,e))}class Wn{constructor(e,r){e!==vs&&et.throwError("use a static from method",j.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),bc(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Wn.isFragment(e)?e:typeof e=="string"?Wn.fromString(e):Wn.fromObject(e)}static fromObject(e){if(Wn.isFragment(e))return e;switch(e.type){case"function":return Nn.fromObject(e);case"event":return Jn.fromObject(e);case"constructor":return Rn.fromObject(e);case"error":return _i.fromObject(e);case"fallback":case"receive":return null}return et.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Jn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Nn.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Rn.fromString(e.trim()):e.split(" ")[0]==="error"?_i.fromString(e.substring(5).trim()):et.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Jn extends Wn{format(e){if(e||(e=ot.sighash),ot[e]||et.throwArgumentError("invalid format type","format",e),e===ot.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==ot.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===ot.full?", ":",")+") ",e!==ot.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?Jn.fromString(e):Jn.fromObject(e)}static fromObject(e){if(Jn.isEventFragment(e))return e;e.type!=="event"&&et.throwArgumentError("invalid event object","value",e);const r={name:po(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(gr.fromObject):[],type:"event"};return new Jn(vs,r)}static fromString(e){let r=e.match(go);r||et.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:et.warn("unknown modifier: "+i)}}),Jn.fromObject({name:r[1].trim(),anonymous:n,inputs:ho(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function km(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&et.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||et.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=fe.from(r[1]),r[0]):t}function Pm(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Cm(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&et.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&et.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&et.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&et.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&et.throwArgumentError("unable to determine stateMutability","value",t),e}class Rn extends Wn{format(e){if(e||(e=ot.sighash),ot[e]||et.throwArgumentError("invalid format type","format",e),e===ot.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===ot.sighash&&et.throwError("cannot format a constructor for sighash",j.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===ot.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Rn.fromString(e):Rn.fromObject(e)}static fromObject(e){if(Rn.isConstructorFragment(e))return e;e.type!=="constructor"&&et.throwArgumentError("invalid constructor object","value",e);let r=Cm(e);r.constant&&et.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(gr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?fe.from(e.gas):null};return new Rn(vs,n)}static fromString(e){let r={type:"constructor"};e=km(e,r);let n=e.match(go);return(!n||n[1].trim()!=="constructor")&&et.throwArgumentError("invalid constructor string","value",e),r.inputs=ho(n[2].trim(),!1),Pm(n[3].trim(),r),Rn.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Nn extends Rn{format(e){if(e||(e=ot.sighash),ot[e]||et.throwArgumentError("invalid format type","format",e),e===ot.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==ot.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===ot.full?", ":",")+") ",e!==ot.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Nn.fromString(e):Nn.fromObject(e)}static fromObject(e){if(Nn.isFunctionFragment(e))return e;e.type!=="function"&&et.throwArgumentError("invalid function object","value",e);let r=Cm(e);const n={type:e.type,name:po(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(gr.fromObject):[],outputs:e.outputs?e.outputs.map(gr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?fe.from(e.gas):null};return new Nn(vs,n)}static fromString(e){let r={type:"function"};e=km(e,r);let n=e.split(" returns ");n.length>2&&et.throwArgumentError("invalid function string","value",e);let i=n[0].match(go);if(i||et.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&po(r.name),r.inputs=ho(i[2],!1),Pm(i[3].trim(),r),n.length>1){let s=n[1].match(go);(s[1].trim()!=""||s[3].trim()!="")&&et.throwArgumentError("unexpected tokens","value",e),r.outputs=ho(s[2],!1)}else r.outputs=[];return Nn.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function H0(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&et.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class _i extends Wn{format(e){if(e||(e=ot.sighash),ot[e]||et.throwArgumentError("invalid format type","format",e),e===ot.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==ot.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===ot.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?_i.fromString(e):_i.fromObject(e)}static fromObject(e){if(_i.isErrorFragment(e))return e;e.type!=="error"&&et.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:po(e.name),inputs:e.inputs?e.inputs.map(gr.fromObject):[]};return H0(new _i(vs,r))}static fromString(e){let r={type:"error"},n=e.match(go);return n||et.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&po(r.name),r.inputs=ho(n[2],!1),H0(_i.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Qs(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const j_=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function po(t){return(!t||!t.match(j_))&&et.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const go=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function K_(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&et.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Dd=new j(Uo);function Im(t){const e=[],r=function(n,i){if(!!Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{r(a,i[s])}catch(o){e.push({path:a,error:o})}}};return r([],t),e}class Ci{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Dd.throwArgumentError(e,this.localName,r)}}class Cl{constructor(e){Y(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return jr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Ut(e._data))}writeBytes(e){let r=ue(e);const n=r.length%this.wordSize;return n&&(r=Ut([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=ue(fe.from(e));return r.length>this.wordSize&&Dd.throwError("value out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Ut([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Mc{constructor(e,r,n,i){Y(this,"_data",ue(e)),Y(this,"wordSize",r||32),Y(this,"_coerceFunc",n),Y(this,"allowLoose",i),this._offset=0}get data(){return he(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Mc.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Dd.throwError("data out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Mc(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return fe.from(this.readBytes(this.wordSize))}}function Pt(t){return"0x"+m1.keccak_256(ue(t))}const $_="rlp/5.7.0",Gn=new j($_);function z0(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function G0(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function Rm(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(Rm(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=z0(n.length);return i.unshift(247+i.length),i.concat(n)}Oo(t)||Gn.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ue(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=z0(e.length);return r.unshift(183+r.length),r.concat(e)}function ws(t){return he(Rm(t))}function V0(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Nm(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Gn.throwError("child data too short",j.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Nm(t,e){if(t.length===0&&Gn.throwError("data too short",j.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Gn.throwError("data short segment too short",j.errors.BUFFER_OVERRUN,{});const n=G0(t,e+1,r);return e+1+r+n>t.length&&Gn.throwError("data long segment too short",j.errors.BUFFER_OVERRUN,{}),V0(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Gn.throwError("data array too short",j.errors.BUFFER_OVERRUN,{}),V0(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Gn.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const n=G0(t,e+1,r);e+1+r+n>t.length&&Gn.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const i=he(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Gn.throwError("data too short",j.errors.BUFFER_OVERRUN,{});const n=he(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:he(t[e])}}function df(t){const e=ue(t),r=Nm(e,0);return r.consumed!==e.length&&Gn.throwArgumentError("invalid rlp data","data",t),r.result}const q_=Object.freeze(Object.defineProperty({__proto__:null,encode:ws,decode:df},Symbol.toStringTag,{value:"Module"})),H_="address/5.7.0",Hi=new j(H_);function J0(t){je(t,20)||Hi.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ue(Pt(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const z_=9007199254740991;function G_(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Ud={};for(let t=0;t<10;t++)Ud[String(t)]=String(t);for(let t=0;t<26;t++)Ud[String.fromCharCode(65+t)]=String(10+t);const W0=Math.floor(G_(z_));function Bm(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Ud[n]).join("");for(;e.length>=W0;){let n=e.substring(0,W0);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function xt(t){let e=null;if(typeof t!="string"&&Hi.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=J0(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Hi.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Bm(t)&&Hi.throwArgumentError("bad icap checksum","address",t),e=I_(t.substring(4));e.length<40;)e="0"+e;e=J0("0x"+e)}else Hi.throwArgumentError("invalid address","address",t);return e}function V_(t){try{return xt(t),!0}catch{}return!1}function J_(t){let e=R_(xt(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Bm("XE00"+e)+e}function hf(t){let e=null;try{e=xt(t.from)}catch{Hi.throwArgumentError("missing from address","transaction",t)}const r=Qn(ue(fe.from(t.nonce).toHexString()));return xt(or(Pt(ws([e,r])),12))}function W_(t,e,r){return ni(e)!==32&&Hi.throwArgumentError("salt must be 32 bytes","salt",e),ni(r)!==32&&Hi.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),xt(or(Pt(Ut(["0xff",xt(t),e,r])),12))}class Y_ extends Ci{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=xt(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return xt(Lt(e.readValue().toHexString(),20))}}class X_ extends Ci{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const ta=new j(Uo);function Mm(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(f=>{const u=f.localName;return u||ta.throwError("cannot encode object for signature with missing names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[u]&&ta.throwError("cannot encode object for signature with duplicate names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[u]=!0,r[u]})}else ta.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&ta.throwArgumentError("types/value length mismatch","tuple",r);let i=new Cl(t.wordSize),s=new Cl(t.wordSize),a=[];e.forEach((c,f)=>{let u=n[f];if(c.dynamic){let d=s.length;c.encode(s,u);let g=i.writeUpdatableValue();a.push(b=>{g(b+d)})}else c.encode(i,u)}),a.forEach(c=>{c(i.length)});let o=t.appendWriter(i);return o+=t.appendWriter(s),o}function Om(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let a=null;if(s.dynamic){let o=t.readValue(),c=n.subReader(o.toNumber());try{a=s.decode(c)}catch(f){if(f.code===j.errors.BUFFER_OVERRUN)throw f;a=f,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(t)}catch(o){if(o.code===j.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}a!=null&&r.push(a)});const i=e.reduce((s,a)=>{const o=a.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});e.forEach((s,a)=>{let o=s.localName;if(!o||i[o]!==1||(o==="length"&&(o="_length"),r[o]!=null))return;const c=r[a];c instanceof Error?Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw c}}):r[o]=c});for(let s=0;s<r.length;s++){const a=r[s];a instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(r)}class Q_ extends Ci{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),ta.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return Mm(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&ta.throwError("insufficient data length",j.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new X_(this.coder));return e.coerce(this.name,Om(e,n))}}class Z_ extends Ci{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Dm extends Ci{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=ue(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class e2 extends Dm{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,he(super.decode(e)))}}class t2 extends Ci{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=ue(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,he(e.readBytes(this.size)))}}class r2 extends Ci{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Um="0x0000000000000000000000000000000000000000",Lm=fe.from(-1),Ld=fe.from(0),Fm=fe.from(1),n2=fe.from(2),i2=fe.from("1000000000000000000"),jm=fe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),s2=fe.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),a2=fe.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Fd="0x0000000000000000000000000000000000000000000000000000000000000000",o2="\u039E",Km=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Um,NegativeOne:Lm,Zero:Ld,One:Fm,Two:n2,WeiPerEther:i2,MaxUint256:jm,MinInt256:s2,MaxInt256:a2,HashZero:Fd,EtherSymbol:o2},Symbol.toStringTag,{value:"Module"}));class c2 extends Ci{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=fe.from(r),i=jm.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Fm).mul(Lm)))&&this._throwError("value out-of-bounds",r)}else(n.lt(Ld)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const f2="strings/5.7.0",$m=new j(f2);var ii;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(ii||(ii={}));var Jr;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Jr||(Jr={}));function u2(t,e,r,n,i){return $m.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function qm(t,e,r,n,i){if(t===Jr.BAD_PREFIX||t===Jr.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return t===Jr.OVERRUN?r.length-e-1:0}function l2(t,e,r,n,i){return t===Jr.OVERLONG?(n.push(i),0):(n.push(65533),qm(t,e,r))}const Hm=Object.freeze({error:u2,ignore:qm,replace:l2});function jd(t,e){e==null&&(e=Hm.error),t=ue(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null,a=null;if((i&224)===192)s=1,a=127;else if((i&240)===224)s=2,a=2047;else if((i&248)===240)s=3,a=65535;else{(i&192)===128?n+=e(Jr.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Jr.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(Jr.OVERRUN,n-1,t,r);continue}let o=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let f=t[n];if((f&192)!=128){n+=e(Jr.MISSING_CONTINUE,n,t,r),o=null;break}o=o<<6|f&63,n++}if(o!==null){if(o>1114111){n+=e(Jr.OUT_OF_RANGE,n-1-s,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(Jr.UTF16_SURROGATE,n-1-s,t,r,o);continue}if(o<=a){n+=e(Jr.OVERLONG,n-1-s,t,r,o);continue}r.push(o)}}return r}function fr(t,e=ii.current){e!=ii.current&&($m.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ue(r)}function hu(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function d2(t,e){return'"'+jd(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?hu(r):(r-=65536,hu((r>>10&1023)+55296)+hu((r&1023)+56320))}).join("")+'"'}function Il(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Is(t,e){return Il(jd(t,e))}function Oc(t,e=ii.current){return jd(fr(t,e))}function h2(t){const e=fr(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return he(Ut([e,Fd]).slice(0,32))}function p2(t){const e=ue(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return Is(e.slice(0,r))}function g2(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Kd(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let s=i.split(":");r+=parseInt(s[0],16),n[r]=e(s[1])}),n}function zm(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function $d(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}const y2=zm("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),m2="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),b2=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],x2=Kd("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),v2=Kd("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),w2=Kd("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",g2),_2=zm("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function E2(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function A2(t){return!!$d(t,y2)}function S2(t){let e=$d(t,b2);if(e)return[t+e.s];let r=x2[t];if(r)return r;let n=v2[t];if(n)return[t+n[0]];let i=w2[t];return i||null}function T2(t){return!!$d(t,_2)}function k2(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=Oc(t);e=E2(e.map(n=>{if(m2.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=S2(n);return i||[n]})),e=Oc(Il(e),ii.NFKC),e.forEach(n=>{if(T2(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(A2(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=Il(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}class P2 extends Dm{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,fr(r))}decode(e){return Is(super.decode(e))}}class tc extends Ci{constructor(e,r){let n=!1;const i=[];e.forEach(a=>{a.dynamic&&(n=!0),i.push(a.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return Mm(e,this.coders,r)}decode(e){return e.coerce(this.name,Om(e,this.coders))}}const rc=new j(Uo),C2=new RegExp(/^bytes([0-9]*)$/),I2=new RegExp(/^(u?int)([0-9]*)$/);class Gm{constructor(e){Y(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Y_(e.name);case"bool":return new Z_(e.name);case"string":return new P2(e.name);case"bytes":return new e2(e.name);case"array":return new Q_(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new tc((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new r2(e.name)}let r=e.type.match(I2);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&rc.throwArgumentError("invalid "+r[1]+" bit length","param",e),new c2(n/8,r[1]==="int",e.name)}if(r=e.type.match(C2),r){let n=parseInt(r[1]);return(n===0||n>32)&&rc.throwArgumentError("invalid bytes length","param",e),new t2(n,e.name)}return rc.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Mc(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new Cl(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(gr.from(i)));return new tc(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&rc.throwError("types/values length mismatch",j.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(a=>this._getCoder(gr.from(a))),i=new tc(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(a=>this._getCoder(gr.from(a)));return new tc(i,"_").decode(this._getReader(ue(r),n))}}const Vm=new Gm;function zi(t){return Pt(fr(t))}const Jm="hash/5.7.0";function qd(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return ue(e)}function Hd(t){t=ue(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}const R2=Object.freeze(Object.defineProperty({__proto__:null,decode:qd,encode:Hd},Symbol.toStringTag,{value:"Module"}));function Wm(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,a){n.call(s,function(o){a>0&&Array.isArray(o)?i(o,a-1):r.push(o)})};return i(t,e),r}function N2(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function B2(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let O=1;O<n;O++)s.push(i+=r());let a=r(),o=e;e+=a;let c=0,f=0;function u(){return c==0&&(f=f<<8|t[e++],c=8),f>>--c&1}const d=31,g=Math.pow(2,d),b=g>>>1,E=b>>1,w=g-1;let y=0;for(let O=0;O<d;O++)y=y<<1|u();let _=[],A=0,B=g;for(;;){let O=Math.floor(((y-A+1)*i-1)/B),U=0,H=n;for(;H-U>1;){let ae=U+H>>>1;O<s[ae]?H=ae:U=ae}if(U==0)break;_.push(U);let V=A+Math.floor(B*s[U]/i),re=A+Math.floor(B*s[U+1]/i)-1;for(;((V^re)&b)==0;)y=y<<1&w|u(),V=V<<1&w,re=re<<1&w|1;for(;V&~re&E;)y=y&b|y<<1&w>>>1|u(),V=V<<1^b,re=(re^b)<<1|b|1;A=V,B=1+re-V}let N=n-4;return _.map(O=>{switch(O-N){case 3:return N+65792+(t[o++]<<16|t[o++]<<8|t[o++]);case 2:return N+256+(t[o++]<<8|t[o++]);case 1:return N+t[o++];default:return O-1}})}function M2(t){let e=0;return()=>t[e++]}function O2(t){return M2(B2(t))}function D2(t){return t&1?~t>>1:t>>1}function U2(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function Y0(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function L2(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=D2(e());return r}function Dc(t,e){let r=Y0(t(),t),n=t(),i=Y0(n,t),s=U2(n,t);for(let a=0;a<n;a++)for(let o=0;o<s[a];o++)r.push(i[a]+o);return e?r.map(a=>e[a]):r}function F2(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(K2(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push($2(r,t))}return N2(Wm(e))}function j2(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function Ym(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)L2(t,r).forEach((s,a)=>n[a].push(s));return n}function K2(t,e){let r=1+e(),n=e(),i=j2(e),s=Ym(i.length,1+t,e);return Wm(s.map((a,o)=>{const c=a[0],f=a.slice(1);return Array(i[o]).fill(void 0).map((u,d)=>{let g=d*n;return[c+d*r,f.map(b=>b+g)]})}))}function $2(t,e){let r=1+e();return Ym(r,1+t,e).map(i=>[i[0],i.slice(1)])}function q2(t){let e=Dc(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let f=Dc(t,e);if(f.length==0)break;n.push({set:new Set(f),node:r()})}n.sort((f,u)=>u.set.size-f.set.size);let i=t(),s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1,c=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:c}}}function H2(){return O2(qd("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const pf=H2(),z2=new Set(Dc(pf)),G2=new Set(Dc(pf)),V2=F2(pf),J2=q2(pf),X0=45,Q0=95;function Xm(t){return Oc(t)}function W2(t){return t.filter(e=>e!=65039)}function Qm(t){for(let e of t.split(".")){let r=Xm(e);try{for(let n=r.lastIndexOf(Q0)-1;n>=0;n--)if(r[n]!==Q0)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===X0&&r[3]===X0)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function Y2(t){return Qm(X2(t,W2))}function X2(t,e){let r=Xm(t).reverse(),n=[];for(;r.length;){let i=Z2(r);if(i){n.push(...e(i));continue}let s=r.pop();if(z2.has(s)){n.push(s);continue}if(G2.has(s))continue;let a=V2[s];if(a){n.push(...a);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return Qm(Q2(String.fromCodePoint(...n)))}function Q2(t){return t.normalize("NFC")}function Z2(t,e){var r;let n=J2,i,s,a=[],o=t.length;for(e&&(e.length=0);o;){let c=t[--o];if(n=(r=n.branches.find(f=>f.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;a.push(c),n.fe0f&&(a.push(65039),o>0&&t[o-1]==65039&&o--),n.valid&&(i=a.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(o).reverse()),t.length=o)}return i}const e3=new j(Jm),Zm=new Uint8Array(32);Zm.fill(0);function Z0(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function zd(t){const e=fr(Y2(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(Z0(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(Z0(e.slice(n))),r}function t3(t){try{return zd(t).length!==0}catch{}return!1}function to(t){typeof t!="string"&&e3.throwArgumentError("invalid ENS name; not a string","name",t);let e=Zm;const r=zd(t);for(;r.length;)e=Pt(Ut([e,Pt(r.pop())]));return he(e)}function eb(t){return he(Ut(zd(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const r3=`Ethereum Signed Message:
`;function Gd(t){return typeof t=="string"&&(t=fr(t)),Pt(Ut([fr(r3),fr(String(t.length)),t]))}var n3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Vt=new j(Jm),tb=new Uint8Array(32);tb.fill(0);const i3=fe.from(-1),rb=fe.from(0),nb=fe.from(1),s3=fe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function a3(t){const e=ue(t),r=e.length%32;return r?jr([e,tb.slice(r)]):he(e)}const o3=Lt(nb.toHexString(),32),c3=Lt(rb.toHexString(),32),ep={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},pu=["name","version","chainId","verifyingContract","salt"];function tp(t){return function(e){return typeof e!="string"&&Vt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const f3={name:tp("name"),version:tp("version"),chainId:function(t){try{return fe.from(t).toString()}catch{}return Vt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return xt(t).toLowerCase()}catch{}return Vt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ue(t);if(e.length!==32)throw new Error("bad length");return he(e)}catch{}return Vt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function gu(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Vt.throwArgumentError("invalid numeric width","type",t);const i=s3.mask(r?n-1:n),s=r?i.add(nb).mul(i3):rb;return function(a){const o=fe.from(a);return(o.lt(s)||o.gt(i))&&Vt.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),Lt(o.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Vt.throwArgumentError("invalid bytes width","type",t),function(n){return ue(n).length!==r&&Vt.throwArgumentError(`invalid length for ${t}`,"value",n),a3(n)}}}switch(t){case"address":return function(e){return Lt(xt(e),32)};case"bool":return function(e){return e?o3:c3};case"bytes":return function(e){return Pt(e)};case"string":return function(e){return zi(e)}}return null}function rp(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class _r{constructor(e){Y(this,"types",Object.freeze(qr(e))),Y(this,"_encoderCache",{}),Y(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(o=>{r[o]={},n[o]=[],i[o]={}});for(const o in e){const c={};e[o].forEach(f=>{c[f.name]&&Vt.throwArgumentError(`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(o)}`,"types",e),c[f.name]=!0;const u=f.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===o&&Vt.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!gu(u)&&(n[u]||Vt.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(o),r[o][u]=!0)})}const s=Object.keys(n).filter(o=>n[o].length===0);s.length===0?Vt.throwArgumentError("missing primary type","types",e):s.length>1&&Vt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),Y(this,"primaryType",s[0]);function a(o,c){c[o]&&Vt.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),c[o]=!0,Object.keys(r[o]).forEach(f=>{!n[f]||(a(f,c),Object.keys(c).forEach(u=>{i[u][f]=!0}))}),delete c[o]}a(this.primaryType,{});for(const o in i){const c=Object.keys(i[o]);c.sort(),this._types[o]=rp(o,e[o])+c.map(f=>rp(f,e[f])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=gu(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),a=parseInt(r[3]);return o=>{a>=0&&o.length!==a&&Vt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let c=o.map(s);return this._types[i]&&(c=c.map(Pt)),Pt(jr(c))}}const n=this.types[e];if(n){const i=zi(this._types[e]);return s=>{const a=n.map(({name:o,type:c})=>{const f=this.getEncoder(c)(s[o]);return this._types[c]?Pt(f):f});return a.unshift(i),jr(a)}}return Vt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Vt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return Pt(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(gu(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],o=parseInt(i[3]);return o>=0&&r.length!==o&&Vt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(a,c,n))}const s=this.types[e];return s?s.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,r[o],n),a),{}):Vt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new _r(e)}static getPrimaryType(e){return _r.from(e).primaryType}static hashStruct(e,r,n){return _r.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=ep[n];i||Vt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>pu.indexOf(n.name)-pu.indexOf(i.name)),_r.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return jr(["0x1901",_r.hashDomain(e),_r.from(r).hash(n)])}static hash(e,r,n){return Pt(_r.encode(e,r,n))}static resolveNames(e,r,n,i){return n3(this,void 0,void 0,function*(){e=zt(e);const s={};e.verifyingContract&&!je(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=_r.from(r);a.visit(n,(o,c)=>(o==="address"&&!je(c,20)&&(s[c]="0x"),c));for(const o in s)s[o]=yield i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){_r.hashDomain(e);const i={},s=[];pu.forEach(c=>{const f=e[c];f!=null&&(i[c]=f3[c](f),s.push({name:c,type:ep[c]}))});const a=_r.from(r),o=zt(r);return o.EIP712Domain?Vt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(c,f)=>{if(c.match(/^bytes(\d*)/))return he(ue(f));if(c.match(/^u?int/))return fe.from(f).toString();switch(c){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return typeof f!="string"&&Vt.throwArgumentError("invalid string","value",f),f}return Vt.throwArgumentError("unsupported type","type",c)})}}}const Gt=new j(Uo);class ib extends Cs{}class sb extends Cs{}class u3 extends Cs{}class Uc extends Cs{static isIndexed(e){return!!(e&&e._isIndexed)}}const l3={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function np(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class Rl{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,Y(this,"fragments",r.map(n=>Wn.from(n)).filter(n=>n!=null)),Y(this,"_abiCoder",Sr(new.target,"getAbiCoder")()),Y(this,"functions",{}),Y(this,"errors",{}),Y(this,"events",{}),Y(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Gt.warn("duplicate definition - constructor");return}Y(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Gt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||Y(this,"deploy",Rn.from({payable:!1,type:"constructor"})),Y(this,"_isInterface",!0)}format(e){e||(e=ot.full),e===ot.sighash&&Gt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===ot.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return Vm}static getAddress(e){return xt(e)}static getSighash(e){return or(zi(e.format()),0,4)}static getEventTopic(e){return zi(e.format())}getFunction(e){if(je(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Gt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Gt.throwArgumentError("no matching function","name",n):i.length>1&&Gt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[Nn.fromString(e).format()];return r||Gt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(je(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Gt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Gt.throwArgumentError("no matching event","name",n):i.length>1&&Gt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[Jn.fromString(e).format()];return r||Gt.throwArgumentError("no matching event","signature",e),r}getError(e){if(je(e)){const n=Sr(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Gt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Gt.throwArgumentError("no matching error","name",n):i.length>1&&Gt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[Nn.fromString(e).format()];return r||Gt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Sr(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Sr(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=ue(r);return he(n.slice(0,4))!==this.getSighash(e)&&Gt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",he(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),he(Ut([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=ue(r);return he(n.slice(0,4))!==this.getSighash(e)&&Gt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",he(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),he(Ut([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=ue(r),i=null,s="",a=null,o=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const f=he(n.slice(0,4)),u=l3[f];if(u)a=this._abiCoder.decode(u.inputs,n.slice(4)),o=u.name,c=u.signature,u.reason&&(i=a[0]),o==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const d=this.getError(f);a=this._abiCoder.decode(d.inputs,n.slice(4)),o=d.name,c=d.format()}catch{}break}}return Gt.throwError("call revert exception"+s,j.errors.CALL_EXCEPTION,{method:e.format(),data:he(r),errorArgs:a,errorName:o,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),he(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Gt.throwError("too many arguments for "+e.format(),j.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,a)=>s.type==="string"?zi(a):s.type==="bytes"?Pt(he(a)):(s.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),s.type.match(/^u?int/)&&(a=fe.from(a).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[a]),Lt(he(a),32));for(r.forEach((s,a)=>{let o=e.inputs[a];if(!o.indexed){s!=null&&Gt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?Gt.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(c=>i(o,c))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Gt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((a,o)=>{const c=r[o];if(a.indexed)if(a.type==="string")n.push(zi(c));else if(a.type==="bytes")n.push(Pt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[c]))}else i.push(a),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let g=this.getEventTopic(e);(!je(n[0],32)||n[0].toLowerCase()!==g)&&Gt.throwError("fragment/topic mismatch",j.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:g,value:n[0]}),n=n.slice(1)}let i=[],s=[],a=[];e.inputs.forEach((g,b)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(gr.fromObject({type:"bytes32",name:g.name})),a.push(!0)):(i.push(g),a.push(!1)):(s.push(g),a.push(!1))});let o=n!=null?this._abiCoder.decode(i,Ut(n)):null,c=this._abiCoder.decode(s,r,!0),f=[],u=0,d=0;e.inputs.forEach((g,b)=>{if(g.indexed)if(o==null)f[b]=new Uc({_isIndexed:!0,hash:null});else if(a[b])f[b]=new Uc({_isIndexed:!0,hash:o[d++]});else try{f[b]=o[d++]}catch(E){f[b]=E}else try{f[b]=c[u++]}catch(E){f[b]=E}if(g.name&&f[g.name]==null){const E=f[b];E instanceof Error?Object.defineProperty(f,g.name,{enumerable:!0,get:()=>{throw np(`property ${JSON.stringify(g.name)}`,E)}}):f[g.name]=E}});for(let g=0;g<f.length;g++){const b=f[g];b instanceof Error&&Object.defineProperty(f,g,{enumerable:!0,get:()=>{throw np(`index ${g}`,b)}})}return Object.freeze(f)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new sb({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:fe.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new ib({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=he(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new u3({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const d3="abstract-provider/5.7.0";var h3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const p3=new j(d3);class g3 extends Cs{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Rs{constructor(){p3.checkAbstract(new.target,Rs),Y(this,"_isProvider",!0)}getFeeData(){return h3(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield tr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=fe.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const y3="abstract-signer/5.7.0";var Pn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const yn=new j(y3),m3=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],b3=[j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED];class Ii{constructor(){yn.checkAbstract(new.target,Ii),Y(this,"_isSigner",!0)}getBalance(e){return Pn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Pn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Pn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield tr(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Pn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield tr(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Pn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Pn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Pn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Pn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Pn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)m3.indexOf(n)===-1&&yn.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=zt(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&yn.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Pn(this,void 0,void 0,function*(){const r=yield tr(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Pn(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&yn.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?yn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&yn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&yn.throwError("network does not support EIP-1559",j.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):yn.throwError("failed to get consistent fee data",j.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(b3.indexOf(i.code)>=0)throw i;return yn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&yn.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield tr(r)})}_checkProvider(e){this.provider||yn.throwError("missing provider",j.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Lo extends Ii{constructor(e,r){super(),Y(this,"address",e),Y(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{yn.throwError(e,j.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Lo(this.address,e)}}function Ea(t,e,r){return r={path:e,exports:{},require:function(n,i){return x3(n,i??r.path)}},t(r,r.exports),r.exports}function x3(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Vd=ab;function ab(t,e){if(!t)throw new Error(e||"Assertion failed")}ab.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Bn=Ea(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var f=0;f<a.length;f++)c[f]=a[f]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var f=0;f<a.length;f+=2)c.push(parseInt(a[f]+a[f+1],16))}else for(var f=0;f<a.length;f++){var u=a.charCodeAt(f),d=u>>8,g=u&255;d?c.push(d,g):c.push(g)}return c}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function s(a){for(var o="",c=0;c<a.length;c++)o+=i(a[c].toString(16));return o}r.toHex=s,r.encode=function(o,c){return c==="hex"?s(o):o}}),ln=Ea(function(t,e){var r=e;r.assert=Vd,r.toArray=Bn.toArray,r.zero2=Bn.zero2,r.toHex=Bn.toHex,r.encode=Bn.encode;function n(c,f,u){var d=new Array(Math.max(c.bitLength(),u)+1);d.fill(0);for(var g=1<<f+1,b=c.clone(),E=0;E<d.length;E++){var w,y=b.andln(g-1);b.isOdd()?(y>(g>>1)-1?w=(g>>1)-y:w=y,b.isubn(w)):w=0,d[E]=w,b.iushrn(1)}return d}r.getNAF=n;function i(c,f){var u=[[],[]];c=c.clone(),f=f.clone();for(var d=0,g=0,b;c.cmpn(-d)>0||f.cmpn(-g)>0;){var E=c.andln(3)+d&3,w=f.andln(3)+g&3;E===3&&(E=-1),w===3&&(w=-1);var y;(E&1)===0?y=0:(b=c.andln(7)+d&7,(b===3||b===5)&&w===2?y=-E:y=E),u[0].push(y);var _;(w&1)===0?_=0:(b=f.andln(7)+g&7,(b===3||b===5)&&E===2?_=-w:_=w),u[1].push(_),2*d===y+1&&(d=1-d),2*g===_+1&&(g=1-g),c.iushrn(1),f.iushrn(1)}return u}r.getJSF=i;function s(c,f,u){var d="_"+f;c.prototype[f]=function(){return this[d]!==void 0?this[d]:this[d]=u.call(this)}}r.cachedProperty=s;function a(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=a;function o(c){return new Ue(c,"hex","le")}r.intFromLE=o}),Lc=ln.getNAF,v3=ln.getJSF,Fc=ln.assert;function os(t,e){this.type=t,this.p=new Ue(e.p,16),this.red=e.prime?Ue.red(e.prime):Ue.mont(this.p),this.zero=new Ue(0).toRed(this.red),this.one=new Ue(1).toRed(this.red),this.two=new Ue(2).toRed(this.red),this.n=e.n&&new Ue(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ns=os;os.prototype.point=function(){throw new Error("Not implemented")};os.prototype.validate=function(){throw new Error("Not implemented")};os.prototype._fixedNafMul=function(e,r){Fc(e.precomputed);var n=e._getDoubles(),i=Lc(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,c;for(o=0;o<i.length;o+=n.step){c=0;for(var f=o+n.step-1;f>=o;f--)c=(c<<1)+i[f];a.push(c)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),g=s;g>0;g--){for(o=0;o<a.length;o++)c=a[o],c===g?d=d.mixedAdd(n.points[o]):c===-g&&(d=d.mixedAdd(n.points[o].neg()));u=u.add(d)}return u.toP()};os.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=Lc(r,n,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var f=0;c>=0&&a[c]===0;c--)f++;if(c>=0&&f++,o=o.dblp(f),c<0)break;var u=a[c];Fc(u!==0),e.type==="affine"?u>0?o=o.mixedAdd(s[u-1>>1]):o=o.mixedAdd(s[-u-1>>1].neg()):u>0?o=o.add(s[u-1>>1]):o=o.add(s[-u-1>>1].neg())}return e.type==="affine"?o.toP():o};os.prototype._wnafMulAdd=function(e,r,n,i,s){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,f=0,u,d,g;for(u=0;u<i;u++){g=r[u];var b=g._getNAFPoints(e);a[u]=b.wnd,o[u]=b.points}for(u=i-1;u>=1;u-=2){var E=u-1,w=u;if(a[E]!==1||a[w]!==1){c[E]=Lc(n[E],a[E],this._bitLength),c[w]=Lc(n[w],a[w],this._bitLength),f=Math.max(c[E].length,f),f=Math.max(c[w].length,f);continue}var y=[r[E],null,null,r[w]];r[E].y.cmp(r[w].y)===0?(y[1]=r[E].add(r[w]),y[2]=r[E].toJ().mixedAdd(r[w].neg())):r[E].y.cmp(r[w].y.redNeg())===0?(y[1]=r[E].toJ().mixedAdd(r[w]),y[2]=r[E].add(r[w].neg())):(y[1]=r[E].toJ().mixedAdd(r[w]),y[2]=r[E].toJ().mixedAdd(r[w].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],A=v3(n[E],n[w]);for(f=Math.max(A[0].length,f),c[E]=new Array(f),c[w]=new Array(f),d=0;d<f;d++){var B=A[0][d]|0,N=A[1][d]|0;c[E][d]=_[(B+1)*3+(N+1)],c[w][d]=0,o[E]=y}}var O=this.jpoint(null,null,null),U=this._wnafT4;for(u=f;u>=0;u--){for(var H=0;u>=0;){var V=!0;for(d=0;d<i;d++)U[d]=c[d][u]|0,U[d]!==0&&(V=!1);if(!V)break;H++,u--}if(u>=0&&H++,O=O.dblp(H),u<0)break;for(d=0;d<i;d++){var re=U[d];re!==0&&(re>0?g=o[d][re-1>>1]:re<0&&(g=o[d][-re-1>>1].neg()),g.type==="affine"?O=O.mixedAdd(g):O=O.add(g))}}for(u=0;u<i;u++)o[u]=null;return s?O:O.toP()};function _n(t,e){this.curve=t,this.type=e,this.precomputed=null}os.BasePoint=_n;_n.prototype.eq=function(){throw new Error("Not implemented")};_n.prototype.validate=function(){return this.curve.validate(this)};os.prototype.decodePoint=function(e,r){e=ln.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Fc(e[e.length-1]%2===0):e[0]===7&&Fc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};_n.prototype.encodeCompressed=function(e){return this.encode(e,!0)};_n.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};_n.prototype.encode=function(e,r){return ln.encode(this._encode(r),e)};_n.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};_n.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};_n.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};_n.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};_n.prototype._getBeta=function(){return null};_n.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Jd=Ea(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),w3=ln.assert;function En(t){Ns.call(this,"short",t),this.a=new Ue(t.a,16).toRed(this.red),this.b=new Ue(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Jd(En,Ns);var _3=En;En.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ue(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ue(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],w3(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Ue(o.a,16),b:new Ue(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};En.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ue.mont(e),n=new Ue(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ue(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};En.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ue(1),a=new Ue(0),o=new Ue(0),c=new Ue(1),f,u,d,g,b,E,w,y=0,_,A;n.cmpn(0)!==0;){var B=i.div(n);_=i.sub(B.mul(n)),A=o.sub(B.mul(s));var N=c.sub(B.mul(a));if(!d&&_.cmp(r)<0)f=w.neg(),u=s,d=_.neg(),g=A;else if(d&&++y===2)break;w=_,i=n,n=_,o=s,s=A,c=a,a=N}b=_.neg(),E=A;var O=d.sqr().add(g.sqr()),U=b.sqr().add(E.sqr());return U.cmp(O)>=0&&(b=f,E=u),d.negative&&(d=d.neg(),g=g.neg()),b.negative&&(b=b.neg(),E=E.neg()),[{a:d,b:g},{a:b,b:E}]};En.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),c=a.mul(i.a),f=s.mul(n.b),u=a.mul(i.b),d=e.sub(o).sub(c),g=f.add(u).neg();return{k1:d,k2:g}};En.prototype.pointFromX=function(e,r){e=new Ue(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};En.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};En.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),c=e[a],f=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),f=f.neg(!0)),i[a*2]=c,i[a*2+1]=f,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var u=this._wnafMulAdd(1,i,s,a*2,n),d=0;d<a*2;d++)i[d]=null,s[d]=null;return u};function vr(t,e,r,n){Ns.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ue(e,16),this.y=new Ue(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Jd(vr,Ns.BasePoint);En.prototype.point=function(e,r,n){return new vr(this,e,r,n)};En.prototype.pointFromJSON=function(e,r){return vr.fromJSON(this,e,r)};vr.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};vr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};vr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};vr.prototype.isInfinity=function(){return this.inf};vr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};vr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};vr.prototype.getX=function(){return this.x.fromRed()};vr.prototype.getY=function(){return this.y.fromRed()};vr.prototype.mul=function(e){return e=new Ue(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};vr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};vr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};vr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};vr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};vr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Cr(t,e,r,n){Ns.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ue(0)):(this.x=new Ue(e,16),this.y=new Ue(r,16),this.z=new Ue(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Jd(Cr,Ns.BasePoint);En.prototype.jpoint=function(e,r,n){return new Cr(this,e,r,n)};Cr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Cr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Cr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),f=a.redSub(o);if(c.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),d=u.redMul(c),g=i.redMul(u),b=f.redSqr().redIAdd(d).redISub(g).redISub(g),E=f.redMul(g.redISub(b)).redISub(a.redMul(d)),w=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(b,E,w)};Cr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(i),c=s.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=o.redSqr(),u=f.redMul(o),d=n.redMul(f),g=c.redSqr().redIAdd(u).redISub(d).redISub(d),b=c.redMul(d.redISub(g)).redISub(s.redMul(u)),E=this.z.redMul(o);return this.curve.jpoint(g,b,E)};Cr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,c=this.z,f=c.redSqr().redSqr(),u=o.redAdd(o);for(r=0;r<e;r++){var d=a.redSqr(),g=u.redSqr(),b=g.redSqr(),E=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(f)),w=a.redMul(g),y=E.redSqr().redISub(w.redAdd(w)),_=w.redISub(y),A=E.redMul(_);A=A.redIAdd(A).redISub(b);var B=u.redMul(c);r+1<e&&(f=f.redMul(b)),a=y,c=B,u=A}return this.curve.jpoint(a,u.redMul(s),c)};Cr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Cr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i),f=c.redSqr().redISub(o).redISub(o),u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),e=f,r=c.redMul(o.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),g=this.y.redSqr(),b=g.redSqr(),E=this.x.redAdd(g).redSqr().redISub(d).redISub(b);E=E.redIAdd(E);var w=d.redAdd(d).redIAdd(d),y=w.redSqr(),_=b.redIAdd(b);_=_.redIAdd(_),_=_.redIAdd(_),e=y.redISub(E).redISub(E),r=w.redMul(E.redISub(e)).redISub(_),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Cr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=c.redSqr().redISub(o).redISub(o);e=f;var u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(o.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),g=this.y.redSqr(),b=this.x.redMul(g),E=this.x.redSub(d).redMul(this.x.redAdd(d));E=E.redAdd(E).redIAdd(E);var w=b.redIAdd(b);w=w.redIAdd(w);var y=w.redAdd(w);e=E.redSqr().redISub(y),n=this.y.redAdd(this.z).redSqr().redISub(g).redISub(d);var _=g.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_),r=E.redMul(w.redISub(e)).redISub(_)}return this.curve.jpoint(e,r,n)};Cr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),f=r.redAdd(r);f=f.redIAdd(f);var u=f.redMul(o),d=c.redSqr().redISub(u.redAdd(u)),g=u.redISub(d),b=o.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var E=c.redMul(g).redISub(b),w=n.redAdd(n).redMul(i);return this.curve.jpoint(d,E,w)};Cr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=s.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(f),d=r.redMul(u);d=d.redIAdd(d),d=d.redIAdd(d);var g=this.x.redMul(c).redISub(d);g=g.redIAdd(g),g=g.redIAdd(g);var b=this.y.redMul(u.redMul(f.redISub(u)).redISub(o.redMul(c)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var E=this.z.redAdd(o).redSqr().redISub(n).redISub(c);return this.curve.jpoint(g,b,E)};Cr.prototype.mul=function(e,r){return e=new Ue(e,r),this.curve._wnafMul(this,e)};Cr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Cr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Cr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Cr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var xc=Ea(function(t,e){var r=e;r.base=Ns,r.short=_3,r.mont=null,r.edwards=null}),vc=Ea(function(t,e){var r=e,n=ln.assert;function i(o){o.type==="short"?this.curve=new xc.short(o):o.type==="edwards"?this.curve=new xc.edwards(o):this.curve=new xc.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(o,c){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var f=new i(c);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:f}),f}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Vr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Vr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Vr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Vr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Vr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Vr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Wi(t){if(!(this instanceof Wi))return new Wi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Bn.toArray(t.entropy,t.entropyEnc||"hex"),r=Bn.toArray(t.nonce,t.nonceEnc||"hex"),n=Bn.toArray(t.pers,t.persEnc||"hex");Vd(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var ob=Wi;Wi.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Wi.prototype._hmac=function(){return new Vr.hmac(this.hash,this.K)};Wi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Wi.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Bn.toArray(e,r),n=Bn.toArray(n,i),Vd(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Wi.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Bn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Bn.encode(a,r)};var Nl=ln.assert;function Ur(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Wd=Ur;Ur.fromPublic=function(e,r,n){return r instanceof Ur?r:new Ur(e,{pub:r,pubEnc:n})};Ur.fromPrivate=function(e,r,n){return r instanceof Ur?r:new Ur(e,{priv:r,privEnc:n})};Ur.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ur.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Ur.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Ur.prototype._importPrivate=function(e,r){this.priv=new Ue(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Ur.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Nl(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Nl(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Ur.prototype.derive=function(e){return e.validate()||Nl(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Ur.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Ur.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Ur.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var E3=ln.assert;function gf(t,e){if(t instanceof gf)return t;this._importDER(t,e)||(E3(t.r&&t.s,"Signature without r or s"),this.r=new Ue(t.r,16),this.s=new Ue(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var yf=gf;function A3(){this.place=0}function yu(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function ip(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}gf.prototype._importDER=function(e,r){e=ln.toArray(e,r);var n=new A3;if(e[n.place++]!==48)return!1;var i=yu(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=yu(e,n);if(s===!1)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=yu(e,n);if(o===!1||e.length!==o+n.place)return!1;var c=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Ue(a),this.s=new Ue(c),this.recoveryParam=null,!0};function mu(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}gf.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=ip(r),n=ip(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];mu(i,r.length),i=i.concat(r),i.push(2),mu(i,n.length);var s=i.concat(n),a=[48];return mu(a,s.length),a=a.concat(s),ln.encode(a,e)};var S3=function(){throw new Error("unsupported")},cb=ln.assert;function vn(t){if(!(this instanceof vn))return new vn(t);typeof t=="string"&&(cb(Object.prototype.hasOwnProperty.call(vc,t),"Unknown curve "+t),t=vc[t]),t instanceof vc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var T3=vn;vn.prototype.keyPair=function(e){return new Wd(this,e)};vn.prototype.keyFromPrivate=function(e,r){return Wd.fromPrivate(this,e,r)};vn.prototype.keyFromPublic=function(e,r){return Wd.fromPublic(this,e,r)};vn.prototype.genKeyPair=function(e){e||(e={});for(var r=new ob({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||S3(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Ue(2));;){var s=new Ue(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};vn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};vn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Ue(e,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),o=e.toArray("be",s),c=new ob({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new Ue(1)),u=0;;u++){var d=i.k?i.k(u):new Ue(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var g=this.g.mul(d);if(!g.isInfinity()){var b=g.getX(),E=b.umod(this.n);if(E.cmpn(0)!==0){var w=d.invm(this.n).mul(E.mul(r.getPrivate()).iadd(e));if(w=w.umod(this.n),w.cmpn(0)!==0){var y=(g.getY().isOdd()?1:0)|(b.cmp(E)!==0?2:0);return i.canonical&&w.cmp(this.nh)>0&&(w=this.n.sub(w),y^=1),new yf({r:E,s:w,recoveryParam:y})}}}}}};vn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Ue(e,16)),n=this.keyFromPublic(n,i),r=new yf(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),c=o.mul(e).umod(this.n),f=o.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};vn.prototype.recoverPubKey=function(t,e,r,n){cb((3&r)===r,"The recovery param is more than two bits"),e=new yf(e,n);var i=this.n,s=new Ue(t),a=e.r,o=e.s,c=r&1,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var u=e.r.invm(i),d=i.sub(s).mul(u).umod(i),g=o.mul(u).umod(i);return this.g.mulAdd(d,a,g)};vn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new yf(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var k3=Ea(function(t,e){var r=e;r.version="6.5.4",r.utils=ln,r.rand=function(){throw new Error("unsupported")},r.curve=xc,r.curves=vc,r.ec=T3,r.eddsa=null}),P3=k3.ec;const C3="signing-key/5.7.0",Bl=new j(C3);let bu=null;function Vn(){return bu||(bu=new P3("secp256k1")),bu}class ms{constructor(e){Y(this,"curve","secp256k1"),Y(this,"privateKey",he(e)),ni(this.privateKey)!==32&&Bl.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Vn().keyFromPrivate(ue(this.privateKey));Y(this,"publicKey","0x"+r.getPublic(!1,"hex")),Y(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Y(this,"_isSigningKey",!0)}_addPoint(e){const r=Vn().keyFromPublic(ue(this.publicKey)),n=Vn().keyFromPublic(ue(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Vn().keyFromPrivate(ue(this.privateKey)),n=ue(e);n.length!==32&&Bl.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Ps({recoveryParam:i.recoveryParam,r:Lt("0x"+i.r.toString(16),32),s:Lt("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Vn().keyFromPrivate(ue(this.privateKey)),n=Vn().keyFromPublic(ue(Yd(e)));return Lt("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function fb(t,e){const r=Ps(e),n={r:ue(r.r),s:ue(r.s)};return"0x"+Vn().recoverPubKey(ue(t),n,r.recoveryParam).encode("hex",!1)}function Yd(t,e){const r=ue(t);if(r.length===32){const n=new ms(r);return e?"0x"+Vn().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?he(r):"0x"+Vn().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Vn().keyFromPublic(r).getPublic(!0,"hex"):he(r)}return Bl.throwArgumentError("invalid public or private key","key","[REDACTED]")}const I3="transactions/5.7.0",Dr=new j(I3);var Ml;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Ml||(Ml={}));function Xd(t){return t==="0x"?null:xt(t)}function Or(t){return t==="0x"?Ld:fe.from(t)}const R3=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],N3={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ji(t){const e=Yd(t);return xt(or(Pt(or(e,1)),12))}function Fo(t,e){return Ji(fb(ue(t),e))}function an(t,e){const r=Qn(fe.from(t).toHexString());return r.length>32&&Dr.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function xu(t,e){return{address:xt(t),storageKeys:(e||[]).map((r,n)=>(ni(r)!==32&&Dr.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function cs(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Dr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),xu(r[0],r[1])):xu(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return xu(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function ub(t){return cs(t).map(e=>[e.address,e.storageKeys])}function lb(t,e){if(t.gasPrice!=null){const n=fe.from(t.gasPrice),i=fe.from(t.maxFeePerGas||0);n.eq(i)||Dr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[an(t.chainId||0,"chainId"),an(t.nonce||0,"nonce"),an(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),an(t.maxFeePerGas||0,"maxFeePerGas"),an(t.gasLimit||0,"gasLimit"),t.to!=null?xt(t.to):"0x",an(t.value||0,"value"),t.data||"0x",ub(t.accessList||[])];if(e){const n=Ps(e);r.push(an(n.recoveryParam,"recoveryParam")),r.push(Qn(n.r)),r.push(Qn(n.s))}return jr(["0x02",ws(r)])}function db(t,e){const r=[an(t.chainId||0,"chainId"),an(t.nonce||0,"nonce"),an(t.gasPrice||0,"gasPrice"),an(t.gasLimit||0,"gasLimit"),t.to!=null?xt(t.to):"0x",an(t.value||0,"value"),t.data||"0x",ub(t.accessList||[])];if(e){const n=Ps(e);r.push(an(n.recoveryParam,"recoveryParam")),r.push(Qn(n.r)),r.push(Qn(n.s))}return jr(["0x01",ws(r)])}function B3(t,e){Od(t,N3);const r=[];R3.forEach(function(a){let o=t[a.name]||[];const c={};a.numeric&&(c.hexPad="left"),o=ue(he(o,c)),a.length&&o.length!==a.length&&o.length>0&&Dr.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o),a.maxLength&&(o=Qn(o),o.length>a.maxLength&&Dr.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o)),r.push(he(o))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&Dr.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!Oo(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(he(n)),r.push("0x"),r.push("0x")),!e)return ws(r);const i=Ps(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&Dr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&Dr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(he(s)),r.push(Qn(ue(i.r))),r.push(Qn(ue(i.s))),ws(r)}function Ol(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&Dr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),B3(t,e);switch(t.type){case 1:return db(t,e);case 2:return lb(t,e)}return Dr.throwError(`unsupported transaction type: ${t.type}`,j.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function hb(t,e,r){try{const n=Or(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Dr.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Lt(e[1],32),t.s=Lt(e[2],32);try{const n=Pt(r(t));t.from=Fo(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function M3(t){const e=df(t.slice(1));e.length!==9&&e.length!==12&&Dr.throwArgumentError("invalid component count for transaction type: 2","payload",he(t));const r=Or(e[2]),n=Or(e[3]),i={type:2,chainId:Or(e[0]).toNumber(),nonce:Or(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Or(e[4]),to:Xd(e[5]),value:Or(e[6]),data:e[7],accessList:cs(e[8])};return e.length===9||(i.hash=Pt(t),hb(i,e.slice(9),lb)),i}function O3(t){const e=df(t.slice(1));e.length!==8&&e.length!==11&&Dr.throwArgumentError("invalid component count for transaction type: 1","payload",he(t));const r={type:1,chainId:Or(e[0]).toNumber(),nonce:Or(e[1]).toNumber(),gasPrice:Or(e[2]),gasLimit:Or(e[3]),to:Xd(e[4]),value:Or(e[5]),data:e[6],accessList:cs(e[7])};return e.length===8||(r.hash=Pt(t),hb(r,e.slice(8),db)),r}function D3(t){const e=df(t);e.length!==9&&e.length!==6&&Dr.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:Or(e[0]).toNumber(),gasPrice:Or(e[1]),gasLimit:Or(e[2]),to:Xd(e[3]),value:Or(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=fe.from(e[6]).toNumber()}catch{return r}if(r.r=Lt(e[7],32),r.s=Lt(e[8],32),fe.from(r.r).isZero()&&fe.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(he(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=Pt(ws(i));try{r.from=Fo(s,{r:he(r.r),s:he(r.s),recoveryParam:n})}catch{}r.hash=Pt(t)}return r.type=null,r}function pb(t){const e=ue(t);if(e[0]>127)return D3(e);switch(e[0]){case 1:return O3(e);case 2:return M3(e)}return Dr.throwError(`unsupported transaction type: ${e[0]}`,j.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const U3="contracts/5.7.0";var Yi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const kt=new j(U3),L3={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function jc(t,e){return Yi(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&kt.throwArgumentError("invalid address or ENS name","name",r);try{return xt(r)}catch{}t||kt.throwError("a provider or signer is needed to resolve ENS names",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&kt.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function ro(t,e,r){return Yi(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>ro(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield jc(t,e):r.type==="tuple"?yield ro(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>ro(t,n,r.arrayChildren))):Promise.reject(kt.makeError("invalid value for array",j.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function mf(t,e,r){return Yi(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=zt(r.pop())),kt.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=tr({override:jc(t.signer,n.from),signer:t.signer.getAddress()}).then(f=>Yi(this,void 0,void 0,function*(){return xt(f.signer)!==f.override&&kt.throwError("Contract with a Signer cannot override from",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),f.override})):n.from=t.signer.getAddress():n.from&&(n.from=jc(t.provider,n.from));const i=yield tr({args:ro(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:tr(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),a={data:s,to:i.address},o=i.overrides;if(o.nonce!=null&&(a.nonce=fe.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=fe.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=fe.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=fe.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=fe.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=cs(o.accessList)),a.gasLimit==null&&e.gas!=null){let f=21e3;const u=ue(s);for(let d=0;d<u.length;d++)f+=4,u[d]&&(f+=64);a.gasLimit=fe.from(e.gas).add(f)}if(o.value){const f=fe.from(o.value);!f.isZero()&&!e.payable&&kt.throwError("non-payable method cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=f}o.customData&&(a.customData=zt(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(f=>n[f]!=null);return c.length&&kt.throwError(`cannot override ${c.map(f=>JSON.stringify(f)).join(",")}`,j.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),a})}function F3(t,e){return function(...r){return mf(t,e,r)}}function j3(t,e){const r=t.signer||t.provider;return function(...n){return Yi(this,void 0,void 0,function*(){r||kt.throwError("estimate require a provider or signer",j.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield mf(t,e,n);return yield r.estimateGas(i)})}}function gb(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let a=qr(s),o=null;try{o=t.interface.parseLog(s)}catch{}return o&&(a.args=o.args,a.decode=(c,f)=>t.interface.decodeEventLog(o.eventFragment,c,f),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(i.blockHash),a.getTransaction=()=>t.provider.getTransaction(i.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(i),a}),i))}function yb(t,e,r){const n=t.signer||t.provider;return function(...i){return Yi(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=zt(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const a=yield mf(t,e,i),o=yield n.call(a,s);try{let c=t.interface.decodeFunctionResult(e,o);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===j.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=a),c}})}}function K3(t,e){return function(...r){return Yi(this,void 0,void 0,function*(){t.signer||kt.throwError("sending a transaction requires a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield mf(t,e,r),i=yield t.signer.sendTransaction(n);return gb(t,i),i})}}function sp(t,e,r){return e.constant?yb(t,e,r):K3(t,e)}function mb(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class yo{constructor(e,r){Y(this,"tag",e),Y(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class $3 extends yo{constructor(){super("error",null)}}class ap extends yo{constructor(e,r,n,i){const s={address:e};let a=r.getEventTopic(n);i?(a!==i[0]&&kt.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[a],super(mb(s),s),Y(this,"address",e),Y(this,"interface",r),Y(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Im(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class op extends yo{constructor(e,r){super("*",{address:e}),Y(this,"address",e),Y(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class Qd{constructor(e,r,n){Y(this,"interface",Sr(new.target,"getInterface")(r)),n==null?(Y(this,"provider",null),Y(this,"signer",null)):Ii.isSigner(n)?(Y(this,"provider",n.provider||null),Y(this,"signer",n)):Rs.isProvider(n)?(Y(this,"provider",n),Y(this,"signer",null)):kt.throwArgumentError("invalid signer or provider","signerOrProvider",n),Y(this,"callStatic",{}),Y(this,"estimateGas",{}),Y(this,"functions",{}),Y(this,"populateTransaction",{}),Y(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const c=this.interface.events[o];Y(this.filters,o,(...f)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,f)})),a[c.name]||(a[c.name]=[]),a[c.name].push(o)}),Object.keys(a).forEach(o=>{const c=a[o];c.length===1?Y(this.filters,o,this.filters[c[0]]):kt.warn(`Duplicate definition of ${o} (${c.join(", ")})`)})}if(Y(this,"_runningEvents",{}),Y(this,"_wrappedEmits",{}),e==null&&kt.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Y(this,"address",e),this.provider)Y(this,"resolvedAddress",jc(this.provider,e));else try{Y(this,"resolvedAddress",Promise.resolve(xt(e)))}catch{kt.throwError("provider is required to use ENS name as contract address",j.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const i={},s={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(s[a]){kt.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}s[a]=!0;{const c=o.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(a)}this[a]==null&&Y(this,a,sp(this,o,!0)),this.functions[a]==null&&Y(this.functions,a,sp(this,o,!1)),this.callStatic[a]==null&&Y(this.callStatic,a,yb(this,o,!0)),this.populateTransaction[a]==null&&Y(this.populateTransaction,a,F3(this,o)),this.estimateGas[a]==null&&Y(this.estimateGas,a,j3(this,o))}),Object.keys(i).forEach(a=>{const o=i[a];if(o.length>1)return;a=a.substring(1);const c=o[0];try{this[a]==null&&Y(this,a,this[c])}catch{}this.functions[a]==null&&Y(this.functions,a,this.functions[c]),this.callStatic[a]==null&&Y(this.callStatic,a,this.callStatic[c]),this.populateTransaction[a]==null&&Y(this.populateTransaction,a,this.populateTransaction[c]),this.estimateGas[a]==null&&Y(this.estimateGas,a,this.estimateGas[c])})}static getContractAddress(e){return hf(e)}static getInterface(e){return Rl.isInterface(e)?e:new Rl(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&kt.throwError("contract not deployed",j.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||kt.throwError("sending a transactions require a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=zt(e||{});return["from","to"].forEach(function(n){r[n]!=null&&kt.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Lo(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Y(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Uc.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new $3);if(e==="event")return this._normalizeRunningEvent(new yo("event",null));if(e==="*")return this._normalizeRunningEvent(new op(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new ap(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new ap(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new yo(mb(r),r))}return this._normalizeRunningEvent(new op(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=qr(r);return i.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||kt.throwError("events require a provider or a signer with a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let a=this._wrapEvent(e,s,r);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=zt(i.filter);return typeof r=="string"&&je(r,32)?(n!=null&&kt.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(a=>a.map(o=>this._wrapEvent(i,o,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Kc extends Qd{}class bb{constructor(e,r,n){let i=null;typeof r=="string"?i=r:as(r)?i=he(r):r&&typeof r.object=="string"?i=r.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!je(i)||i.length%2)&&kt.throwArgumentError("invalid bytecode","bytecode",r),n&&!Ii.isSigner(n)&&kt.throwArgumentError("invalid signer","signer",n),Y(this,"bytecode",i),Y(this,"interface",Sr(new.target,"getInterface")(e)),Y(this,"signer",n||null)}getDeployTransaction(...e){let r={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){r=zt(e.pop());for(const n in r)if(!L3[n])throw new Error("unknown transaction override "+n)}return["data","from","to"].forEach(n=>{r[n]!=null&&kt.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.value&&!fe.from(r.value).isZero()&&!this.interface.deploy.payable&&kt.throwError("non-payable constructor cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),kt.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),r.data=he(Ut([this.bytecode,this.interface.encodeDeploy(e)])),r}deploy(...e){return Yi(this,void 0,void 0,function*(){let r={};e.length===this.interface.deploy.inputs.length+1&&(r=e.pop()),kt.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const n=yield ro(this.signer,e,this.interface.deploy.inputs);n.push(r);const i=this.getDeployTransaction(...n),s=yield this.signer.sendTransaction(i),a=Sr(this.constructor,"getContractAddress")(s),o=Sr(this.constructor,"getContract")(a,this.interface,this.signer);return gb(o,s),Y(o,"deployTransaction",s),o})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,r){e==null&&kt.throwError("missing compiler output",j.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,r)}static getInterface(e){return Kc.getInterface(e)}static getContractAddress(e){return hf(e)}static getContract(e,r,n){return new Kc(e,r,n)}}class xb{constructor(e){Y(this,"alphabet",e),Y(this,"base",e.length),Y(this,"_alphabetMap",{}),Y(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ue(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let a=r[s];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let a=0;a<r.length;++a)s+=r[a]*this.base,r[a]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ue(new Uint8Array(r.reverse()))}}new xb("abcdefghijklmnopqrstuvwxyz234567");const ua=new xb("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var la;(function(t){t.sha256="sha256",t.sha512="sha512"})(la||(la={}));const q3="sha2/5.7.0",H3=new j(q3);function vb(t){return"0x"+Vr.ripemd160().update(ue(t)).digest("hex")}function Ti(t){return"0x"+Vr.sha256().update(ue(t)).digest("hex")}function z3(t){return"0x"+Vr.sha512().update(ue(t)).digest("hex")}function mo(t,e,r){return la[t]||H3.throwError("unsupported algorithm "+t,j.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+Vr.hmac(Vr[t],ue(e)).update(ue(r)).digest("hex")}function Zd(t,e,r,n,i){t=ue(t),e=ue(e);let s,a=1;const o=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let f,u;for(let d=1;d<=a;d++){c[e.length]=d>>24&255,c[e.length+1]=d>>16&255,c[e.length+2]=d>>8&255,c[e.length+3]=d&255;let g=ue(mo(i,t,c));s||(s=g.length,u=new Uint8Array(s),a=Math.ceil(n/s),f=n-(a-1)*s),u.set(g);for(let w=1;w<r;w++){g=ue(mo(i,t,g));for(let y=0;y<s;y++)u[y]^=g[y]}const b=(d-1)*s,E=d===a?f:s;o.set(ue(u).slice(0,E),b)}return he(o)}const G3="wordlists/5.7.0",V3=new j(G3);class Bs{constructor(e){V3.checkAbstract(new.target,Bs),Y(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return zi(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const J3="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let no=null;function cp(t){if(no==null&&(no=J3.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Bs.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw no=null,new Error("BIP39 Wordlist for en (English) FAILED")}class W3 extends Bs{constructor(){super("en")}getWord(e){return cp(this),no[e]}getWordIndex(e){return cp(this),no.indexOf(e)}}const wb=new W3;Bs.register(wb);const $c={en:wb},Y3="hdnode/5.7.0",bo=new j(Y3),X3=fe.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Q3=fr("Bitcoin seed"),Zs=2147483648;function _b(t){return(1<<t)-1<<8-t}function Z3(t){return(1<<t)-1}function nc(t){return Lt(he(t),32)}function fp(t){return ua.encode(Ut([t,or(Ti(Ti(t)),0,4)]))}function eh(t){if(t==null)return $c.en;if(typeof t=="string"){const e=$c[t];return e==null&&bo.throwArgumentError("unknown locale","wordlist",t),e}return t}const Ks={},da="m/44'/60'/0'/0/0";class on{constructor(e,r,n,i,s,a,o,c){if(e!==Ks)throw new Error("HDNode constructor cannot be called directly");if(r){const f=new ms(r);Y(this,"privateKey",f.privateKey),Y(this,"publicKey",f.compressedPublicKey)}else Y(this,"privateKey",null),Y(this,"publicKey",he(n));Y(this,"parentFingerprint",i),Y(this,"fingerprint",or(vb(Ti(this.publicKey)),0,4)),Y(this,"address",Ji(this.publicKey)),Y(this,"chainCode",s),Y(this,"index",a),Y(this,"depth",o),c==null?(Y(this,"mnemonic",null),Y(this,"path",null)):typeof c=="string"?(Y(this,"mnemonic",null),Y(this,"path",c)):(Y(this,"mnemonic",c),Y(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return fp(Ut([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",he(this.depth),this.parentFingerprint,Lt(he(this.index),4),this.chainCode,this.privateKey!=null?Ut(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new on(Ks,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~Zs));const n=new Uint8Array(37);if(e&Zs){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(ue(this.privateKey),1),r&&(r+="'")}else n.set(ue(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const i=ue(mo(la.sha512,this.chainCode,n)),s=i.slice(0,32),a=i.slice(32);let o=null,c=null;this.privateKey?o=nc(fe.from(s).add(this.privateKey).mod(X3)):c=new ms(he(s))._addPoint(this.publicKey);let f=r;const u=this.mnemonic;return u&&(f=Object.freeze({phrase:u.phrase,path:r,locale:u.locale||"en"})),new on(Ks,o,c,this.fingerprint,nc(a),e,this.depth+1,f)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const a=parseInt(s.substring(0,s.length-1));if(a>=Zs)throw new Error("invalid path index - "+s);n=n._derive(Zs+a)}else if(s.match(/^[0-9]+$/)){const a=parseInt(s);if(a>=Zs)throw new Error("invalid path index - "+s);n=n._derive(a)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=ue(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=ue(mo(la.sha512,Q3,n));return new on(Ks,nc(i.slice(0,32)),null,"0x00000000",nc(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=eh(n),e=xf(bf(e,n),n),on._fromSeed(Eb(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return on._fromSeed(e,null)}static fromExtendedKey(e){const r=ua.decode(e);(r.length!==82||fp(r.slice(0,78))!==e)&&bo.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=he(r.slice(5,9)),s=parseInt(he(r.slice(9,13)).substring(2),16),a=he(r.slice(13,45)),o=r.slice(45,78);switch(he(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new on(Ks,null,he(o),i,a,s,n,null);case"0x0488ade4":case"0x04358394 ":if(o[0]!==0)break;return new on(Ks,he(o.slice(1)),null,i,a,s,n,null)}return bo.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Eb(t,e){e||(e="");const r=fr("mnemonic"+e,ii.NFKD);return Zd(fr(t,ii.NFKD),r,2048,64,"sha512")}function bf(t,e){e=eh(e),bo.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=ue(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let f=0;f<r.length;f++){let u=e.getWordIndex(r[f].normalize("NFKD"));if(u===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)u&1<<10-d&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,a=r.length/3,o=_b(a);if((ue(Ti(n.slice(0,s/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return he(n.slice(0,s/8))}function xf(t,e){if(e=eh(e),t=ue(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let a=0;a<t.length;a++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[a],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[a]>>8-n,r.push(t[a]&Z3(8-n)),n+=3);const i=t.length/4,s=ue(Ti(t))[0]&_b(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(a=>e.getWord(a)))}function e6(t,e){try{return bf(t,e),!0}catch{}return!1}function t6(t){return(typeof t!="number"||t<0||t>=Zs||t%1)&&bo.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const r6="random/5.7.0",Dl=new j(r6);function n6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Jh<"u")return Jh;throw new Error("unable to locate global object")}const up=n6();let wc=up.crypto||up.msCrypto;(!wc||!wc.getRandomValues)&&(Dl.warn("WARNING: Missing strong random number source"),wc={getRandomValues:function(t){return Dl.throwError("no secure random source avaialble",j.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function ra(t){(t<=0||t>1024||t%1||t!=t)&&Dl.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return wc.getRandomValues(e),ue(e)}function Ab(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var Sb={exports:{}};(function(t,e){(function(r){function n(x){return parseInt(x)===x}function i(x){if(!n(x.length))return!1;for(var p=0;p<x.length;p++)if(!n(x[p])||x[p]<0||x[p]>255)return!1;return!0}function s(x,p){if(x.buffer&&ArrayBuffer.isView(x)&&x.name==="Uint8Array")return p&&(x.slice?x=x.slice():x=Array.prototype.slice.call(x)),x;if(Array.isArray(x)){if(!i(x))throw new Error("Array contains invalid value: "+x);return new Uint8Array(x)}if(n(x.length)&&i(x))return new Uint8Array(x);throw new Error("unsupported array-like object")}function a(x){return new Uint8Array(x)}function o(x,p,P,$,F){($!=null||F!=null)&&(x.slice?x=x.slice($,F):x=Array.prototype.slice.call(x,$,F)),p.set(x,P)}var c=function(){function x(P){var $=[],F=0;for(P=encodeURI(P);F<P.length;){var Z=P.charCodeAt(F++);Z===37?($.push(parseInt(P.substr(F,2),16)),F+=2):$.push(Z)}return s($)}function p(P){for(var $=[],F=0;F<P.length;){var Z=P[F];Z<128?($.push(String.fromCharCode(Z)),F++):Z>191&&Z<224?($.push(String.fromCharCode((Z&31)<<6|P[F+1]&63)),F+=2):($.push(String.fromCharCode((Z&15)<<12|(P[F+1]&63)<<6|P[F+2]&63)),F+=3)}return $.join("")}return{toBytes:x,fromBytes:p}}(),f=function(){function x($){for(var F=[],Z=0;Z<$.length;Z+=2)F.push(parseInt($.substr(Z,2),16));return F}var p="0123456789abcdef";function P($){for(var F=[],Z=0;Z<$.length;Z++){var _e=$[Z];F.push(p[(_e&240)>>4]+p[_e&15])}return F.join("")}return{toBytes:x,fromBytes:P}}(),u={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],g=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],b=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],E=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],w=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],_=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],A=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],B=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],N=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],O=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],U=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],H=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],V=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],re=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function ae(x){for(var p=[],P=0;P<x.length;P+=4)p.push(x[P]<<24|x[P+1]<<16|x[P+2]<<8|x[P+3]);return p}var de=function(x){if(!(this instanceof de))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(x,!0)}),this._prepare()};de.prototype._prepare=function(){var x=u[this.key.length];if(x==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var p=0;p<=x;p++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var P=(x+1)*4,$=this.key.length/4,F=ae(this.key),Z,p=0;p<$;p++)Z=p>>2,this._Ke[Z][p%4]=F[p],this._Kd[x-Z][p%4]=F[p];for(var _e=0,ye=$,ge;ye<P;){if(ge=F[$-1],F[0]^=g[ge>>16&255]<<24^g[ge>>8&255]<<16^g[ge&255]<<8^g[ge>>24&255]^d[_e]<<24,_e+=1,$!=8)for(var p=1;p<$;p++)F[p]^=F[p-1];else{for(var p=1;p<$/2;p++)F[p]^=F[p-1];ge=F[$/2-1],F[$/2]^=g[ge&255]^g[ge>>8&255]<<8^g[ge>>16&255]<<16^g[ge>>24&255]<<24;for(var p=$/2+1;p<$;p++)F[p]^=F[p-1]}for(var p=0,He,Oe;p<$&&ye<P;)He=ye>>2,Oe=ye%4,this._Ke[He][Oe]=F[p],this._Kd[x-He][Oe]=F[p++],ye++}for(var He=1;He<x;He++)for(var Oe=0;Oe<4;Oe++)ge=this._Kd[He][Oe],this._Kd[He][Oe]=U[ge>>24&255]^H[ge>>16&255]^V[ge>>8&255]^re[ge&255]},de.prototype.encrypt=function(x){if(x.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var p=this._Ke.length-1,P=[0,0,0,0],$=ae(x),F=0;F<4;F++)$[F]^=this._Ke[0][F];for(var Z=1;Z<p;Z++){for(var F=0;F<4;F++)P[F]=E[$[F]>>24&255]^w[$[(F+1)%4]>>16&255]^y[$[(F+2)%4]>>8&255]^_[$[(F+3)%4]&255]^this._Ke[Z][F];$=P.slice()}for(var _e=a(16),ye,F=0;F<4;F++)ye=this._Ke[p][F],_e[4*F]=(g[$[F]>>24&255]^ye>>24)&255,_e[4*F+1]=(g[$[(F+1)%4]>>16&255]^ye>>16)&255,_e[4*F+2]=(g[$[(F+2)%4]>>8&255]^ye>>8)&255,_e[4*F+3]=(g[$[(F+3)%4]&255]^ye)&255;return _e},de.prototype.decrypt=function(x){if(x.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var p=this._Kd.length-1,P=[0,0,0,0],$=ae(x),F=0;F<4;F++)$[F]^=this._Kd[0][F];for(var Z=1;Z<p;Z++){for(var F=0;F<4;F++)P[F]=A[$[F]>>24&255]^B[$[(F+3)%4]>>16&255]^N[$[(F+2)%4]>>8&255]^O[$[(F+1)%4]&255]^this._Kd[Z][F];$=P.slice()}for(var _e=a(16),ye,F=0;F<4;F++)ye=this._Kd[p][F],_e[4*F]=(b[$[F]>>24&255]^ye>>24)&255,_e[4*F+1]=(b[$[(F+3)%4]>>16&255]^ye>>16)&255,_e[4*F+2]=(b[$[(F+2)%4]>>8&255]^ye>>8)&255,_e[4*F+3]=(b[$[(F+1)%4]&255]^ye)&255;return _e};var ee=function(x){if(!(this instanceof ee))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new de(x)};ee.prototype.encrypt=function(x){if(x=s(x),x.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var p=a(x.length),P=a(16),$=0;$<x.length;$+=16)o(x,P,0,$,$+16),P=this._aes.encrypt(P),o(P,p,$);return p},ee.prototype.decrypt=function(x){if(x=s(x),x.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var p=a(x.length),P=a(16),$=0;$<x.length;$+=16)o(x,P,0,$,$+16),P=this._aes.decrypt(P),o(P,p,$);return p};var T=function(x,p){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!p)p=a(16);else if(p.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(p,!0),this._aes=new de(x)};T.prototype.encrypt=function(x){if(x=s(x),x.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var p=a(x.length),P=a(16),$=0;$<x.length;$+=16){o(x,P,0,$,$+16);for(var F=0;F<16;F++)P[F]^=this._lastCipherblock[F];this._lastCipherblock=this._aes.encrypt(P),o(this._lastCipherblock,p,$)}return p},T.prototype.decrypt=function(x){if(x=s(x),x.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var p=a(x.length),P=a(16),$=0;$<x.length;$+=16){o(x,P,0,$,$+16),P=this._aes.decrypt(P);for(var F=0;F<16;F++)p[$+F]=P[F]^this._lastCipherblock[F];o(x,this._lastCipherblock,0,$,$+16)}return p};var l=function(x,p,P){if(!(this instanceof l))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!p)p=a(16);else if(p.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");P||(P=1),this.segmentSize=P,this._shiftRegister=s(p,!0),this._aes=new de(x)};l.prototype.encrypt=function(x){if(x.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var p=s(x,!0),P,$=0;$<p.length;$+=this.segmentSize){P=this._aes.encrypt(this._shiftRegister);for(var F=0;F<this.segmentSize;F++)p[$+F]^=P[F];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(p,this._shiftRegister,16-this.segmentSize,$,$+this.segmentSize)}return p},l.prototype.decrypt=function(x){if(x.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var p=s(x,!0),P,$=0;$<p.length;$+=this.segmentSize){P=this._aes.encrypt(this._shiftRegister);for(var F=0;F<this.segmentSize;F++)p[$+F]^=P[F];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(x,this._shiftRegister,16-this.segmentSize,$,$+this.segmentSize)}return p};var m=function(x,p){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!p)p=a(16);else if(p.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(p,!0),this._lastPrecipherIndex=16,this._aes=new de(x)};m.prototype.encrypt=function(x){for(var p=s(x,!0),P=0;P<p.length;P++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),p[P]^=this._lastPrecipher[this._lastPrecipherIndex++];return p},m.prototype.decrypt=m.prototype.encrypt;var S=function(x){if(!(this instanceof S))throw Error("Counter must be instanitated with `new`");x!==0&&!x&&(x=1),typeof x=="number"?(this._counter=a(16),this.setValue(x)):this.setBytes(x)};S.prototype.setValue=function(x){if(typeof x!="number"||parseInt(x)!=x)throw new Error("invalid counter value (must be an integer)");for(var p=15;p>=0;--p)this._counter[p]=x%256,x=x>>8},S.prototype.setBytes=function(x){if(x=s(x,!0),x.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=x},S.prototype.increment=function(){for(var x=15;x>=0;x--)if(this._counter[x]===255)this._counter[x]=0;else{this._counter[x]++;break}};var I=function(x,p){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",p instanceof S||(p=new S(p)),this._counter=p,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new de(x)};I.prototype.encrypt=function(x){for(var p=s(x,!0),P=0;P<p.length;P++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),p[P]^=this._remainingCounter[this._remainingCounterIndex++];return p},I.prototype.decrypt=I.prototype.encrypt;function M(x){x=s(x,!0);var p=16-x.length%16,P=a(x.length+p);o(x,P);for(var $=x.length;$<P.length;$++)P[$]=p;return P}function D(x){if(x=s(x,!0),x.length<16)throw new Error("PKCS#7 invalid length");var p=x[x.length-1];if(p>16)throw new Error("PKCS#7 padding byte out of range");for(var P=x.length-p,$=0;$<p;$++)if(x[P+$]!==p)throw new Error("PKCS#7 invalid padding byte");var F=a(P);return o(x,F,0,0,P),F}var K={AES:de,Counter:S,ModeOfOperation:{ecb:ee,cbc:T,cfb:l,ofb:m,ctr:I},utils:{hex:f,utf8:c},padding:{pkcs7:{pad:M,strip:D}},_arrayTest:{coerceArray:s,createArray:a,copyArray:o}};t.exports=K})()})(Sb);const Yn=Sb.exports,Tb="json-wallets/5.7.0";function bs(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),ue(t)}function Ra(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function th(t){return typeof t=="string"?fr(t,ii.NFKC):ue(t)}function ar(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const a in r)if(a.toLowerCase()===n[i]){s=r[a];break}if(s===null)return null;r=s}return r}function i6(t){const e=ue(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=he(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const s6=new j(Tb);class a6 extends Cs{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function kb(t,e){const r=JSON.parse(t);e=th(e);const n=xt(ar(r,"ethaddr")),i=bs(ar(r,"encseed"));(!i||i.length%16!==0)&&s6.throwArgumentError("invalid encseed","json",t);const s=ue(Zd(e,e,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),o=i.slice(16),c=new Yn.ModeOfOperation.cbc(s,a),f=Yn.padding.pkcs7.strip(ue(c.decrypt(o)));let u="";for(let b=0;b<f.length;b++)u+=String.fromCharCode(f[b]);const d=fr(u),g=Pt(d);return new a6({_isCrowdsaleAccount:!0,address:n,privateKey:g})}function rh(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function nh(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function o6(t){if(rh(t))try{return xt(JSON.parse(t).ethaddr)}catch{return null}if(nh(t))try{return xt(JSON.parse(t).address)}catch{return null}return null}var Pb={exports:{}};(function(t,e){(function(r){function i(w){const y=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let _=1779033703,A=3144134277,B=1013904242,N=2773480762,O=1359893119,U=2600822924,H=528734635,V=1541459225;const re=new Uint32Array(64);function ae(I){let M=0,D=I.length;for(;D>=64;){let K=_,x=A,p=B,P=N,$=O,F=U,Z=H,_e=V,ye,ge,He,Oe,Ve;for(ge=0;ge<16;ge++)He=M+ge*4,re[ge]=(I[He]&255)<<24|(I[He+1]&255)<<16|(I[He+2]&255)<<8|I[He+3]&255;for(ge=16;ge<64;ge++)ye=re[ge-2],Oe=(ye>>>17|ye<<32-17)^(ye>>>19|ye<<32-19)^ye>>>10,ye=re[ge-15],Ve=(ye>>>7|ye<<32-7)^(ye>>>18|ye<<32-18)^ye>>>3,re[ge]=(Oe+re[ge-7]|0)+(Ve+re[ge-16]|0)|0;for(ge=0;ge<64;ge++)Oe=((($>>>6|$<<32-6)^($>>>11|$<<32-11)^($>>>25|$<<32-25))+($&F^~$&Z)|0)+(_e+(y[ge]+re[ge]|0)|0)|0,Ve=((K>>>2|K<<32-2)^(K>>>13|K<<32-13)^(K>>>22|K<<32-22))+(K&x^K&p^x&p)|0,_e=Z,Z=F,F=$,$=P+Oe|0,P=p,p=x,x=K,K=Oe+Ve|0;_=_+K|0,A=A+x|0,B=B+p|0,N=N+P|0,O=O+$|0,U=U+F|0,H=H+Z|0,V=V+_e|0,M+=64,D-=64}}ae(w);let de,ee=w.length%64,T=w.length/536870912|0,l=w.length<<3,m=ee<56?56:120,S=w.slice(w.length-ee,w.length);for(S.push(128),de=ee+1;de<m;de++)S.push(0);return S.push(T>>>24&255),S.push(T>>>16&255),S.push(T>>>8&255),S.push(T>>>0&255),S.push(l>>>24&255),S.push(l>>>16&255),S.push(l>>>8&255),S.push(l>>>0&255),ae(S),[_>>>24&255,_>>>16&255,_>>>8&255,_>>>0&255,A>>>24&255,A>>>16&255,A>>>8&255,A>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,H>>>24&255,H>>>16&255,H>>>8&255,H>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255]}function s(w,y,_){w=w.length<=64?w:i(w);const A=64+y.length+4,B=new Array(A),N=new Array(64);let O,U=[];for(O=0;O<64;O++)B[O]=54;for(O=0;O<w.length;O++)B[O]^=w[O];for(O=0;O<y.length;O++)B[64+O]=y[O];for(O=A-4;O<A;O++)B[O]=0;for(O=0;O<64;O++)N[O]=92;for(O=0;O<w.length;O++)N[O]^=w[O];function H(){for(let V=A-1;V>=A-4;V--){if(B[V]++,B[V]<=255)return;B[V]=0}}for(;_>=32;)H(),U=U.concat(i(N.concat(i(B)))),_-=32;return _>0&&(H(),U=U.concat(i(N.concat(i(B))).slice(0,_))),U}function a(w,y,_,A,B){let N;for(u(w,(2*_-1)*16,B,0,16),N=0;N<2*_;N++)f(w,N*16,B,16),c(B,A),u(B,0,w,y+N*16,16);for(N=0;N<_;N++)u(w,y+N*2*16,w,N*16,16);for(N=0;N<_;N++)u(w,y+(N*2+1)*16,w,(N+_)*16,16)}function o(w,y){return w<<y|w>>>32-y}function c(w,y){u(w,0,y,0,16);for(let _=8;_>0;_-=2)y[4]^=o(y[0]+y[12],7),y[8]^=o(y[4]+y[0],9),y[12]^=o(y[8]+y[4],13),y[0]^=o(y[12]+y[8],18),y[9]^=o(y[5]+y[1],7),y[13]^=o(y[9]+y[5],9),y[1]^=o(y[13]+y[9],13),y[5]^=o(y[1]+y[13],18),y[14]^=o(y[10]+y[6],7),y[2]^=o(y[14]+y[10],9),y[6]^=o(y[2]+y[14],13),y[10]^=o(y[6]+y[2],18),y[3]^=o(y[15]+y[11],7),y[7]^=o(y[3]+y[15],9),y[11]^=o(y[7]+y[3],13),y[15]^=o(y[11]+y[7],18),y[1]^=o(y[0]+y[3],7),y[2]^=o(y[1]+y[0],9),y[3]^=o(y[2]+y[1],13),y[0]^=o(y[3]+y[2],18),y[6]^=o(y[5]+y[4],7),y[7]^=o(y[6]+y[5],9),y[4]^=o(y[7]+y[6],13),y[5]^=o(y[4]+y[7],18),y[11]^=o(y[10]+y[9],7),y[8]^=o(y[11]+y[10],9),y[9]^=o(y[8]+y[11],13),y[10]^=o(y[9]+y[8],18),y[12]^=o(y[15]+y[14],7),y[13]^=o(y[12]+y[15],9),y[14]^=o(y[13]+y[12],13),y[15]^=o(y[14]+y[13],18);for(let _=0;_<16;++_)w[_]+=y[_]}function f(w,y,_,A){for(let B=0;B<A;B++)_[B]^=w[y+B]}function u(w,y,_,A,B){for(;B--;)_[A++]=w[y++]}function d(w){if(!w||typeof w.length!="number")return!1;for(let y=0;y<w.length;y++){const _=w[y];if(typeof _!="number"||_%1||_<0||_>=256)return!1}return!0}function g(w,y){if(typeof w!="number"||w%1)throw new Error("invalid "+y);return w}function b(w,y,_,A,B,N,O){if(_=g(_,"N"),A=g(A,"r"),B=g(B,"p"),N=g(N,"dkLen"),_===0||(_&_-1)!==0)throw new Error("N must be power of 2");if(_>2147483647/128/A)throw new Error("N too large");if(A>2147483647/128/B)throw new Error("r too large");if(!d(w))throw new Error("password must be an array or buffer");if(w=Array.prototype.slice.call(w),!d(y))throw new Error("salt must be an array or buffer");y=Array.prototype.slice.call(y);let U=s(w,y,B*128*A);const H=new Uint32Array(B*32*A);for(let $=0;$<H.length;$++){const F=$*4;H[$]=(U[F+3]&255)<<24|(U[F+2]&255)<<16|(U[F+1]&255)<<8|(U[F+0]&255)<<0}const V=new Uint32Array(64*A),re=new Uint32Array(32*A*_),ae=32*A,de=new Uint32Array(16),ee=new Uint32Array(16),T=B*_*2;let l=0,m=null,S=!1,I=0,M=0,D,K;const x=O?parseInt(1e3/A):4294967295,p=typeof setImmediate<"u"?setImmediate:setTimeout,P=function(){if(S)return O(new Error("cancelled"),l/T);let $;switch(I){case 0:K=M*32*A,u(H,K,V,0,ae),I=1,D=0;case 1:$=_-D,$>x&&($=x);for(let Z=0;Z<$;Z++)u(V,0,re,(D+Z)*ae,ae),a(V,ae,A,de,ee);if(D+=$,l+=$,O){const Z=parseInt(1e3*l/T);if(Z!==m){if(S=O(null,l/T),S)break;m=Z}}if(D<_)break;D=0,I=2;case 2:$=_-D,$>x&&($=x);for(let Z=0;Z<$;Z++){const _e=(2*A-1)*16,ye=V[_e]&_-1;f(re,ye*ae,V,ae),a(V,ae,A,de,ee)}if(D+=$,l+=$,O){const Z=parseInt(1e3*l/T);if(Z!==m){if(S=O(null,l/T),S)break;m=Z}}if(D<_)break;if(u(V,0,H,K,ae),M++,M<B){I=0;break}U=[];for(let Z=0;Z<H.length;Z++)U.push(H[Z]>>0&255),U.push(H[Z]>>8&255),U.push(H[Z]>>16&255),U.push(H[Z]>>24&255);const F=s(w,U,N);return O&&O(null,1,F),F}O&&p(P)};if(!O)for(;;){const $=P();if($!=null)return $}P()}const E={scrypt:function(w,y,_,A,B,N,O){return new Promise(function(U,H){let V=0;O&&O(0),b(w,y,_,A,B,N,function(re,ae,de){if(re)H(re);else if(de)O&&V!==1&&O(1),U(new Uint8Array(de));else if(O&&ae!==V)return V=ae,O(ae)})})},syncScrypt:function(w,y,_,A,B,N){return new Uint8Array(b(w,y,_,A,B,N))}};t.exports=E})()})(Pb);const ih=Pb.exports;var c6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ul=new j(Tb);function lp(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class f6 extends Cs{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function u6(t,e,r){if(ar(t,"crypto/cipher")==="aes-128-ctr"){const i=bs(ar(t,"crypto/cipherparams/iv")),s=new Yn.Counter(i),a=new Yn.ModeOfOperation.ctr(e,s);return ue(a.decrypt(r))}return null}function Cb(t,e){const r=bs(ar(t,"crypto/ciphertext"));if(he(Pt(Ut([e.slice(16,32),r]))).substring(2)!==ar(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=u6(t,e.slice(0,16),r);i||Ul.throwError("unsupported cipher",j.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),a=Ji(i);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),xt(c)!==a)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:a,privateKey:he(i)};if(ar(t,"x-ethers/version")==="0.1"){const c=bs(ar(t,"x-ethers/mnemonicCiphertext")),f=bs(ar(t,"x-ethers/mnemonicCounter")),u=new Yn.Counter(f),d=new Yn.ModeOfOperation.ctr(s,u),g=ar(t,"x-ethers/path")||da,b=ar(t,"x-ethers/locale")||"en",E=ue(d.decrypt(c));try{const w=xf(E,b),y=on.fromMnemonic(w,null,b).derivePath(g);if(y.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=y.mnemonic}catch(w){if(w.code!==j.errors.INVALID_ARGUMENT||w.argument!=="wordlist")throw w}}return new f6(o)}function Ib(t,e,r,n,i){return ue(Zd(t,e,r,n,i))}function l6(t,e,r,n,i){return Promise.resolve(Ib(t,e,r,n,i))}function Rb(t,e,r,n,i){const s=th(e),a=ar(t,"crypto/kdf");if(a&&typeof a=="string"){const o=function(c,f){return Ul.throwArgumentError("invalid key-derivation function parameters",c,f)};if(a.toLowerCase()==="scrypt"){const c=bs(ar(t,"crypto/kdfparams/salt")),f=parseInt(ar(t,"crypto/kdfparams/n")),u=parseInt(ar(t,"crypto/kdfparams/r")),d=parseInt(ar(t,"crypto/kdfparams/p"));(!f||!u||!d)&&o("kdf",a),(f&f-1)!==0&&o("N",f);const g=parseInt(ar(t,"crypto/kdfparams/dklen"));return g!==32&&o("dklen",g),n(s,c,f,u,d,64,i)}else if(a.toLowerCase()==="pbkdf2"){const c=bs(ar(t,"crypto/kdfparams/salt"));let f=null;const u=ar(t,"crypto/kdfparams/prf");u==="hmac-sha256"?f="sha256":u==="hmac-sha512"?f="sha512":o("prf",u);const d=parseInt(ar(t,"crypto/kdfparams/c")),g=parseInt(ar(t,"crypto/kdfparams/dklen"));return g!==32&&o("dklen",g),r(s,c,d,g,f)}}return Ul.throwArgumentError("unsupported key-derivation function","kdf",a)}function d6(t,e){const r=JSON.parse(t),n=Rb(r,e,Ib,ih.syncScrypt);return Cb(r,n)}function h6(t,e,r){return c6(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield Rb(n,e,l6,ih.scrypt,r);return Cb(n,i)})}function p6(t,e,r,n){try{if(xt(t.address)!==Ji(t.privateKey))throw new Error("address/privateKey mismatch");if(lp(t)){const y=t.mnemonic;if(on.fromMnemonic(y.phrase,null,y.locale).derivePath(y.path||da).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=ue(t.privateKey),s=th(e);let a=null,o=null,c=null;if(lp(t)){const y=t.mnemonic;a=ue(bf(y.phrase,y.locale||"en")),o=y.path||da,c=y.locale||"en"}let f=r.client;f||(f="ethers.js");let u=null;r.salt?u=ue(r.salt):u=ra(32);let d=null;if(r.iv){if(d=ue(r.iv),d.length!==16)throw new Error("invalid iv")}else d=ra(16);let g=null;if(r.uuid){if(g=ue(r.uuid),g.length!==16)throw new Error("invalid uuid")}else g=ra(16);let b=1<<17,E=8,w=1;return r.scrypt&&(r.scrypt.N&&(b=r.scrypt.N),r.scrypt.r&&(E=r.scrypt.r),r.scrypt.p&&(w=r.scrypt.p)),ih.scrypt(s,u,b,E,w,64,n).then(y=>{y=ue(y);const _=y.slice(0,16),A=y.slice(16,32),B=y.slice(32,64),N=new Yn.Counter(d),O=new Yn.ModeOfOperation.ctr(_,N),U=ue(O.encrypt(i)),H=Pt(Ut([A,U])),V={address:t.address.substring(2).toLowerCase(),id:i6(g),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:he(d).substring(2)},ciphertext:he(U).substring(2),kdf:"scrypt",kdfparams:{salt:he(u).substring(2),n:b,dklen:32,p:w,r:E},mac:H.substring(2)}};if(a){const re=ra(16),ae=new Yn.Counter(re),de=new Yn.ModeOfOperation.ctr(B,ae),ee=ue(de.encrypt(a)),T=new Date,l=T.getUTCFullYear()+"-"+Ra(T.getUTCMonth()+1,2)+"-"+Ra(T.getUTCDate(),2)+"T"+Ra(T.getUTCHours(),2)+"-"+Ra(T.getUTCMinutes(),2)+"-"+Ra(T.getUTCSeconds(),2)+".0Z";V["x-ethers"]={client:f,gethFilename:"UTC--"+l+"--"+V.address,mnemonicCounter:he(re).substring(2),mnemonicCiphertext:he(ee).substring(2),path:o,locale:c,version:"0.1"}}return JSON.stringify(V)})}function g6(t,e,r){if(rh(t)){r&&r(0);const n=kb(t,e);return r&&r(1),Promise.resolve(n)}return nh(t)?h6(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function y6(t,e){if(rh(t))return kb(t,e);if(nh(t))return d6(t,e);throw new Error("invalid JSON wallet")}const m6="wallet/5.7.0";var dp=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const $s=new j(m6);function b6(t){return t!=null&&je(t.privateKey,32)&&t.address!=null}function x6(t){const e=t.mnemonic;return e&&e.phrase}class Ki extends Ii{constructor(e,r){if(super(),b6(e)){const n=new ms(e.privateKey);if(Y(this,"_signingKey",()=>n),Y(this,"address",Ji(this.publicKey)),this.address!==xt(e.address)&&$s.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),x6(e)){const i=e.mnemonic;Y(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||da,locale:i.locale||"en"}));const s=this.mnemonic,a=on.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);Ji(a.privateKey)!==this.address&&$s.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else Y(this,"_mnemonic",()=>null)}else{if(ms.isSigningKey(e))e.curve!=="secp256k1"&&$s.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),Y(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new ms(e);Y(this,"_signingKey",()=>n)}Y(this,"_mnemonic",()=>null),Y(this,"address",Ji(this.publicKey))}r&&!Rs.isProvider(r)&&$s.throwArgumentError("invalid provider","provider",r),Y(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Ki(this,e)}signTransaction(e){return tr(e).then(r=>{r.from!=null&&(xt(r.from)!==this.address&&$s.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(Pt(Ol(r)));return Ol(r,n)})}signMessage(e){return dp(this,void 0,void 0,function*(){return Pl(this._signingKey().signDigest(Gd(e)))})}_signTypedData(e,r,n){return dp(this,void 0,void 0,function*(){const i=yield _r.resolveNames(e,r,n,s=>(this.provider==null&&$s.throwError("cannot resolve ENS names without a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return Pl(this._signingKey().signDigest(_r.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),p6(this,e,r,n)}static createRandom(e){let r=ra(16);e||(e={}),e.extraEntropy&&(r=ue(or(Pt(Ut([r,e.extraEntropy])),0,16)));const n=xf(r,e.locale);return Ki.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return g6(e,r,n).then(i=>new Ki(i))}static fromEncryptedJsonSync(e,r){return new Ki(y6(e,r))}static fromMnemonic(e,r,n){return r||(r=da),new Ki(on.fromMnemonic(e,null,n).derivePath(r))}}function v6(t,e){return Fo(Gd(t),e)}function w6(t,e,r,n){return Fo(_r.hash(t,e,r),n)}const _6="networks/5.7.1",hp=new j(_6);function E6(t){return t&&typeof t.renetwork=="function"}function wi(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const a=new r.PocketProvider(t,n.pocket);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],a=new r.AnkrProvider(t,n.ankr);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return wi(r)},e}function qc(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return qc(t,n)},r}const pp={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:wi("homestead")},gp={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:wi("ropsten")},yp={chainId:63,name:"classicMordor",_defaultProvider:qc("https://www.ethercluster.com/mordor","classicMordor")},ic={unspecified:{chainId:0,name:"unspecified"},homestead:pp,mainnet:pp,morden:{chainId:2,name:"morden"},ropsten:gp,testnet:gp,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:wi("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:wi("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:wi("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:wi("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:qc("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:yp,classicTestnet:yp,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:qc("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:wi("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:wi("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function sh(t){if(t==null)return null;if(typeof t=="number"){for(const n in ic){const i=ic[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=ic[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=ic[t.name];if(!e)return typeof t.chainId!="number"&&hp.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&hp.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(E6(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const A6="web/5.7.1";var S6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};function T6(t,e){return S6(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const a=e.fetchOptions;a.mode&&(r.mode=a.mode),a.cache&&(r.cache=a.cache),a.credentials&&(r.credentials=a.credentials),a.redirect&&(r.redirect=a.redirect),a.referrer&&(r.referrer=a.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((a,o)=>{s[o.toLowerCase()]=a}):n.headers.keys().forEach(a=>{s[a.toLowerCase()]=n.headers.get(a)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:ue(new Uint8Array(i))}})}var k6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Cn=new j(A6);function mp(t){return new Promise(e=>{setTimeout(e,t)})}function Ui(t,e){if(t==null)return null;if(typeof t=="string")return t;if(Oo(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Is(t)}catch{}return he(t)}return t}function P6(t){return fr(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Nb(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;Cn.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;Cn.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof t=="object"?!!t.errorPassThrough:!1,o={};let c=null;const f={method:"GET"};let u=!1,d=2*60*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&Cn.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(d=t.timeout),t.headers)for(const _ in t.headers)o[_.toLowerCase()]={key:_,value:String(t.headers[_])},["if-none-match","if-modified-since"].indexOf(_.toLowerCase())>=0&&(u=!0);if(f.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&Cn.throwError("basic authentication requires a secure https url",j.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const _=t.user+":"+t.password;o.authorization={key:"Authorization",value:"Basic "+Hd(fr(_))}}t.skipFetchSetup!=null&&(f.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(f.fetchOptions=zt(t.fetchOptions))}const g=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),b=c?c.match(g):null;if(b)try{const _={statusCode:200,statusMessage:"OK",headers:{"content-type":b[1]||"text/plain"},body:b[2]?qd(b[3]):P6(b[3])};let A=_.body;return r&&(A=r(_.body,_)),Promise.resolve(A)}catch(_){Cn.throwError("processing response error",j.errors.SERVER_ERROR,{body:Ui(b[1],b[2]),error:_,requestBody:null,requestMethod:"GET",url:c})}e&&(f.method="POST",f.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const E={};Object.keys(o).forEach(_=>{const A=o[_];E[A.key]=A.value}),f.headers=E;const w=function(){let _=null;return{promise:new Promise(function(N,O){d&&(_=setTimeout(()=>{_!=null&&(_=null,O(Cn.makeError("timeout",j.errors.TIMEOUT,{requestBody:Ui(f.body,E["content-type"]),requestMethod:f.method,timeout:d,url:c})))},d))}),cancel:function(){_!=null&&(clearTimeout(_),_=null)}}}(),y=function(){return k6(this,void 0,void 0,function*(){for(let _=0;_<n;_++){let A=null;try{if(A=yield T6(c,f),_<n){if(A.statusCode===301||A.statusCode===302){const N=A.headers.location||"";if(f.method==="GET"&&N.match(/^https:/)){c=A.headers.location;continue}}else if(A.statusCode===429){let N=!0;if(i&&(N=yield i(_,c)),N){let O=0;const U=A.headers["retry-after"];typeof U=="string"&&U.match(/^[1-9][0-9]*$/)?O=parseInt(U)*1e3:O=s*parseInt(String(Math.random()*Math.pow(2,_))),yield mp(O);continue}}}}catch(N){A=N.response,A==null&&(w.cancel(),Cn.throwError("missing response",j.errors.SERVER_ERROR,{requestBody:Ui(f.body,E["content-type"]),requestMethod:f.method,serverError:N,url:c}))}let B=A.body;if(u&&A.statusCode===304?B=null:!a&&(A.statusCode<200||A.statusCode>=300)&&(w.cancel(),Cn.throwError("bad response",j.errors.SERVER_ERROR,{status:A.statusCode,headers:A.headers,body:Ui(B,A.headers?A.headers["content-type"]:null),requestBody:Ui(f.body,E["content-type"]),requestMethod:f.method,url:c})),r)try{const N=yield r(B,A);return w.cancel(),N}catch(N){if(N.throttleRetry&&_<n){let O=!0;if(i&&(O=yield i(_,c)),O){const U=s*parseInt(String(Math.random()*Math.pow(2,_)));yield mp(U);continue}}w.cancel(),Cn.throwError("processing response error",j.errors.SERVER_ERROR,{body:Ui(B,A.headers?A.headers["content-type"]:null),error:N,requestBody:Ui(f.body,E["content-type"]),requestMethod:f.method,url:c})}return w.cancel(),B}return Cn.throwError("failed response",j.errors.SERVER_ERROR,{requestBody:Ui(f.body,E["content-type"]),requestMethod:f.method,url:c})})}();return Promise.race([w.promise,y])}function Aa(t,e,r){let n=(s,a)=>{let o=null;if(s!=null)try{o=JSON.parse(Is(s))}catch(c){Cn.throwError("invalid JSON",j.errors.SERVER_ERROR,{body:s,error:c})}return r&&(o=r(o,a)),o},i=null;if(e!=null){i=fr(e);const s=typeof t=="string"?{url:t}:zt(t);s.headers?Object.keys(s.headers).filter(o=>o.toLowerCase()==="content-type").length!==0||(s.headers=zt(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return Nb(t,i,n)}function ys(t,e){return e||(e={}),e=zt(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const a=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{a()&&n(new Error("timeout"))},e.timeout));const o=e.retryLimit;let c=0;function f(){return t().then(function(u){if(u!==void 0)a()&&r(u);else if(e.oncePoll)e.oncePoll.once("poll",f);else if(e.onceBlock)e.onceBlock.once("block",f);else if(!s){if(c++,c>o){a()&&n(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(f,d)}return null},function(u){a()&&n(u)})}f()})}var Hc="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Ll={};for(var sc=0;sc<Hc.length;sc++){var vu=Hc.charAt(sc);if(Ll[vu]!==void 0)throw new TypeError(vu+" is ambiguous");Ll[vu]=sc}function ca(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Bb(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=ca(e)^n>>5}for(e=ca(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=ca(e)^i&31}return e}function C6(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=Bb(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var a=e[s];if(a>>5!==0)throw new Error("Non 5-bit word");n=ca(n)^a,i+=Hc.charAt(a)}for(s=0;s<6;++s)n=ca(n);for(n^=1,s=0;s<6;++s){var o=n>>(5-s)*5&31;i+=Hc.charAt(o)}return i}function Mb(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),a=t.slice(i+1);if(a.length<6)return"Data too short";var o=Bb(s);if(typeof o=="string")return o;for(var c=[],f=0;f<a.length;++f){var u=a.charAt(f),d=Ll[u];if(d===void 0)return"Unknown character "+u;o=ca(o)^d,!(f+6>=a.length)&&c.push(d)}return o!==1?"Invalid checksum for "+t:{prefix:s,words:c}}function I6(){var t=Mb.apply(null,arguments);if(typeof t=="object")return t}function R6(t){var e=Mb.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function vf(t,e,r,n){for(var i=0,s=0,a=(1<<r)-1,o=[],c=0;c<t.length;++c)for(i=i<<e|t[c],s+=e;s>=r;)s-=r,o.push(i>>s&a);if(n)s>0&&o.push(i<<r-s&a);else{if(s>=e)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function N6(t){var e=vf(t,8,5,!0);if(Array.isArray(e))return e}function B6(t){var e=vf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function M6(t){var e=vf(t,5,8,!1);if(Array.isArray(e))return e}function O6(t){var e=vf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var D6={decodeUnsafe:I6,decode:R6,encode:C6,toWordsUnsafe:N6,toWords:B6,fromWordsUnsafe:M6,fromWords:O6};const bp=D6,Fr="providers/5.7.2",Na=new j(Fr);class Se{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),a=this.hash.bind(this),o=this.hex.bind(this),c=this.number.bind(this),f=this.type.bind(this),u=d=>this.data(d,!0);return e.transaction={hash:a,type:f,accessList:Se.allowNull(this.accessList.bind(this),null),blockHash:Se.allowNull(a,null),blockNumber:Se.allowNull(c,null),transactionIndex:Se.allowNull(c,null),confirmations:Se.allowNull(c,null),from:r,gasPrice:Se.allowNull(n),maxPriorityFeePerGas:Se.allowNull(n),maxFeePerGas:Se.allowNull(n),gasLimit:n,to:Se.allowNull(r,null),value:n,nonce:c,data:s,r:Se.allowNull(this.uint256),s:Se.allowNull(this.uint256),v:Se.allowNull(c),creates:Se.allowNull(r,null),raw:Se.allowNull(s)},e.transactionRequest={from:Se.allowNull(r),nonce:Se.allowNull(c),gasLimit:Se.allowNull(n),gasPrice:Se.allowNull(n),maxPriorityFeePerGas:Se.allowNull(n),maxFeePerGas:Se.allowNull(n),to:Se.allowNull(r),value:Se.allowNull(n),data:Se.allowNull(u),type:Se.allowNull(c),accessList:Se.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:a,address:r,topics:Se.arrayOf(a),data:s,logIndex:c,blockHash:a},e.receipt={to:Se.allowNull(this.address,null),from:Se.allowNull(this.address,null),contractAddress:Se.allowNull(r,null),transactionIndex:c,root:Se.allowNull(o),gasUsed:n,logsBloom:Se.allowNull(s),blockHash:a,transactionHash:a,logs:Se.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:Se.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:Se.allowNull(n),status:Se.allowNull(c),type:f},e.block={hash:Se.allowNull(a),parentHash:a,number:c,timestamp:c,nonce:Se.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Se.allowNull(r),extraData:s,transactions:Se.allowNull(Se.arrayOf(a)),baseFeePerGas:Se.allowNull(n)},e.blockWithTransactions=zt(e.block),e.blockWithTransactions.transactions=Se.allowNull(Se.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Se.allowNull(i,void 0),toBlock:Se.allowNull(i,void 0),blockHash:Se.allowNull(a,void 0),address:Se.allowNull(r,void 0),topics:Se.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Se.allowNull(c),blockHash:Se.allowNull(a),transactionIndex:c,removed:Se.allowNull(this.boolean.bind(this)),address:r,data:Se.allowFalsish(s,"0x"),topics:Se.arrayOf(a),transactionHash:a,logIndex:c},e}accessList(e){return cs(e||[])}number(e){return e==="0x"?0:fe.from(e).toNumber()}type(e){return e==="0x"||e==null?0:fe.from(e).toNumber()}bigNumber(e){return fe.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),je(e))?e.toLowerCase():Na.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return xt(e)}callAddress(e){if(!je(e,32))return null;const r=xt(or(e,12));return r===Um?null:r}contractAddress(e){return hf(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||je(e))return Do(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return ni(n)!==32?Na.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=fe.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!je(e))throw new Error("invalid uint256");return Lt(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Se.check(r,e);return i._difficulty=n==null?null:fe.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Se.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&fe.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=Se.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;je(n)&&(n=fe.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),je(n)&&(n=fe.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return pb(e)}receiptLog(e){return Se.check(this.formats.receiptLog,e)}receipt(e){const r=Se.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=fe.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Na.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Na.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Na.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return Se.check(this.formats.filter,e)}filterLog(e){return Se.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}function Ob(t){return t&&typeof t.isCommunityResource=="function"}function Fl(t){return Ob(t)&&t.isCommunityResource()}let xp=!1;function jo(){xp||(xp=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var De=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const We=new j(Fr),U6=10;function vp(t){return t==null?"null":(ni(t)!==32&&We.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function wp(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[vp(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return vp(e)}).join("&")}function L6(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function qs(t){if(typeof t=="string"){if(t=t.toLowerCase(),ni(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+wp(t);if(g3.isForkEvent(t))throw We.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+wp(t.topics||[])}throw new Error("invalid event - "+t)}function Ba(){return new Date().getTime()}function _p(t){return new Promise(e=>{setTimeout(e,t)})}const F6=["block","network","pending","poll"];class j6{constructor(e,r,n){Y(this,"tag",e),Y(this,"listener",r),Y(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=L6(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||F6.indexOf(this.tag)>=0}}const K6={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function wu(t){return Lt(fe.from(t).toHexString(),32)}function Ep(t){return ua.encode(Ut([t,or(Ti(Ti(t)),0,4)]))}const Db=new RegExp("^(ipfs)://(.*)$","i"),Ap=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Db,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _c(t,e){try{return Is(xo(t,e))}catch{}return null}function xo(t,e){if(t==="0x")return null;const r=fe.from(or(t,e,e+32)).toNumber(),n=fe.from(or(t,r,r+32)).toNumber();return or(t,r+32,r+32+n)}function _u(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):We.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function Sp(t){const e=ue(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function $6(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function Ub(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=ue(t[n]);e[n]=Sp(r),e.push(Sp(i.length)),e.push($6(i)),r+=32+Math.ceil(i.length/32)*32}return jr(e)}class jl{constructor(e,r,n,i){Y(this,"provider",e),Y(this,"name",n),Y(this,"address",e.formatter.address(r)),Y(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>fe.from(e).eq(1)).catch(e=>{if(e.code===j.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return De(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:jr([e,to(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=jr(["0x9061b923",Ub([eb(this.name),n.data])]));try{let s=yield this.provider.call(n);return ue(s).length%32===4&&We.throwError("resolver threw error",j.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=xo(s,0)),s}catch(s){if(s.code===j.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return De(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?xo(n,0):null})}_getAddress(e,r){const n=K6[String(e)];if(n==null&&We.throwError(`unsupported coin type: ${e}`,j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=ue(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return Ep(Ut([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return Ep(Ut([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let a=i[0];if(a===0?s!==20&&s!==32&&(a=-1):a=-1,a>=0&&i.length===2+s&&s>=1&&s<=75){const o=bp.toWords(i.slice(2));return o.unshift(a),bp.encode(n.prefix,o)}}return null}getAddress(e){return De(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Fd?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===j.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",wu(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&We.throwError("invalid or unsupported coin data",j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return De(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<Ap.length;n++){const i=r.match(Ap[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:_u(r)};case"erc721":case"erc1155":{const a=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const o=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const f=yield this.provider.formatter.address(c[0]),u=Lt(fe.from(c[1]).toHexString(),32);if(s==="erc721"){const w=this.provider.formatter.callAddress(yield this.provider.call({to:f,data:jr(["0x6352211e",u])}));if(o!==w)return null;e.push({type:"owner",content:w})}else if(s==="erc1155"){const w=fe.from(yield this.provider.call({to:f,data:jr(["0x00fdd58e",Lt(o,32),u])}));if(w.isZero())return null;e.push({type:"balance",content:w.toString()})}const d={to:this.provider.formatter.address(c[0]),data:jr([a,u])};let g=_c(yield this.provider.call(d),0);if(g==null)return null;e.push({type:"metadata-url-base",content:g}),s==="erc1155"&&(g=g.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:g})),g.match(/^ipfs:/i)&&(g=_u(g)),e.push({type:"metadata-url",content:g});const b=yield Aa(g);if(!b)return null;e.push({type:"metadata",content:JSON.stringify(b)});let E=b.image;if(typeof E!="string")return null;if(!E.match(/^(https:\/\/|data:)/i)){if(E.match(Db)==null)return null;e.push({type:"url-ipfs",content:E}),E=_u(E)}return e.push({type:"url",content:E}),{linkage:e,url:E}}}}}catch{}return null})}getContentHash(){return De(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const a=parseInt(r[3],16);if(r[4].length===a*2)return"ipfs://"+ua.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const a=parseInt(n[3],16);if(n[4].length===a*2)return"ipns://"+ua.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const a={"=":"","+":"-","/":"_"};return"sia://"+Hd("0x"+s[1]).replace(/[=+\/]/g,c=>a[c])}return We.throwError("invalid or unsupported content hash data",j.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return De(this,void 0,void 0,function*(){let r=fr(e);r=Ut([wu(64),wu(r.length),r]),r.length%32!==0&&(r=Ut([r,Lt("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",he(r));return n==null||n==="0x"?null:Is(n)})}}let Eu=null,q6=1;class wf extends Rs{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Y(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Sr(new.target,"getNetwork")(e);r?(Y(this,"_network",r),this.emit("network",r,null)):We.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return De(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||We.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Y(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ys(()=>this._ready().then(e=>e,e=>{if(!(e.code===j.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Eu==null&&(Eu=new Se),Eu}static getNetwork(e){return sh(e??"homestead")}ccipReadFetch(e,r,n){return De(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const c=n[o],f=c.replace("{sender}",i).replace("{data}",s),u=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),d=yield Aa({url:f,errorPassThrough:!0},u,(b,E)=>(b.status=E.statusCode,b));if(d.data)return d.data;const g=d.message||"unknown error";if(d.status>=400&&d.status<500)return We.throwError(`response not found during CCIP fetch: ${g}`,j.errors.SERVER_ERROR,{url:c,errorMessage:g});a.push(g)}return We.throwError(`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,j.errors.SERVER_ERROR,{urls:n,errorMessages:a})})}_getInternalBlockNumber(e){return De(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Ba()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Ba(),n=tr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const a=Ba();return i=fe.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:a}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return De(this,void 0,void 0,function*(){const e=q6++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)We.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",We.makeError("network block skew detected",j.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let a=this.getTransactionReceipt(s).then(o=>(!o||o.blockNumber==null||(this._emitted["t:"+s]=o.blockNumber,this.emit(s,o)),null)).catch(o=>{this.emit("error",o)});r.push(a);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const a=s.toBlock-this._maxFilterBlockRange;a>s.fromBlock&&(s.fromBlock=a),s.fromBlock<0&&(s.fromBlock=0);const o=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(f=>{f.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=f.blockNumber),this._emitted["b:"+f.blockHash]=f.blockNumber,this._emitted["t:"+f.transactionHash]=f.blockNumber,this.emit(s,f)})}).catch(c=>{this.emit("error",c),i._inflight=!1});r.push(o)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return De(this,void 0,void 0,function*(){return We.throwError("provider does not support network detection",j.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return De(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield _p(0),this._network;const n=We.makeError("underlying network changed",j.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Ba();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Ba(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return De(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return De(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((a,o)=>{const c=[];let f=!1;const u=function(){return f?!0:(f=!0,c.forEach(g=>{g()}),!1)},d=g=>{g.confirmations<r||u()||a(g)};if(this.on(e,d),c.push(()=>{this.removeListener(e,d)}),i){let g=i.startBlock,b=null;const E=w=>De(this,void 0,void 0,function*(){f||(yield _p(1e3),this.getTransactionCount(i.from).then(y=>De(this,void 0,void 0,function*(){if(!f){if(y<=i.nonce)g=w;else{{const _=yield this.getTransaction(e);if(_&&_.blockNumber!=null)return}for(b==null&&(b=g-3,b<i.startBlock&&(b=i.startBlock));b<=w;){if(f)return;const _=yield this.getBlockWithTransactions(b);for(let A=0;A<_.transactions.length;A++){const B=_.transactions[A];if(B.hash===e)return;if(B.from===i.from&&B.nonce===i.nonce){if(f)return;const N=yield this.waitForTransaction(B.hash,r);if(u())return;let O="replaced";B.data===i.data&&B.to===i.to&&B.value.eq(i.value)?O="repriced":B.data==="0x"&&B.from===B.to&&B.value.isZero()&&(O="cancelled"),o(We.makeError("transaction was replaced",j.errors.TRANSACTION_REPLACED,{cancelled:O==="replaced"||O==="cancelled",reason:O,replacement:this._wrapTransaction(B),hash:e,receipt:N}));return}}b++}}f||this.once("block",E)}}),y=>{f||this.once("block",E)}))});if(f)return;this.once("block",E),c.push(()=>{this.removeListener("block",E)})}if(typeof n=="number"&&n>0){const g=setTimeout(()=>{u()||o(We.makeError("timeout exceeded",j.errors.TIMEOUT,{timeout:n}))},n);g.unref&&g.unref(),c.push(()=>{clearTimeout(g)})}})})}getBlockNumber(){return De(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return De(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return fe.from(e)}catch(r){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return De(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return fe.from(i)}catch(s){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return De(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return fe.from(i).toNumber()}catch(s){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return De(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return he(i)}catch(s){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return De(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(a=>Do(a))}),s=yield this.perform("getStorageAt",i);try{return he(s)}catch(a){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:a})}})}_wrapTransaction(e,r,n){if(r!=null&&ni(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&We.throwError("Transaction hash mismatch from Provider.sendTransaction.",j.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,a)=>De(this,void 0,void 0,function*(){s==null&&(s=1),a==null&&(a=0);let o;s!==0&&n!=null&&(o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,a,o);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&We.throwError("transaction failed",j.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return De(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>he(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return De(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?fe.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?he(s):null))}),this.formatter.transactionRequest(yield tr(n))})}_getFilter(e){return De(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield tr(r))})}_call(e,r,n){return De(this,void 0,void 0,function*(){n>=U6&&We.throwError("CCIP read exceeded maximum redirections",j.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&ni(s)%32===4)try{const a=or(s,4),o=or(a,0,32);fe.from(o).eq(i)||We.throwError("CCIP Read sender did not match",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],f=fe.from(or(a,32,64)).toNumber(),u=fe.from(or(a,f,f+32)).toNumber(),d=or(a,f+32);for(let _=0;_<u;_++){const A=_c(d,_*32);A==null&&We.throwError("CCIP Read contained corrupt URL string",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(A)}const g=xo(a,64);fe.from(or(a,100,128)).isZero()||We.throwError("CCIP Read callback selector included junk",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const b=or(a,96,100),E=xo(a,128),w=yield this.ccipReadFetch(e,g,c);w==null&&We.throwError("CCIP Read disabled or provided no URLs",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const y={to:i,data:jr([b,Ub([w,E])])};return this._call(y,r,n+1)}catch(a){if(a.code===j.errors.SERVER_ERROR)throw a}try{return he(s)}catch(a){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:a})}})}call(e,r){return De(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield tr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return De(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield tr({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return fe.from(n)}catch(i){return We.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return De(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&We.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&We.throwError("ENS name not configured",j.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return De(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(je(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),je(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{We.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ys(()=>De(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let a=null;for(let c=0;c<s.transactions.length;c++){const f=s.transactions[c];if(f.blockNumber==null)f.confirmations=0;else if(f.confirmations==null){a==null&&(a=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=a-f.blockNumber+1;u<=0&&(u=1),f.confirmations=u}}const o=this.formatter.blockWithTransactions(s);return o.transactions=o.transactions.map(c=>this._wrapTransaction(c)),o}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return De(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return ys(()=>De(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return De(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return ys(()=>De(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return i}),{oncePoll:this})})}getLogs(e){return De(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield tr({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Se.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return De(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return De(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&We.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return De(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new jl(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return De(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||We.throwError("network does not support ENS",j.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+to(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return De(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(je(e))throw n}typeof e!="string"&&We.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return De(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=_c(yield this.call({to:n,data:"0x691f3431"+to(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return De(this,void 0,void 0,function*(){let r=null;if(je(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",a=yield this._getResolver(s,"getAvatar");if(!a)return null;r=new jl(this,a,s);try{const o=yield r.getAvatar();if(o)return o.url}catch(o){if(o.code!==j.errors.CALL_EXCEPTION)throw o}try{const o=_c(yield this.call({to:a,data:"0x691f3431"+to(s).substring(2)}),0);r=yield this.getResolver(o)}catch(o){if(o.code!==j.errors.CALL_EXCEPTION)throw o;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return We.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new j6(qs(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=qs(e);return this._events=this._events.filter(a=>a.tag!==s?!0:(setTimeout(()=>{a.listener.apply(this,r)},0),n=!0,a.once?(i.push(a),!1):!0)),i.forEach(a=>{this._stopEvent(a)}),n}listenerCount(e){if(!e)return this._events.length;let r=qs(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=qs(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=qs(e);return this._events=this._events.filter(a=>a.tag!==s||a.listener!=r||i?!0:(i=!0,n.push(a),!1)),n.forEach(a=>{this._stopEvent(a)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=qs(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var vi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const ur=new j(Fr),H6=["call","estimateGas"];function io(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=je(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=io(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return io(JSON.parse(t),e)}catch{}return null}function Lb(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=io(e,!0);if(s)return s.data;ur.throwError("missing revert data in call exception; Transaction reverted without a reason string",j.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=io(e.body,!1);s==null&&(s=io(e,!1)),s&&ur.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===j.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&ur.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&ur.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&ur.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&ur.throwError("legacy pre-eip-155 transactions not supported",j.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),H6.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&ur.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function Tp(t){return new Promise(function(e){setTimeout(e,t)})}function z6(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Ma(t){return t&&t.toLowerCase()}const Kl={};class ah extends Ii{constructor(e,r,n){if(super(),e!==Kl)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Y(this,"provider",r),n==null&&(n=0),typeof n=="string"?(Y(this,"_address",this.provider.formatter.address(n)),Y(this,"_index",null)):typeof n=="number"?(Y(this,"_index",n),Y(this,"_address",null)):ur.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return ur.throwError("cannot alter JSON-RPC Signer connection",j.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new G6(Kl,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&ur.throwError("unknown account #"+this._index,j.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=zt(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=zt(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>vi(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&ur.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),tr({tx:tr(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&ur.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(a=>a,a=>(typeof a.message=="string"&&a.message.match(/user denied/i)&&ur.throwError("user rejected transaction",j.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Lb("sendTransaction",a,s)))})}signTransaction(e){return ur.throwError("signing transactions is unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return vi(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield ys(()=>vi(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return vi(this,void 0,void 0,function*(){const r=typeof e=="string"?fr(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[he(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&ur.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return vi(this,void 0,void 0,function*(){const r=typeof e=="string"?fr(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),he(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&ur.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return vi(this,void 0,void 0,function*(){const i=yield _r.resolveNames(e,r,n,a=>this.provider.resolveName(a)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(_r.getPayload(i.domain,r,i.value))])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&ur.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),a}})}unlock(e){return vi(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class G6 extends ah{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const V6={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class _s extends wf{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(a=>{i(a)},a=>{s(a)})},0)})),super(n),e||(e=Sr(this.constructor,"defaultUrl")()),typeof e=="string"?Y(this,"connection",Object.freeze({url:e})):Y(this,"connection",Object.freeze(zt(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return vi(this,void 0,void 0,function*(){yield Tp(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Sr(this.constructor,"getNetwork");try{return r(fe.from(e).toNumber())}catch(n){return ur.throwError("could not detect network",j.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return ur.throwError("could not detect network",j.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new ah(Kl,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:qr(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Aa(this.connection,JSON.stringify(n),z6).then(a=>(this.emit("debug",{action:"response",request:n,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",error:a,request:n,provider:this}),a});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Ma(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Ma(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Ma(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Ma(r.address),Lt(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Sr(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Sr(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Ma(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return vi(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&fe.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=zt(r),r.transaction=zt(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&ur.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return Lb(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let a=Promise.resolve();return s.forEach(function(o){e._emitted["t:"+o.toLowerCase()]="pending",a=a.then(function(){return e.getTransaction(o).then(function(c){return e.emit("pending",c),null})})}),a.then(function(){return Tp(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=zt(V6);if(r)for(const s in r)r[s]&&(n[s]=!0);Od(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const a=Do(fe.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=a}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=he(e[s]))}),e.accessList&&(i.accessList=cs(e.accessList)),i}}let so=null;try{if(so=WebSocket,so==null)throw new Error("inject please")}catch{const e=new j(Fr);so=function(){e.throwError("WebSockets not supported in this environment",j.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Au=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const ac=new j(Fr);let J6=1;class _f extends _s{constructor(e,r){r==="any"&&ac.throwError("WebSocketProvider does not support 'any' network yet",j.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,r):super("_websocket",r),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Y(this,"_websocket",new so(this.connection.url)):Y(this,"_websocket",e),Y(this,"_requests",{}),Y(this,"_subs",{}),Y(this,"_subIds",{}),Y(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,a=JSON.parse(s);if(a.id!=null){const o=String(a.id),c=this._requests[o];if(delete this._requests[o],a.result!==void 0)c.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(c.payload),response:a.result,provider:this});else{let f=null;a.error?(f=new Error(a.error.message||"unknown error"),Y(f,"code",a.error.code||null),Y(f,"response",s)):f=new Error("unknown error"),c.callback(f,void 0),this.emit("debug",{action:"response",error:f,request:JSON.parse(c.payload),provider:this})}}else if(a.method==="eth_subscription"){const o=this._subs[a.params.subscription];o&&o.processFunc(a.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){ac.throwError("cannot reset events block on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){ac.throwError("cannot set polling interval on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Au(this,void 0,void 0,function*(){return null})}set polling(e){!e||ac.throwError("cannot set polling on WebSocketProvider",j.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,r){const n=J6++;return new Promise((i,s)=>{function a(c,f){return c?s(c):i(f)}const o=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(n)]={callback:a,payload:o},this._wsReady&&this.websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,r,n){return Au(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(r).then(a=>this.send("eth_subscribe",a)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],r=>{const n=fe.from(r.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],r=>{this.emit("pending",r)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],r=>{r.removed==null&&(r.removed=!1),this.emit(e.filter,this.formatter.filterLog(r))});break;case"tx":{const r=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{!s||this.emit(i,s)})};r(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(r)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let r=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;r="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[r];!n||(delete this._subIds[r],n.then(i=>{!this._subs[i]||(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return Au(this,void 0,void 0,function*(){this.websocket.readyState===so.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var W6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ja=new j(Fr);class Fb extends _s{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return W6(this,void 0,void 0,function*(){let r=this.network;return r==null&&(r=yield e.detectNetwork.call(this),r||Ja.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(Y(this,"_network",r),this.emit("network",r,null))),r})}}class Ri extends Fb{constructor(e,r){Ja.checkAbstract(new.target,Ri),e=Sr(new.target,"getNetwork")(e),r=Sr(new.target,"getApiKey")(r);const n=Sr(new.target,"getUrl")(e,r);super(n,e),typeof r=="string"?Y(this,"apiKey",r):r!=null&&Object.keys(r).forEach(i=>{Y(this,i,r[i])})}_startPending(){Ja.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Ja.throwError("API provider does not support signing",j.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,r){return Ja.throwError("not implemented; sub-classes must override getUrl",j.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const kp=new j(Fr),Ec="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class jb extends _f{constructor(e,r){const n=new oh(e,r),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),Y(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===Ec}}class oh extends Ri{static getWebSocketProvider(e,r){return new jb(e,r)}static getApiKey(e){return e==null?Ec:(e&&typeof e!="string"&&kp.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:kp.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+r,throttleCallback:(i,s)=>(r===Ec&&jo(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Ec}}const Y6=new j(Fr),oc="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function X6(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Y6.throwArgumentError("unsupported network","name",t)}class Kb extends Ri{isCommunityResource(){return this.apiKey===oc}static getApiKey(e){return e??oc}static getUrl(e,r){r==null&&(r=oc);const n={allowGzip:!0,url:"https://"+X6(e.name)+r,throttleCallback:(i,s)=>(r.apiKey===oc&&jo(),Promise.resolve(!0))};return r.projectSecret!=null&&(n.user="",n.password=r.projectSecret),n}}var Q6=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Pp=new j(Fr);class $b extends Ri{static getApiKey(e){return e!=null&&Pp.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:Pp.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return Q6(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,r)})}}var cc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const $i=new j(Fr);function Cp(t){const e={};for(let r in t){if(t[r]==null)continue;let n=t[r];r==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?n=Do(he(n)):r==="accessList"?n="["+cs(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=he(n),e[r]=n)}return e}function Z6(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function Ip(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function Rp(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function Su(t,e,r){if(t==="call"&&e.code===j.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),je(s))return s;$i.throwError("missing revert data in call exception",j.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===j.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&$i.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&$i.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&$i.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&$i.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class qb extends wf{constructor(e,r){super(e),Y(this,"baseUrl",this.getBaseUrl()),Y(this,"apiKey",r||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return $i.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,r){const n=Object.keys(r).reduce((s,a)=>{const o=r[a];return o!=null&&(s+=`&${a}=${o}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,r){return r.module=e,r.apikey=this.apiKey,r}fetch(e,r,n){return cc(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,r),s=n?this.getPostData(e,r):null,a=e==="proxy"?Ip:Z6;this.emit("debug",{action:"request",request:i,provider:this});const o={url:i,throttleSlotInterval:1e3,throttleCallback:(u,d)=>(this.isCommunityResource()&&jo(),Promise.resolve(!0))};let c=null;s&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},c=Object.keys(s).map(u=>`${u}=${s[u]}`).join("&"));const f=yield Aa(o,c,a||Ip);return this.emit("debug",{action:"response",request:i,response:qr(f),provider:this}),f})}detectNetwork(){return cc(this,void 0,void 0,function*(){return this.network})}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return cc(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(i=>Su("sendTransaction",i,r.signedTransaction));case"getBlock":if(r.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash});case"call":{if(r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=Cp(r.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return Su("call",s,r.transaction)}}case"estimateGas":{const i=Cp(r.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return Su("estimateGas",s,r.transaction)}}case"getLogs":{const i={action:"getLogs"};if(r.filter.fromBlock&&(i.fromBlock=Rp(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=Rp(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&$i.throwError("unsupported topic count",j.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),r.filter.topics.length===1)){const o=r.filter.topics[0];(typeof o!="string"||o.length!==66)&&$i.throwError("unsupported topic format",j.errors.UNSUPPORTED_OPERATION,{topic0:o}),i.topic0=o}const s=yield this.fetch("logs",i);let a={};for(let o=0;o<s.length;o++){const c=s[o];if(c.blockHash==null){if(a[c.blockNumber]==null){const f=yield this.getBlock(c.blockNumber);f&&(a[c.blockNumber]=f.hash)}c.blockHash=a[c.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,r)})}getHistory(e,r,n){return cc(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:r??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(a=>{["contractAddress","to"].forEach(function(c){a[c]==""&&delete a[c]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const o=this.formatter.transactionResponse(a);return a.timeStamp&&(o.timestamp=parseInt(a.timeStamp)),o})})}isCommunityResource(){return this.apiKey==null}}var zc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?s(u.value):i(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const gs=new j(Fr);function fc(){return new Date().getTime()}function Np(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||gs.throwArgumentError("provider mismatch","networks",t):e=n}return e}function Bp(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function na(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(fe.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>na(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(r=>{let n=t[r];return typeof n=="function"?n="[function]":n=na(n),JSON.stringify(r)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let eE=1;function Mp(t){let e=null,r=null,n=new Promise(a=>{e=function(){r&&(clearTimeout(r),r=null),a()},r=setTimeout(e,t)});const i=a=>(n=n.then(a),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const tE=[j.errors.CALL_EXCEPTION,j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED,j.errors.UNPREDICTABLE_GAS_LIMIT],rE=["address","args","errorArgs","errorSignature","method","transaction"];function uc(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function nE(t,e){return function(r){const n={};r.forEach(s=>{const a=t(s.result);n[a]||(n[a]={count:0,result:s.result}),n[a].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const a=n[i[s]];if(a.count>=e)return a.result}}}function iE(t,e,r){let n=na;switch(e){case"getBlockNumber":return function(i){const s=i.map(o=>o.result);let a=Bp(i.map(o=>o.result),2);if(a!=null)return a=Math.ceil(a),s.indexOf(a+1)>=0&&a++,a>=t._highestBlockNumber&&(t._highestBlockNumber=a),t._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(a=>a.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return Bp(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=zt(i),i.confirmations=-1,na(i))};break;case"getBlock":r.includeTransactions?n=function(i){return i==null?null:(i=zt(i),i.transactions=i.transactions.map(s=>(s=zt(s),s.confirmations=-1,s)),na(i))}:n=function(i){return i==null?null:na(i)};break;default:throw new Error("unknown method: "+e)}return nE(n,t.quorum)}function Oa(t,e){return zc(this,void 0,void 0,function*(){const r=t.provider;return r.blockNumber!=null&&r.blockNumber>=e||e===-1?r:ys(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function sE(t,e,r,n){return zc(this,void 0,void 0,function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&je(n.blockTag)&&(i=yield Oa(t,e)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&je(n.blockTag)&&(i=yield Oa(t,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&je(n.blockTag)&&(i=yield Oa(t,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&je(n.blockTag)&&(i=yield Oa(t,e)),r==="call"&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&je(s.fromBlock)||s.toBlock&&je(s.toBlock))&&(i=yield Oa(t,e)),i.getLogs(s)}}return gs.throwError("unknown method error",j.errors.UNKNOWN_ERROR,{method:r,params:n})})}class Hb extends wf{constructor(e,r){e.length===0&&gs.throwArgumentError("missing providers","providers",e);const n=e.map((a,o)=>{if(Rs.isProvider(a)){const u=Fl(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:u,priority:1})}const c=zt(a);c.priority==null&&(c.priority=1),c.stallTimeout==null&&(c.stallTimeout=Fl(a)?2e3:750),c.weight==null&&(c.weight=1);const f=c.weight;return(f%1||f>512||f<1)&&gs.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${o}].weight`,f),Object.freeze(c)}),i=n.reduce((a,o)=>a+o.weight,0);r==null?r=i/2:r>i&&gs.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);let s=Np(n.map(a=>a.provider.network));s==null&&(s=new Promise((a,o)=>{setTimeout(()=>{this.detectNetwork().then(a,o)},0)})),super(s),Y(this,"providerConfigs",Object.freeze(n)),Y(this,"quorum",r),this._highestBlockNumber=-1}detectNetwork(){return zc(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(r=>r.provider.getNetwork()));return Np(e)})}perform(e,r){return zc(this,void 0,void 0,function*(){if(e==="sendTransaction"){const c=yield Promise.all(this.providerConfigs.map(f=>f.provider.sendTransaction(r.signedTransaction).then(u=>u.hash,u=>u)));for(let f=0;f<c.length;f++){const u=c[f];if(typeof u=="string")return u}throw c[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=iE(this,e,r),i=Ab(this.providerConfigs.map(zt));i.sort((c,f)=>c.priority-f.priority);const s=this._highestBlockNumber;let a=0,o=!0;for(;;){const c=fc();let f=i.filter(b=>b.runner&&c-b.start<b.stallTimeout).reduce((b,E)=>b+E.weight,0);for(;f<this.quorum&&a<i.length;){const b=i[a++],E=eE++;b.start=fc(),b.staller=Mp(b.stallTimeout),b.staller.wait(()=>{b.staller=null}),b.runner=sE(b,s,e,r).then(w=>{b.done=!0,b.result=w,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:E,backend:uc(b,fc()),request:{method:e,params:qr(r)},provider:this})},w=>{b.done=!0,b.error=w,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:E,backend:uc(b,fc()),request:{method:e,params:qr(r)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:E,backend:uc(b,null),request:{method:e,params:qr(r)},provider:this}),f+=b.weight}const u=[];i.forEach(b=>{b.done||!b.runner||(u.push(b.runner),b.staller&&u.push(b.staller.getPromise()))}),u.length&&(yield Promise.race(u));const d=i.filter(b=>b.done&&b.error==null);if(d.length>=this.quorum){const b=n(d);if(b!==void 0)return i.forEach(E=>{E.staller&&E.staller.cancel(),E.cancelled=!0}),b;o||(yield Mp(100).getPromise()),o=!1}const g=i.reduce((b,E)=>{if(!E.done||E.error==null)return b;const w=E.error.code;return tE.indexOf(w)>=0&&(b[w]||(b[w]={error:E.error,weight:0}),b[w].weight+=E.weight),b},{});if(Object.keys(g).forEach(b=>{const E=g[b];if(E.weight<this.quorum)return;i.forEach(_=>{_.staller&&_.staller.cancel(),_.cancelled=!0});const w=E.error,y={};rE.forEach(_=>{w[_]!=null&&(y[_]=w[_])}),gs.throwError(w.reason||w.message,b,y)}),i.filter(b=>!b.done).length===0)break}return i.forEach(c=>{c.staller&&c.staller.cancel(),c.cancelled=!0}),gs.throwError("failed to meet quorum",j.errors.SERVER_ERROR,{method:e,params:r,results:i.map(c=>uc(c)),provider:this})})}}const zb=null,Ac=new j(Fr),Wa="84842078b09946638c03157f83405213";class Gb extends _f{constructor(e,r){const n=new ch(e,r),i=n.connection;i.password&&Ac.throwError("INFURA WebSocket project secrets unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),Y(this,"apiKey",n.projectId),Y(this,"projectId",n.projectId),Y(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===Wa}}class ch extends Ri{static getWebSocketProvider(e,r){return new Gb(e,r)}static getApiKey(e){const r={apiKey:Wa,projectId:Wa,projectSecret:null};return e==null||(typeof e=="string"?r.projectId=e:e.projectSecret!=null?(Ac.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Ac.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:Ac.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+r.projectId,throttleCallback:(s,a)=>(r.projectId===Wa&&jo(),Promise.resolve(!0))};return r.projectSecret!=null&&(i.user="",i.password=r.projectSecret),i}isCommunityResource(){return this.projectId===Wa}}class aE extends _s{send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:n,resolve:null,reject:null},s=new Promise((a,o)=>{i.resolve=a,i.reject=o});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const o=a.map(c=>c.request);return this.emit("debug",{action:"requestBatch",request:qr(o),provider:this}),Aa(this.connection,JSON.stringify(o)).then(c=>{this.emit("debug",{action:"response",request:o,response:c,provider:this}),a.forEach((f,u)=>{const d=c[u];if(d.error){const g=new Error(d.error.message);g.code=d.error.code,g.data=d.error.data,f.reject(g)}else f.resolve(d.result)})},c=>{this.emit("debug",{action:"response",error:c,request:o,provider:this}),a.forEach(f=>{f.reject(c)})})},10)),s}}const Tu=new j(Fr),oE="ETHERS_JS_SHARED";class Vb extends Ri{static getApiKey(e){return e&&typeof e!="string"&&Tu.throwArgumentError("invalid apiKey","apiKey",e),e||oE}static getUrl(e,r){Tu.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Tu.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+r}}const Op=new j(Fr),Dp="62e1ad51b37b8e00394bda3b";class Jb extends Ri{static getApiKey(e){const r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?r.applicationId=Dp:typeof e=="string"?r.applicationId=e:e.applicationSecretKey!=null?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:Op.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:Op.throwError("unsupported network",j.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${r.applicationId}`,s={headers:{},url:i};return r.applicationSecretKey!=null&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===Dp}}const Up=new j(Fr);let cE=1;function Lp(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:cE++,jsonrpc:"2.0"};return new Promise((a,o)=>{this.emit("debug",{action:"request",fetcher:r,request:qr(s),provider:this}),e(s,(c,f)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:s,provider:this}),o(c);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:f,provider:this}),f.error){const u=new Error(f.error.message);return u.code=f.error.code,u.data=f.error.data,o(u)}a(f.result)})})}}function fE(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:qr(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class Wb extends _s{constructor(e,r){e==null&&Up.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=fE(e)):e.sendAsync?i=Lp(e,e.sendAsync.bind(e)):e.send?i=Lp(e,e.send.bind(e)):Up.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),Y(this,"jsonRpcFetchFunc",i),Y(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const Fp=new j(Fr);function fh(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new _s(t);case"ws":case"wss":return new _f(t);default:Fp.throwArgumentError("unsupported URL scheme","network",t)}}const r=sh(t);return(!r||!r._defaultProvider)&&Fp.throwError("unsupported getDefaultProvider network",j.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:Hb,AlchemyProvider:oh,AnkrProvider:Kb,CloudflareProvider:$b,EtherscanProvider:qb,InfuraProvider:ch,JsonRpcProvider:_s,NodesmithProvider:Vb,PocketProvider:Jb,Web3Provider:Wb,IpcProvider:zb},e)}const Yb=Object.freeze(Object.defineProperty({__proto__:null,Provider:Rs,BaseProvider:wf,Resolver:jl,UrlJsonRpcProvider:Ri,FallbackProvider:Hb,AlchemyProvider:oh,AlchemyWebSocketProvider:jb,AnkrProvider:Kb,CloudflareProvider:$b,EtherscanProvider:qb,InfuraProvider:ch,InfuraWebSocketProvider:Gb,JsonRpcProvider:_s,JsonRpcBatchProvider:aE,NodesmithProvider:Vb,PocketProvider:Jb,StaticJsonRpcProvider:Fb,Web3Provider:Wb,WebSocketProvider:_f,IpcProvider:zb,JsonRpcSigner:ah,getDefaultProvider:fh,getNetwork:sh,isCommunityResource:Fl,isCommunityResourcable:Ob,showThrottleMessage:jo,Formatter:Se},Symbol.toStringTag,{value:"Module"})),uE="solidity/5.7.0",lE=new RegExp("^bytes([0-9]+)$"),dE=new RegExp("^(u?int)([0-9]*)$"),hE=new RegExp("^(.*)\\[([0-9]*)\\]$"),pE="0000000000000000000000000000000000000000000000000000000000000000",ea=new j(uE);function Xb(t,e,r){switch(t){case"address":return r?Qa(e,32):ue(e);case"string":return fr(e);case"bytes":return ue(e);case"bool":return e=e?"0x01":"0x00",r?Qa(e,32):ue(e)}let n=t.match(dE);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&ea.throwArgumentError("invalid number type","type",t),r&&(i=256),e=fe.from(e).toTwos(i),Qa(e,i/8)}if(n=t.match(lE),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&ea.throwArgumentError("invalid bytes type","type",t),ue(e).byteLength!==i&&ea.throwArgumentError(`invalid value for ${t}`,"value",e),r?ue((e+pE).substring(0,66)):e}if(n=t.match(hE),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&ea.throwArgumentError(`invalid array length for ${t}`,"value",e);const a=[];return e.forEach(function(o){a.push(Xb(i,o,!0))}),Ut(a)}return ea.throwArgumentError("invalid type","type",t)}function uh(t,e){t.length!=e.length&&ea.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,i){r.push(Xb(n,e[i]))}),he(Ut(r))}function gE(t,e){return Pt(uh(t,e))}function yE(t,e){return Ti(uh(t,e))}const mE="units/5.7.0",Qb=new j(mE),Zb=["wei","kwei","mwei","gwei","szabo","finney","ether"];function bE(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&Qb.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;r.length;)if(r.length<=3){s.unshift(r);break}else{const a=r.length-3;s.unshift(r.substring(a)),r=r.substring(0,a)}return n+s.join(",")+i}function ex(t,e){if(typeof e=="string"){const r=Zb.indexOf(e);r!==-1&&(e=3*r)}return mc(t,e??18)}function tx(t,e){if(typeof t!="string"&&Qb.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=Zb.indexOf(e);r!==-1&&(e=3*r)}return Hn(t,e??18)}function xE(t){return ex(t,18)}function vE(t){return tx(t,18)}const rx=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Gm,defaultAbiCoder:Vm,Fragment:Wn,ConstructorFragment:Rn,ErrorFragment:_i,EventFragment:Jn,FunctionFragment:Nn,ParamType:gr,FormatTypes:ot,checkResultErrors:Im,Logger:j,RLP:q_,_fetchData:Nb,fetchJson:Aa,poll:ys,checkProperties:Od,deepCopy:qr,defineReadOnly:Y,getStatic:Sr,resolveProperties:tr,shallowCopy:zt,arrayify:ue,concat:Ut,stripZeros:Qn,zeroPad:Qa,isBytes:as,isBytesLike:Oo,defaultPath:da,HDNode:on,SigningKey:ms,Interface:Rl,LogDescription:ib,TransactionDescription:sb,base58:ua,base64:R2,hexlify:he,isHexString:je,hexConcat:jr,hexStripZeros:wm,hexValue:Do,hexZeroPad:Lt,hexDataLength:ni,hexDataSlice:or,nameprep:k2,_toEscapedUtf8String:d2,toUtf8Bytes:fr,toUtf8CodePoints:Oc,toUtf8String:Is,Utf8ErrorFuncs:Hm,formatBytes32String:h2,parseBytes32String:p2,dnsEncode:eb,hashMessage:Gd,namehash:to,isValidName:t3,id:zi,_TypedDataEncoder:_r,getAddress:xt,getIcapAddress:J_,getContractAddress:hf,getCreate2Address:W_,isAddress:V_,formatEther:xE,parseEther:vE,formatUnits:ex,parseUnits:tx,commify:bE,computeHmac:mo,keccak256:Pt,ripemd160:vb,sha256:Ti,sha512:z3,randomBytes:ra,shuffled:Ab,solidityPack:uh,solidityKeccak256:gE,soliditySha256:yE,splitSignature:Ps,joinSignature:Pl,accessListify:cs,parseTransaction:pb,serializeTransaction:Ol,get TransactionTypes(){return Ml},getJsonWalletAddress:o6,computeAddress:Ji,recoverAddress:Fo,computePublicKey:Yd,recoverPublicKey:fb,verifyMessage:v6,verifyTypedData:w6,getAccountPath:t6,mnemonicToEntropy:bf,entropyToMnemonic:xf,isValidMnemonic:e6,mnemonicToSeed:Eb,get SupportedAlgorithm(){return la},get UnicodeNormalizationForm(){return ii},get Utf8ErrorReason(){return Jr},Indexed:Uc},Symbol.toStringTag,{value:"Module"})),lh="ethers/5.7.2",nx=new j(lh),ix=Object.freeze(Object.defineProperty({__proto__:null,Signer:Ii,Wallet:Ki,VoidSigner:Lo,getDefaultProvider:fh,providers:Yb,BaseContract:Qd,Contract:Kc,ContractFactory:bb,BigNumber:fe,FixedNumber:pr,constants:Km,get errors(){return sn},logger:nx,utils:rx,wordlists:$c,version:lh,Wordlist:Bs},Symbol.toStringTag,{value:"Module"}));try{const t=window;t._ethers==null&&(t._ethers=ix)}catch{}const wE=Object.freeze(Object.defineProperty({__proto__:null,ethers:ix,Signer:Ii,Wallet:Ki,VoidSigner:Lo,getDefaultProvider:fh,providers:Yb,BaseContract:Qd,Contract:Kc,ContractFactory:bb,BigNumber:fe,FixedNumber:pr,constants:Km,get errors(){return sn},logger:nx,utils:rx,wordlists:$c,version:lh,Wordlist:Bs},Symbol.toStringTag,{value:"Module"})),Ef=Vl(wE);var sx=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wa,"__esModule",{value:!0});const _E=sx(Nd),EE=sx(dm),ku=Ef;class AE extends _E.default{get publicKey(){return X.Buffer.from(this.pk,"hex")}constructor(e){const r=X.Buffer.from(e,"hex"),n=EE.default.publicKeyCreate(r,!1);super(e,X.Buffer.from(n))}sign(e){return new ku.ethers.Wallet(this._key).signMessage(e).then(n=>X.Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){const i=ku.ethers.utils.computeAddress(e);return ku.ethers.utils.verifyMessage(r,n)===i}}wa.default=AE;var dh={},hh={},Af={},ax=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});const Pu=Qi(),SE=ax(As),TE=ax(Un.exports),jp=ks;class kE{constructor(e,r){this._key=e,this.pk=r,this.signatureType=1,this.ownerLength=jp.SIG_CONFIG[1].pubLength,this.signatureLength=jp.SIG_CONFIG[1].sigLength,r||(this.pk=Pu.createPublicKey({key:e,type:"pkcs1",format:"pem"}).export({format:"pem",type:"pkcs1"}).toString())}get publicKey(){return this._publicKey}sign(e){return Pu.createSign("sha256").update(e).sign({key:this._key,padding:Pu.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await SE.default.crypto.verify(X.Buffer.isBuffer(e)?TE.default.encode(e):e,r,n)}}Af.default=kE;var ha={},PE=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CE=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IE=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PE(e,t,r);return CE(e,t),e};Object.defineProperty(ha,"__esModule",{value:!0});ha.jwkTopem=ha.pemTojwk=void 0;const Ni=IE(b1);function RE(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ph(t){return RE(X.Buffer.from(t,"hex").toString("base64"))}var ox=Ni.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),cx=Ni.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),NE=Ni.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(cx),this.key("publicKey").bitstr())}),fx=Ni.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),BE=Ni.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),ux=Ni.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(fx),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(BE))}),ME=Ni.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(fx),this.key("algorithm").use(cx),this.key("privateKey").bitstr())});function lx(t,e){return e=e||{},Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function gh(t){return t.length%2===1?"0"+t:t}function dx(t,e){var r=ox.decode(t,"der"),n=gh(r.e.toString(16)),i={kty:"RSA",n:ji(r.n),e:ph(n)};return lx(i,e)}function hx(t,e){var r=ux.decode(t,"der"),n=gh(r.e.toString(16)),i={kty:"RSA",n:ji(r.n),e:ph(n),d:ji(r.d),p:ji(r.p),q:ji(r.q),dp:ji(r.dp),dq:ji(r.dq),qi:ji(r.qi)};return lx(i,e)}function OE(t,e){var r=NE.decode(t,"der");return dx(r.publicKey.data,e)}function DE(t,e){var r=ME.decode(t,"der");return hx(r.privateKey.data,e)}function UE(t){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(t);if(!e)return null;var r=!!e[1],n=e[2]==="PRIVATE";return n?r?hx:DE:r?dx:OE}function LE(t){return{n:Li(t.n),e:Li(t.e),d:t.d&&Li(t.d),p:t.p&&Li(t.p),q:t.q&&Li(t.q),dp:t.dp&&Li(t.dp),dq:t.dq&&Li(t.dq),qi:t.qi&&Li(t.qi)}}function ji(t){return ph(gh(t.toString(16)))}function FE(t){return new Ni.bignum(X.Buffer.from(t,"base64"))}function Li(t){return/^[0-9]+$/.test(t)?new Ni.bignum(t,10):FE(t)}function jE(t,e){var r=t.toString().split(/(\r\n|\r|\n)+/g);r=r.filter(function(i){return i.trim().length!==0});var n=UE(r[0]);return r=r.slice(1,-1).join(""),n(X.Buffer.from(r.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}ha.pemTojwk=jE;function KE(t){var e=LE(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`,a=X.Buffer.alloc(0);r?(e.version="two-prime",a=ux.encode(e,"der")):a=ox.encode(e,"der");var o=a.toString("base64").match(/.{1,64}/g).join(`
`);return i+o+s}ha.jwkTopem=KE;var yh=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hh,"__esModule",{value:!0});const $E=yh(Af),qE=ha,HE=yh(Un.exports),Kp=yh(As);class zE extends $E.default{constructor(e){super(qE.jwkTopem(e),e.n),this.jwk=e}get publicKey(){return HE.default.toBuffer(this.pk)}sign(e){return Kp.default.crypto.sign(this.jwk,e)}static async verify(e,r,n){return await Kp.default.crypto.verify(e,r,n)}}hh.default=zE;var mh={},GE=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mh,"__esModule",{value:!0});const VE=GE(wa);class JE extends VE.default{}mh.default=JE;var Sa={},px=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sa,"__esModule",{value:!0});const WE=px(Mo),Da=px(Vc);class YE extends WE.default{get publicKey(){return Da.default.decode(this.pk)}get key(){return Da.default.decode(this._key)}constructor(e){const r=Da.default.decode(e);super(Da.default.encode(r.subarray(0,32)),Da.default.encode(r.subarray(32,64)))}}Sa.default=YE;var bh={};Object.defineProperty(bh,"__esModule",{value:!0});const Hs=Ef,Ua=ks;class XE{constructor(e){this.ownerLength=Ua.SIG_CONFIG[Ua.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=Ua.SIG_CONFIG[Ua.SignatureConfig.ETHEREUM].sigLength,this.signatureType=Ua.SignatureConfig.ETHEREUM,this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await Hs.ethers.utils.hashMessage(e),i=Hs.ethers.utils.recoverPublicKey(Hs.ethers.utils.arrayify(n),r);this.publicKey=X.Buffer.from(Hs.ethers.utils.arrayify(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return X.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=Hs.ethers.utils.computeAddress(e);return Hs.ethers.utils.verifyMessage(r,n)===i}}bh.default=XE;var Sf={},QE=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZE=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eA=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QE(e,t,r);return ZE(e,t),e},tA=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sf,"__esModule",{value:!0});const rA=eA(lm),nA=tA(Un.exports),$p=ks;class iA{constructor(e){this.ownerLength=$p.SIG_CONFIG[2].pubLength,this.signatureLength=$p.SIG_CONFIG[2].sigLength,this.signatureType=2,this.provider=e,this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=nA.default.toBuffer(e)),rA.verify(X.Buffer.from(n),X.Buffer.from(r),X.Buffer.from(i))}}Sf.default=iA;var xh={},sA=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xh,"__esModule",{value:!0});const aA=sA(Sa);class oA extends aA.default{constructor(e){super(e.replace("ed25519:",""))}}xh.default=oA;var vh={},cA=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vh,"__esModule",{value:!0});const fA=cA(Mo);class uA extends fA.default{get publicKey(){return X.Buffer.from(this.pk)}get key(){return X.Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}vh.default=uA;var wh={},lA=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wh,"__esModule",{value:!0});const dA=lA(Sf);class hA extends dA.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(X.Buffer.from(X.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,X.Buffer.from(X.Buffer.from(r).toString("hex")),n)}}wh.default=hA;var _h={},pA=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_h,"__esModule",{value:!0});const gA=pA(Sa);class yA extends gA.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(X.Buffer.from(X.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,X.Buffer.from(X.Buffer.from(r).toString("hex")),n)}}_h.default=yA;(function(t){var e=q&&q.__createBinding||(Object.create?function(g,b,E,w){w===void 0&&(w=E),Object.defineProperty(g,w,{enumerable:!0,get:function(){return b[E]}})}:function(g,b,E,w){w===void 0&&(w=E),g[w]=b[E]}),r=q&&q.__exportStar||function(g,b){for(var E in g)E!=="default"&&!Object.prototype.hasOwnProperty.call(b,E)&&e(b,g,E)},n=q&&q.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.HexSolanaSigner=t.HexInjectedSolanaSigner=t.AlgorandSigner=t.NearSigner=t.InjectedEthereumSigner=t.PolygonSigner=t.ArweaveSigner=t.InjectedSolanaSigner=void 0;const i=n(hh);t.ArweaveSigner=i.default,r(wa,t);const s=n(mh);t.PolygonSigner=s.default,r(Sa,t);const a=n(bh);t.InjectedEthereumSigner=a.default;var o=Sf;Object.defineProperty(t,"InjectedSolanaSigner",{enumerable:!0,get:function(){return n(o).default}});var c=xh;Object.defineProperty(t,"NearSigner",{enumerable:!0,get:function(){return n(c).default}});var f=vh;Object.defineProperty(t,"AlgorandSigner",{enumerable:!0,get:function(){return n(f).default}});var u=wh;Object.defineProperty(t,"HexInjectedSolanaSigner",{enumerable:!0,get:function(){return n(u).default}});var d=_h;Object.defineProperty(t,"HexSolanaSigner",{enumerable:!0,get:function(){return n(d).default}})})(dh);var gx=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lf,"__esModule",{value:!0});lf.indexToType=void 0;const mA=gx(Mo),bA=gx(wa),qp=dh;lf.indexToType={1:qp.ArweaveSigner,2:mA.default,3:bA.default,4:qp.HexInjectedSolanaSigner};var yx={};(function(t){var e=q&&q.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=q&&q.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Af,t)})(yx);(function(t){var e=q&&q.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=q&&q.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(uf,t),r(lf,t),r(yx,t),r(dh,t)})(va);var mx={exports:{}},Eh={exports:{}},bx=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},xA=bx,Ms=Object.prototype.toString;function Ah(t){return Ms.call(t)==="[object Array]"}function $l(t){return typeof t>"u"}function vA(t){return t!==null&&!$l(t)&&t.constructor!==null&&!$l(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function wA(t){return Ms.call(t)==="[object ArrayBuffer]"}function _A(t){return typeof FormData<"u"&&t instanceof FormData}function EA(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function AA(t){return typeof t=="string"}function SA(t){return typeof t=="number"}function xx(t){return t!==null&&typeof t=="object"}function Sc(t){if(Ms.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function TA(t){return Ms.call(t)==="[object Date]"}function kA(t){return Ms.call(t)==="[object File]"}function PA(t){return Ms.call(t)==="[object Blob]"}function vx(t){return Ms.call(t)==="[object Function]"}function CA(t){return xx(t)&&vx(t.pipe)}function IA(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function RA(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function NA(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Sh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ah(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function ql(){var t={};function e(i,s){Sc(t[s])&&Sc(i)?t[s]=ql(t[s],i):Sc(i)?t[s]=ql({},i):Ah(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Sh(arguments[r],e);return t}function BA(t,e,r){return Sh(e,function(i,s){r&&typeof i=="function"?t[s]=xA(i,r):t[s]=i}),t}function MA(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var dn={isArray:Ah,isArrayBuffer:wA,isBuffer:vA,isFormData:_A,isArrayBufferView:EA,isString:AA,isNumber:SA,isObject:xx,isPlainObject:Sc,isUndefined:$l,isDate:TA,isFile:kA,isBlob:PA,isFunction:vx,isStream:CA,isURLSearchParams:IA,isStandardBrowserEnv:NA,forEach:Sh,merge:ql,extend:BA,trim:RA,stripBOM:MA},zs=dn;function Hp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var wx=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(zs.isURLSearchParams(r))i=r.toString();else{var s=[];zs.forEach(r,function(c,f){c===null||typeof c>"u"||(zs.isArray(c)?f=f+"[]":c=[c],zs.forEach(c,function(d){zs.isDate(d)?d=d.toISOString():zs.isObject(d)&&(d=JSON.stringify(d)),s.push(Hp(f)+"="+Hp(d))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},OA=dn;function Tf(){this.handlers=[]}Tf.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Tf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Tf.prototype.forEach=function(e){OA.forEach(this.handlers,function(n){n!==null&&e(n)})};var DA=Tf,UA=dn,LA=function(e,r){UA.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},_x=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Cu,zp;function Ex(){if(zp)return Cu;zp=1;var t=_x;return Cu=function(r,n,i,s,a){var o=new Error(r);return t(o,n,i,s,a)},Cu}var Iu,Gp;function FA(){if(Gp)return Iu;Gp=1;var t=Ex();return Iu=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Iu}var Ru,Vp;function jA(){if(Vp)return Ru;Vp=1;var t=dn;return Ru=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,a,o,c){var f=[];f.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),t.isString(a)&&f.push("path="+a),t.isString(o)&&f.push("domain="+o),c===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ru}var Nu,Jp;function KA(){return Jp||(Jp=1,Nu=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Nu}var Bu,Wp;function $A(){return Wp||(Wp=1,Bu=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Bu}var Mu,Yp;function qA(){if(Yp)return Mu;Yp=1;var t=KA(),e=$A();return Mu=function(n,i){return n&&!t(i)?e(n,i):i},Mu}var Ou,Xp;function HA(){if(Xp)return Ou;Xp=1;var t=dn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ou=function(n){var i={},s,a,o;return n&&t.forEach(n.split(`
`),function(f){if(o=f.indexOf(":"),s=t.trim(f.substr(0,o)).toLowerCase(),a=t.trim(f.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},Ou}var Du,Qp;function zA(){if(Qp)return Du;Qp=1;var t=dn;return Du=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){var c=t.isString(o)?s(o):o;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Du}var Uu,Zp;function eg(){if(Zp)return Uu;Zp=1;var t=dn,e=FA(),r=jA(),n=wx,i=qA(),s=HA(),a=zA(),o=Ex();return Uu=function(f){return new Promise(function(d,g){var b=f.data,E=f.headers,w=f.responseType;t.isFormData(b)&&delete E["Content-Type"];var y=new XMLHttpRequest;if(f.auth){var _=f.auth.username||"",A=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";E.Authorization="Basic "+btoa(_+":"+A)}var B=i(f.baseURL,f.url);y.open(f.method.toUpperCase(),n(B,f.params,f.paramsSerializer),!0),y.timeout=f.timeout;function N(){if(!!y){var U="getAllResponseHeaders"in y?s(y.getAllResponseHeaders()):null,H=!w||w==="text"||w==="json"?y.responseText:y.response,V={data:H,status:y.status,statusText:y.statusText,headers:U,config:f,request:y};e(d,g,V),y=null}}if("onloadend"in y?y.onloadend=N:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(N)},y.onabort=function(){!y||(g(o("Request aborted",f,"ECONNABORTED",y)),y=null)},y.onerror=function(){g(o("Network Error",f,null,y)),y=null},y.ontimeout=function(){var H="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(H=f.timeoutErrorMessage),g(o(H,f,f.transitional&&f.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},t.isStandardBrowserEnv()){var O=(f.withCredentials||a(B))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;O&&(E[f.xsrfHeaderName]=O)}"setRequestHeader"in y&&t.forEach(E,function(H,V){typeof b>"u"&&V.toLowerCase()==="content-type"?delete E[V]:y.setRequestHeader(V,H)}),t.isUndefined(f.withCredentials)||(y.withCredentials=!!f.withCredentials),w&&w!=="json"&&(y.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&y.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(H){!y||(y.abort(),g(H),y=null)}),b||(b=null),y.send(b)})},Uu}var Er=dn,tg=LA,GA=_x,VA={"Content-Type":"application/x-www-form-urlencoded"};function rg(t,e){!Er.isUndefined(t)&&Er.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function JA(){var t;return(typeof XMLHttpRequest<"u"||typeof mr.exports<"u"&&Object.prototype.toString.call(mr.exports)==="[object process]")&&(t=eg()),t}function WA(t,e,r){if(Er.isString(t))try{return(e||JSON.parse)(t),Er.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var kf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:JA(),transformRequest:[function(e,r){return tg(r,"Accept"),tg(r,"Content-Type"),Er.isFormData(e)||Er.isArrayBuffer(e)||Er.isBuffer(e)||Er.isStream(e)||Er.isFile(e)||Er.isBlob(e)?e:Er.isArrayBufferView(e)?e.buffer:Er.isURLSearchParams(e)?(rg(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Er.isObject(e)||r&&r["Content-Type"]==="application/json"?(rg(r,"application/json"),WA(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Er.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?GA(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};kf.headers={common:{Accept:"application/json, text/plain, */*"}};Er.forEach(["delete","get","head"],function(e){kf.headers[e]={}});Er.forEach(["post","put","patch"],function(e){kf.headers[e]=Er.merge(VA)});var Th=kf,YA=dn,XA=Th,QA=function(e,r,n){var i=this||XA;return YA.forEach(n,function(a){e=a.call(i,e,r)}),e},Lu,ng;function Ax(){return ng||(ng=1,Lu=function(e){return!!(e&&e.__CANCEL__)}),Lu}var ig=dn,Fu=QA,ZA=Ax(),e4=Th;function ju(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var t4=function(e){ju(e),e.headers=e.headers||{},e.data=Fu.call(e,e.data,e.headers,e.transformRequest),e.headers=ig.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ig.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||e4.adapter;return r(e).then(function(i){return ju(e),i.data=Fu.call(e,i.data,i.headers,e.transformResponse),i},function(i){return ZA(i)||(ju(e),i&&i.response&&(i.response.data=Fu.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Mr=dn,Sx=function(e,r){r=r||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function c(g,b){return Mr.isPlainObject(g)&&Mr.isPlainObject(b)?Mr.merge(g,b):Mr.isPlainObject(b)?Mr.merge({},b):Mr.isArray(b)?b.slice():b}function f(g){Mr.isUndefined(r[g])?Mr.isUndefined(e[g])||(n[g]=c(void 0,e[g])):n[g]=c(e[g],r[g])}Mr.forEach(i,function(b){Mr.isUndefined(r[b])||(n[b]=c(void 0,r[b]))}),Mr.forEach(s,f),Mr.forEach(a,function(b){Mr.isUndefined(r[b])?Mr.isUndefined(e[b])||(n[b]=c(void 0,e[b])):n[b]=c(void 0,r[b])}),Mr.forEach(o,function(b){b in r?n[b]=c(e[b],r[b]):b in e&&(n[b]=c(void 0,e[b]))});var u=i.concat(s).concat(a).concat(o),d=Object.keys(e).concat(Object.keys(r)).filter(function(b){return u.indexOf(b)===-1});return Mr.forEach(d,f),n};const r4="axios",n4="0.21.4",i4="Promise based HTTP client for the browser and node.js",s4="index.js",a4={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},o4={type:"git",url:"https://github.com/axios/axios.git"},c4=["xhr","http","ajax","promise","node"],f4="Matt Zabriskie",u4="MIT",l4={url:"https://github.com/axios/axios/issues"},d4="https://axios-http.com",h4={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},p4={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},g4="dist/axios.min.js",y4="dist/axios.min.js",m4="./index.d.ts",b4={"follow-redirects":"^1.14.0"},x4=[{path:"./dist/axios.min.js",threshold:"5kB"}],v4={name:r4,version:n4,description:i4,main:s4,scripts:a4,repository:o4,keywords:c4,author:f4,license:u4,bugs:l4,homepage:d4,devDependencies:h4,browser:p4,jsdelivr:g4,unpkg:y4,typings:m4,dependencies:b4,bundlesize:x4};var Tx=v4,kh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){kh[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var sg={},w4=Tx.version.split(".");function kx(t,e){for(var r=e?e.split("."):w4,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}kh.transitional=function(e,r,n){var i=r&&kx(r);function s(a,o){return"[Axios v"+Tx.version+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,c){if(e===!1)throw new Error(s(o," has been removed in "+r));return i&&!sg[o]&&(sg[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,c):!0}};function _4(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var E4={isOlderVersion:kx,assertOptions:_4,validators:kh},Px=dn,A4=wx,ag=DA,og=t4,Pf=Sx,Cx=E4,Gs=Cx.validators;function Ko(t){this.defaults=t,this.interceptors={request:new ag,response:new ag}}Ko.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Pf(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&Cx.assertOptions(r,{silentJSONParsing:Gs.transitional(Gs.boolean,"1.0.0"),forcedJSONParsing:Gs.transitional(Gs.boolean,"1.0.0"),clarifyTimeoutError:Gs.transitional(Gs.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(i=i&&g.synchronous,n.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var a;if(!i){var o=[og,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(s),a=Promise.resolve(e);o.length;)a=a.then(o.shift(),o.shift());return a}for(var c=e;n.length;){var f=n.shift(),u=n.shift();try{c=f(c)}catch(d){u(d);break}}try{a=og(c)}catch(d){return Promise.reject(d)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Ko.prototype.getUri=function(e){return e=Pf(this.defaults,e),A4(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Px.forEach(["delete","get","head","options"],function(e){Ko.prototype[e]=function(r,n){return this.request(Pf(n||{},{method:e,url:r,data:(n||{}).data}))}});Px.forEach(["post","put","patch"],function(e){Ko.prototype[e]=function(r,n,i){return this.request(Pf(i||{},{method:e,url:r,data:n}))}});var S4=Ko,Ku,cg;function Ix(){if(cg)return Ku;cg=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Ku=t,Ku}var $u,fg;function T4(){if(fg)return $u;fg=1;var t=Ix();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;r(function(a){i.reason||(i.reason=new t(a),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var n,i=new e(function(a){n=a});return{token:i,cancel:n}},$u=e,$u}var qu,ug;function k4(){return ug||(ug=1,qu=function(e){return function(n){return e.apply(null,n)}}),qu}var Hu,lg;function P4(){return lg||(lg=1,Hu=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Hu}var dg=dn,C4=bx,Tc=S4,I4=Sx,R4=Th;function Rx(t){var e=new Tc(t),r=C4(Tc.prototype.request,e);return dg.extend(r,Tc.prototype,e),dg.extend(r,e),r}var Dn=Rx(R4);Dn.Axios=Tc;Dn.create=function(e){return Rx(I4(Dn.defaults,e))};Dn.Cancel=Ix();Dn.CancelToken=T4();Dn.isCancel=Ax();Dn.all=function(e){return Promise.all(e)};Dn.spread=k4();Dn.isAxiosError=P4();Eh.exports=Dn;Eh.exports.default=Dn;(function(t){t.exports=Eh.exports})(mx);var hg;function Ph(){return hg||(hg=1,function(t){var e=q&&q.__createBinding||(Object.create?function(_,A,B,N){N===void 0&&(N=B),Object.defineProperty(_,N,{enumerable:!0,get:function(){return A[B]}})}:function(_,A,B,N){N===void 0&&(N=B),_[N]=A[B]}),r=q&&q.__setModuleDefault||(Object.create?function(_,A){Object.defineProperty(_,"default",{enumerable:!0,value:A})}:function(_,A){_.default=A}),n=q&&q.__importStar||function(_){if(_&&_.__esModule)return _;var A={};if(_!=null)for(var B in _)B!=="default"&&Object.prototype.hasOwnProperty.call(_,B)&&e(A,_,B);return r(A,_),A},i=q&&q.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_BINARY_SIZE=void 0;const s=lr,a=pd,o=i(Un.exports),c=X,f=Bx(),u=va,d=So,g=i(mx.exports),b=ks,E=n(Qi()),w=i(As);t.MIN_BINARY_SIZE=80;class y{constructor(A){this.binary=A}static isDataItem(A){return A.binary!==void 0}get signatureType(){const A=s.byteArrayToLong(this.binary.subarray(0,2));switch(A){case 1:return b.SignatureConfig.ARWEAVE;case 2:return b.SignatureConfig.ED25519;case 3:return b.SignatureConfig.ETHEREUM;case 4:return b.SignatureConfig.SOLANA;default:throw new Error("Unknown signature type: "+A)}}async isValid(){return y.verify(this.binary)}get id(){return o.default.encode(this.rawId)}set id(A){this._id=o.default.toBuffer(A)}get rawId(){return E.createHash("sha256").update(this.rawSignature).digest()}set rawId(A){this._id=A}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return o.default.encode(this.rawSignature)}get signatureLength(){return b.SIG_CONFIG[this.signatureType].sigLength}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get owner(){return o.default.encode(this.rawOwner)}get ownerLength(){return b.SIG_CONFIG[this.signatureType].pubLength}get rawTarget(){const A=this.getTargetStart();return this.binary[A]==1?this.binary.subarray(A+1,A+33):c.Buffer.alloc(0)}get target(){return o.default.encode(this.rawTarget)}get rawAnchor(){const A=this.getAnchorStart();return this.binary[A]==1?this.binary.subarray(A+1,A+33):c.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const A=this.getTagsStart(),B=s.byteArrayToLong(this.binary.subarray(A+8,A+16));return this.binary.subarray(A+16,A+16+B)}get tags(){const A=this.getTagsStart();if(s.byteArrayToLong(this.binary.subarray(A,A+8))==0)return[];const N=s.byteArrayToLong(this.binary.subarray(A+8,A+16));return a.tagsParser.fromBuffer(c.Buffer.from(this.binary.subarray(A+16,A+16+N)))}get tagsB64Url(){return this.tags.map(B=>({name:o.default.encode(B.name),value:o.default.encode(B.value)}))}getStartOfData(){const A=this.getTagsStart(),B=this.binary.subarray(A+8,A+16),N=s.byteArrayToLong(B);return A+16+N}get rawData(){const A=this.getTagsStart(),B=this.binary.subarray(A+8,A+16),N=s.byteArrayToLong(B),O=A+16+N;return this.binary.subarray(O,this.binary.length)}get data(){return o.default.encode(this.rawData)}getRaw(){return this.binary}async sign(A){return this._id=await f.sign(this,A),this.rawId}async setSignature(A){this.binary.set(A,2),this._id=c.Buffer.from(await w.default.crypto.hash(A))}isSigned(){var A,B;return((B=(A=this._id)===null||A===void 0?void 0:A.length)!==null&&B!==void 0?B:0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(A=>({name:o.default.encode(A.name),value:o.default.encode(A.value)})),data:this.data}}async sendToBundler(A){const B={"Content-Type":"application/octet-stream"};if(!this.isSigned())throw new Error("You must sign before sending to bundler");const N=await g.default.post(`${A}/tx`,this.getRaw(),{headers:B,timeout:1e5,maxBodyLength:1/0,validateStatus:O=>O>200&&O<300||O!==402});if(N.status===402)throw new Error("Not enough funds to send data");return N}static async verify(A){if(A.byteLength<t.MIN_BINARY_SIZE)return!1;const B=new y(A),N=B.signatureType,O=B.getTagsStart(),U=s.byteArrayToLong(A.subarray(O,O+8)),H=A.subarray(O+8,O+16),V=s.byteArrayToLong(H);if(V>4096)return!1;if(U>0)try{if(a.tagsParser.fromBuffer(c.Buffer.from(A.subarray(O+16,O+16+V))).length!==U)return!1}catch{return!1}const re=u.indexToType[N],ae=await d.getSignatureData(B);return await re.verify(B.rawOwner,ae,B.rawSignature)}async getSignatureData(){return d.getSignatureData(this)}getTagsStart(){const A=this.getTargetStart(),B=this.binary[A]==1;let N=A+(B?33:1);const O=this.binary[N]==1;return N+=O?33:1,N}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let A=this.getTargetStart()+1;const B=this.binary[this.getTargetStart()]==1;return A+=B?32:0,A}}t.default=y}(cu)),cu}var pg;function Nx(){if(pg)return Zo;pg=1;var t=q&&q.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Zo,"__esModule",{value:!0});const e=t(Un.exports),r=lr,n=t(Ph()),i=Qi(),s=32;class a{constructor(c){this.binary=c,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(c){if(typeof c=="number"){if(c>=this.length)throw new RangeError("Index out of range");return this.getByIndex(c)}else return this.getById(c)}getSizes(){const c=[];for(let f=s;f<s+64*this.length;f+=64)c.push(r.byteArrayToLong(this.binary.subarray(f,f+32)));return c}getIds(){const c=[];for(let f=s;f<s+64*this.length;f+=64)c.push(e.default.encode(this.binary.subarray(f+32,f+64)));return c}getIdBy(c){if(c>this.length-1)throw new RangeError("Index of bundle out of range");const f=64+64*c;return e.default.encode(this.binary.subarray(f,f+32))}async toTransaction(c,f,u){const d=await f.createTransaction({data:this.binary,...c},u);return d.addTag("Bundle-Format","binary"),d.addTag("Bundle-Version","2.0.0"),d}async verify(){for(const c of this.items){const f=await c.isValid(),u=e.default(i.createHash("sha256").update(c.rawSignature).digest());if(!(f&&c.id===u))return!1}return!0}getOffset(c){let f=0;for(let u=s;u<s+64*this.length;u+=64){const d=r.byteArrayToLong(this.binary.subarray(u,u+32));f+=d;const g=this.binary.subarray(u+32,u+64);if(r.arraybufferEqual(g,c))return{startOffset:f,size:d}}return{startOffset:-1,size:-1}}getByIndex(c){let f=0;const u=32+64*c,d=r.byteArrayToLong(this.binary.subarray(u,u+32));let g=0;for(let _=s;_<s+64*this.length&&g!=c;_+=64){const A=r.byteArrayToLong(this.binary.subarray(_,_+32));f+=A,g++}const E=this.getBundleStart()+f,w=this.binary.subarray(E,E+d+200),y=new n.default(w);return y.rawId=this.binary.slice(32+64*c,64+64*c),y}getById(c){const f=e.default.toBuffer(c),u=this.getOffset(f);if(u.startOffset===-1)throw new Error("Transaction not found");const g=this.getBundleStart()+u.startOffset;return new n.default(this.binary.subarray(g,g+u.size))}getDataItemCount(){return r.byteArrayToLong(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const c=new Array(this.length);let f=0;const u=this.getBundleStart();let d=0;for(let g=s;g<s+64*this.length;g+=64){const b=r.byteArrayToLong(this.binary.subarray(g,g+32)),E=this.binary.subarray(g+32,g+64),w=u+f,y=this.binary.subarray(w,w+b);f+=b;const _=new n.default(y);_.rawId=E,c[d]=_,d++}return c}}return Zo.default=a,Zo}var gg;function Bx(){if(gg)return Tn;gg=1;var t=q&&q.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.sign=Tn.getSignatureAndId=Tn.bundleAndSignData=Tn.unbundleData=void 0;const e=So,r=lr,n=t(As),i=t(Nx());function s(f){return new i.default(f)}Tn.unbundleData=s;async function a(f,u){const d=new Uint8Array(64*f.length),g=await Promise.all(f.map(async(E,w)=>{const y=E.isSigned()?E.rawId:await c(E,u),_=new Uint8Array(64);return _.set(r.longTo32ByteArray(E.getRaw().byteLength),0),_.set(y,32),d.set(_,64*w),E.getRaw()})).then(E=>X.Buffer.concat(E)),b=X.Buffer.concat([r.longTo32ByteArray(f.length),d,g]);return new i.default(b)}Tn.bundleAndSignData=a;async function o(f,u){const d=await e.getSignatureData(f),g=await u.sign(d),b=await n.default.crypto.hash(g);return{signature:X.Buffer.from(g),id:X.Buffer.from(b)}}Tn.getSignatureAndId=o;async function c(f,u){const{signature:d,id:g}=await o(f,u);return f.getRaw().set(d,2),g}return Tn.sign=c,Tn}var Cf={},Ch=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.createData=void 0;const zu=Ch(x1()),N4=Ch(Un.exports),Gu=lr,B4=Ch(Ph()),M4=pd;function O4(t,e,r){var n,i,s,a,o,c,f;const u=e.publicKey,d=r?.target?N4.default.toBuffer(r.target):null,g=1+((n=d?.byteLength)!==null&&n!==void 0?n:0),b=r?.anchor?X.Buffer.from(r.anchor):null,E=1+((i=b?.byteLength)!==null&&i!==void 0?i:0),w=((a=(s=r?.tags)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0)>0?M4.serializeTags(r.tags):null,y=16+(w?w.byteLength:0),_=typeof t=="string"?X.Buffer.from(t):X.Buffer.from(t),A=_.byteLength,B=2+e.signatureLength+e.ownerLength+g+E+y+A,N=X.Buffer.alloc(B);N.set(Gu.shortTo2ByteArray(e.signatureType),0),N.set(new Uint8Array(e.signatureLength).fill(0),2),zu.default(u.byteLength==e.ownerLength,new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${u.byteLength}`)),N.set(u,2+e.signatureLength);const O=2+e.signatureLength+e.ownerLength;N[O]=d?1:0,d&&(zu.default(d.byteLength==32,new Error("Target must be 32 bytes but was incorrectly ${_target.byteLength}")),N.set(d,O+1));const U=O+g;let H=U+1;N[U]=b?1:0,b&&(H+=b.byteLength,zu.default(b.byteLength==32,new Error("Anchor must be 32 bytes")),N.set(b,U+1)),N.set(Gu.longTo8ByteArray((c=(o=r?.tags)===null||o===void 0?void 0:o.length)!==null&&c!==void 0?c:0),H);const V=Gu.longTo8ByteArray((f=w?.byteLength)!==null&&f!==void 0?f:0);N.set(V,H+8),w&&N.set(w,H+16);const re=H+y;return N.set(_,re),new B4.default(N)}Cf.createData=O4;(function(t){var e=q&&q.__createBinding||(Object.create?function(E,w,y,_){_===void 0&&(_=y),Object.defineProperty(E,_,{enumerable:!0,get:function(){return w[y]}})}:function(E,w,y,_){_===void 0&&(_=y),E[_]=w[y]}),r=q&&q.__setModuleDefault||(Object.create?function(E,w){Object.defineProperty(E,"default",{enumerable:!0,value:w})}:function(E,w){E.default=w}),n=q&&q.__importStar||function(E){if(E&&E.__esModule)return E;var w={};if(E!=null)for(var y in E)y!=="default"&&Object.prototype.hasOwnProperty.call(E,y)&&e(w,E,y);return r(w,E),w},i=q&&q.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.signers=t.deepHash=t.unbundleData=t.bundleAndSignData=t.createData=t.DataItem=t.Bundle=t.MIN_BINARY_SIZE=void 0;const s=Bx();Object.defineProperty(t,"bundleAndSignData",{enumerable:!0,get:function(){return s.bundleAndSignData}}),Object.defineProperty(t,"unbundleData",{enumerable:!0,get:function(){return s.unbundleData}});const a=i(Nx());t.Bundle=a.default;const o=n(Ph());t.DataItem=o.default,Object.defineProperty(t,"MIN_BINARY_SIZE",{enumerable:!0,get:function(){return o.MIN_BINARY_SIZE}});const c=Ei;Object.defineProperty(t,"deepHash",{enumerable:!0,get:function(){return c.deepHash}});const f=Cf;Object.defineProperty(t,"createData",{enumerable:!0,get:function(){return f.createData}});const u=va,d=i(Sa),g=i(wa),b={ArweaveSigner:u.ArweaveSigner,SolanaSigner:d.default,EthereumSigner:g.default};t.signers=b})(Ao);var Os={};(function(t){var e=q&&q.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const r=e(es);r.default.set({DECIMAL_PLACES:50});const n=s=>new Promise(a=>setTimeout(a,s));t.sleep=n;class i{constructor(a,o,c){this.api=a,this.currency=o,this.currencyConfig=c}static checkAndThrow(a,o,c){if(a?.status&&!(c??[]).includes(a.status)&&a.status!=200)throw new Error(`HTTP Error: ${o}: ${a.status} ${typeof a.data!="string"?a.statusText:a.data}`)}async getNonce(){const a=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(a,"Getting withdrawal nonce"),a.data}async getBalance(a){const o=await this.api.get(`/account/balance/${this.currency}?address=${a}`);return i.checkAndThrow(o,"Getting balance"),new r.default(o.data.balance)}async getBundlerAddress(a){const o=await this.api.get("/info");i.checkAndThrow(o,"Getting Bundler address");const c=o.data.addresses[a];if(!c)throw new Error(`Specified bundler does not support currency ${a}`);return c}async getPrice(a,o){const c=await this.api.get(`/price/${a}/${o}`);return i.checkAndThrow(c,"Getting storage cost"),new r.default(c.data)}async confirmationPoll(a){if(!this.currencyConfig.isSlow){for(let o=0;o<30;o++)if(await(0,t.sleep)(1e3),await this.currencyConfig.getTx(a).then(c=>c?.confirmed).catch(c=>!1))return;console.warn(`Tx ${a} didn't finalize after 30 seconds`)}}unitConverter(a){return new r.default(a).dividedBy(this.currencyConfig.base[1])}}t.default=i})(Os);var Ih=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.withdrawBalance=void 0;const yg=Ao,Vs=Jt,D4=Ih(Os),U4=Ih(es),Js=Ih(Un.exports);async function L4(t,e,r){const n=t.currencyConfig,s={publicKey:await n.getPublicKey(),currency:t.currency,amount:new U4.default(r).toString(),nonce:await t.getNonce(),signature:void 0,sigType:n.getSigner().signatureType},a=await(0,yg.deepHash)([(0,Vs.stringToBuffer)(s.currency),(0,Vs.stringToBuffer)(s.amount.toString()),(0,Vs.stringToBuffer)(s.nonce.toString())]);X.Buffer.isBuffer(s.publicKey)||(s.publicKey=X.Buffer.from(s.publicKey)),s.signature=await n.sign(a);const o=await n.verify(s.publicKey,a,s.signature);s.publicKey=Js.default.encode(s.publicKey),s.signature=Js.default.encode(s.signature);const c=Js.default.toBuffer(s.publicKey),f=Js.default.toBuffer(s.signature),u=await(0,yg.deepHash)([(0,Vs.stringToBuffer)(s.currency),(0,Vs.stringToBuffer)(s.amount.toString()),(0,Vs.stringToBuffer)(s.nonce.toString())]),d=await n.verify(c,u,f),g=n.ownerToAddress(n.name=="arweave"?Js.default.decode(s.publicKey):Js.default.toBuffer(s.publicKey))===n.address;if(!(o||d||g))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(s)}`);const b=await e.post("/account/withdraw",s);return D4.default.checkAndThrow(b,"Withdrawing balance"),b}Zc.withdrawBalance=L4;var Rh={},F4=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rh,"__esModule",{value:!0});const mg=Ao,j4=F4(Qi());class K4 extends mg.DataItem{constructor(e,r,n){var i;super((0,mg.createData)(e,r.currencyConfig.getSigner(),{...n,anchor:(i=n?.anchor)!==null&&i!==void 0?i:j4.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=r,this.signer=r.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}Rh.default=K4;var $4=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(td,"__esModule",{value:!0});const q4=Zc,H4=$4(Rh);class z4{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,q4.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,r){return new H4.default(e,this,r)}getSigner(){return this.currencyConfig.getSigner()}}td.default=z4;var Nh={},Mx={exports:{}},Ox={};function wn(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var G4=wn;wn.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};wn.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};wn.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};wn.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};wn.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};wn.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};wn.prototype.start=wn.prototype.try;wn.prototype.errors=function(){return this._errors};wn.prototype.attempts=function(){return this._attempts};wn.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e};(function(t){var e=G4;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,c){return o-c}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],c=r[o];r[o]=function(u){var d=t.operation(n),g=Array.prototype.slice.call(arguments,1),b=g.pop();g.push(function(E){d.retry(E)||(E&&(arguments[0]=d.mainError()),b.apply(this,arguments))}),d.attempt(function(){u.apply(r,g)})}.bind(r,c),r[o].options=n}}})(Ox);(function(t){t.exports=Ox})(Mx);var V4=Mx.exports;function J4(t,e){function r(n,i){var s=e||{},a;"randomize"in s||(s.randomize=!0),a=V4.operation(s);function o(u){i(u||new Error("Aborted"))}function c(u,d){if(u.bail){o(u);return}a.retry(u)?s.onRetry&&s.onRetry(u,d):i(a.mainError())}function f(u){var d;try{d=t(o,u)}catch(g){c(g,u);return}Promise.resolve(d).then(n).catch(function(b){c(b,u)})}a.attempt(f)}return new Promise(r)}var If=J4,Bh=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nh,"__esModule",{value:!0});const W4=Bh(If),Y4=Bh(es),bg=Bh(Os);class X4{constructor(e){this.utils=e}async fund(e,r=1){const n=new Y4.default(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.currencyConfig,s=await this.utils.getBundlerAddress(this.utils.currency);let a="0";i.needsFee&&(a=(await i.getFee(i.base[0]==="winston"?0:n,s)).multipliedBy(r).toFixed(0).toString());const o=await i.createTx(n,s,a);let c;try{c=await i.sendTx(o.tx)}catch(u){throw u}if(o.txId||(o.txId=c),bg.default.checkAndThrow(c,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(o.txId),!await(0,W4.default)(async u=>{const d=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:o.txId});return d.status==400&&u(new Error(`failed to post funding tx - ${o.txId} (keep this id!) - ${d.data}`)),bg.default.checkAndThrow(d,`Posting transaction ${o.txId} information to the bundler`,[202]),d},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${o.txId} - keep this id!`);return{reward:a,target:s,quantity:n.toString(),id:o.txId}}}Nh.default=X4;var $o={},Dx={},La={},Fa={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.PromisePoolError=void 0;class Q4 extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}qo.PromisePoolError=Q4;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.StopThePromisePoolError=void 0;class Z4 extends Error{}Ho.StopThePromisePoolError=Z4;var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.ValidationError=void 0;class e5 extends Error{constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}zo.ValidationError=e5;var xg;function t5(){if(xg)return Fa;xg=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.PromisePoolExecutor=void 0;const t=Hl(),e=qo,r=Ho,n=zo;class i{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(a){if(!this.isValidConcurrency(a))throw n.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${a}" (${typeof a})`);return this.meta.concurrency=a,this}isValidConcurrency(a){return typeof a=="number"&&a>=1}withTaskTimeout(a){return this.meta.taskTimeout=a,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(a){return this.meta.shouldResultsCorrespond=a,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(a){return this.meta.items=a,this}items(){return this.meta.items}itemsCount(){return this.items().length}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(a){return this.handler=a,this}hasErrorHandler(){return!!this.errorHandler}handleError(a){return this.errorHandler=a,this}onTaskStarted(a){return this.onTaskStartedHandlers=a,this}onTaskFinished(a){return this.onTaskFinishedHandlers=a,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new r.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw n.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const a=this.taskTimeout();if(!(a==null||typeof a=="number"&&a>=0))throw n.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(a)}" (${typeof a})`);if(!Array.isArray(this.items()))throw n.ValidationError.createFrom(`"items" must be an array. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw n.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(o=>{if(o&&typeof o!="function")throw n.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof o}"`)}),this.onTaskFinishedHandlers.forEach(o=>{if(o&&typeof o!="function")throw n.ValidationError.createFrom(`The error handler must be a function. Received "${typeof o}"`)}),this}prepareResultsArray(){return this.shouldUseCorrespondingResults()&&(this.meta.results=Array(this.items().length).fill(t.PromisePool.notRun)),this}async process(){for(const[a,o]of this.items().entries()){if(this.isStopped())break;await this.waitForProcessingSlot(),this.startProcessing(o,a)}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(a,o){const c=this.createTaskFor(a,o).then(f=>{this.save(f,o).removeActive(c)}).catch(async f=>{await this.handleErrorFor(f,a,o),this.removeActive(c)}).finally(()=>{this.processedItems().push(a),this.runOnTaskFinishedHandlers(a)});this.tasks().push(c),this.runOnTaskStartedHandlers(a)}async createTaskFor(a,o){return this.taskTimeout()===void 0?this.handler(a,o,this):Promise.race([this.handler(a,o,this),this.createTaskTimeout(a)])}async createTaskTimeout(a){return new Promise((o,c)=>{setTimeout(()=>{c(new e.PromisePoolError(`Promise in pool timed out after ${this.taskTimeout()}ms`,a))},this.taskTimeout())})}save(a,o){return this.shouldUseCorrespondingResults()?this.results()[o]=a:this.results().push(a),this}removeActive(a){return this.tasks().splice(this.tasks().indexOf(a),1),this}async handleErrorFor(a,o,c){if(this.shouldUseCorrespondingResults()&&(this.results()[c]=t.PromisePool.failed),!this.isStoppingThePoolError(a)){if(this.isValidationError(a))throw this.markAsStopped(),a;this.hasErrorHandler()?await this.runErrorHandlerFor(a,o):this.saveErrorFor(a,o)}}isStoppingThePoolError(a){return a instanceof r.StopThePromisePoolError}isValidationError(a){return a instanceof n.ValidationError}async runErrorHandlerFor(a,o){var c;try{await((c=this.errorHandler)===null||c===void 0?void 0:c.call(this,a,o,this))}catch(f){this.rethrowIfNotStoppingThePool(f)}}runOnTaskStartedHandlers(a){this.onTaskStartedHandlers.forEach(o=>{o(a,this)})}runOnTaskFinishedHandlers(a){this.onTaskFinishedHandlers.forEach(o=>{o(a,this)})}rethrowIfNotStoppingThePool(a){if(!this.isStoppingThePoolError(a))throw a}saveErrorFor(a,o){this.errors().push(e.PromisePoolError.createFrom(a,o))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}return Fa.PromisePoolExecutor=i,Fa}var vg;function Hl(){if(vg)return La;vg=1,Object.defineProperty(La,"__esModule",{value:!0}),La.PromisePool=void 0;const t=t5();class e{constructor(n){this.timeout=void 0,this.concurrency=10,this.shouldResultsCorrespond=!1,this.items=n??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}withConcurrency(n){return this.concurrency=n,this}static withConcurrency(n){return new this().withConcurrency(n)}withTaskTimeout(n){return this.timeout=n,this}static withTaskTimeout(n){return new this().withTaskTimeout(n)}for(n){return typeof this.timeout=="number"?new e(n).withConcurrency(this.concurrency).withTaskTimeout(this.timeout):new e(n).withConcurrency(this.concurrency)}static for(n){return new this().for(n)}handleError(n){return this.errorHandler=n,this}onTaskStarted(n){return this.onTaskStartedHandlers.push(n),this}onTaskFinished(n){return this.onTaskFinishedHandlers.push(n),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(n){return new t.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(n).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}return La.PromisePool=e,e.notRun=Symbol("notRun"),e.failed=Symbol("failed"),La}var Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});var Lx={};Object.defineProperty(Lx,"__esModule",{value:!0});(function(t){var e=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(s,a);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,c)}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Hl();t.default=n.PromisePool,r(Ux,t),r(Hl(),t),r(qo,t),r(Lx,t),r(Ho,t),r(zo,t)})(Dx);var Rf={},Fx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATES=void 0;const e=Symbol("not readable"),r=Symbol("readable"),n=Symbol("ended"),i=Symbol("errored");t.STATES={notReadable:e,readable:r,ended:n,errored:i};class s{constructor(o,{size:c}={}){this._state=t.STATES.notReadable,this._rejections=new Set,this._stream=o,this._size=c;const f=["_handleStreamEnd","_handleStreamError"];for(const u of f)Object.defineProperty(this,u,{configurable:!0,writable:!0,value:this[u].bind(this)});o.once("error",this._handleStreamError),o.once("end",this._handleStreamEnd),o.on("readable",()=>{this._state=t.STATES.readable})}get closed(){return this._state===t.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case t.STATES.notReadable:{let o,c;try{o=this._untilReadable(),c=this._untilEnd(),await Promise.race([o.promise,c.promise])}finally{o?.close(),c?.close()}return this.next()}case t.STATES.ended:return this.close(),{done:!0,value:void 0};case t.STATES.errored:throw this.close(),this._error;case t.STATES.readable:{const o=this._size?this._stream.read(this._size):this._stream.read();return o!==null?{done:!1,value:o}:(this._state=t.STATES.notReadable,await new Promise(c=>setTimeout(f=>f(!0),0,c)),this.next())}}}_untilReadable(){let o;const c=new Promise((u,d)=>{o=()=>{this._state=t.STATES.readable,this._rejections.delete(d),u()},this._state,t.STATES.readable,this._stream.once("readable",o),this._rejections.add(d)});return{close:()=>{o!=null&&this._stream.removeListener("readable",o)},promise:c}}_untilEnd(){let o;const c=new Promise((u,d)=>{o=()=>{this._state=t.STATES.ended,this._rejections.delete(d),u()},this._stream.once("end",o),this._rejections.add(d)});return{close:()=>{o!=null&&this._stream.removeListener("end",o)},promise:c}}return(){return this._state=t.STATES.ended,this.next()}throw(o){return this._error=o,this._state=t.STATES.errored,this.next()}close(o){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=t.STATES.ended,this._stream.destroy(o)}_handleStreamError(o){this._error=o,this._state=t.STATES.errored;for(const c of this._rejections)c(o)}_handleStreamEnd(){this._state=t.STATES.ended}get state(){return this._state}}t.default=s})(Fx);var Nf=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.ChunkingUploader=void 0;const Vu=Ao,wg=Gc,r5=ey.exports,Ju=Nf(Os),n5=Nf(Qi()),Wu=lt,i5=Nf(If),s5=Nf(Fx);class a5 extends r5.EventEmitter{constructor(e,r){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=r,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return Vu.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.runUpload(e,{...r})}async runUpload(e,r){var n,i,s;let a=this.uploadID;const o=r===void 0,c={"x-chunking-version":"2"};let f;if(!a)f=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:c}),Ju.default.checkAndThrow(f,"Getting upload token"),this.uploadID=a=f.data.id;else{if(f=await this.api.get(`/chunks/${this.currency}/${a}/-1`,{headers:c}),f.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(Ju.default.checkAndThrow(f,"Getting upload info"),this.chunkSize!=+f.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+f.data.size}).`)}const{max:u,min:d}=f.data;if(this.chunkSize<+d||this.chunkSize>+u)throw new Error(`Chunk size out of allowed range: ${d} - ${u}`);let g=0;const b=(T,l,m)=>new Promise(S=>{(0,i5.default)(async()=>{await this.api.post(`/chunks/${this.currency}/${a}/${l}`,T,{headers:{"Content-Type":"application/octet-stream",...c},maxBodyLength:1/0,maxContentLength:1/0}).then(I=>{if(I?.status>=300){const M={res:I,id:m,offset:l,size:T.length};throw this.emit("chunkError",M),M}this.emit("chunkUpload",{id:m,offset:l,size:T.length,totalUploaded:g+=T.length}),S({o:l,d:I})})})}),E=(n=f.data.chunks)!==null&&n!==void 0?n:[],w=new wg.PassThrough;let y=X.Buffer.alloc(0),_=!1,A=!0;w.on("end",()=>_=!0),w.on("error",T=>{throw new Error(`Error processing readable: ${T}`)});const B=async T=>{for(;!_;){if(y.length>=T)return l=X.Buffer.from(y.slice(0,T)),y=y.slice(T),l;var l=w.read(T);if(l===null){await new Promise(m=>setTimeout(S=>S(!0),0,m));continue}if(l.length===T)return l;y=X.Buffer.concat([y,l])}for(;y.length>=T;)return l=X.Buffer.from(y.slice(0,T)),y=y.slice(T),l;return A=!1,y};let N;o||(N=(0,Vu.createData)("",this.currencyConfig.getSigner(),{...r,anchor:(i=r?.anchor)!==null&&i!==void 0?i:n5.default.randomBytes(32).toString("base64").slice(0,32)}),w.write(N.getRaw()),g-=N.getRaw().length),X.Buffer.isBuffer(e)?(w.write(e),w.end()):e.pipe(w);let O=0,U=[],H=0,V,re,ae;if(!o){re=new wg.PassThrough;const T=N.getRaw().length;V=await B(this.chunkSize),H++,O+=V.length,re.write(V.slice(T));const l=[(0,Wu.stringToBuffer)("dataitem"),(0,Wu.stringToBuffer)("1"),(0,Wu.stringToBuffer)(N.signatureType.toString()),N.rawOwner,N.rawTarget,N.rawAnchor,N.rawTags,new s5.default(re)];ae=(0,Vu.deepHash)(l)}let de=E.pop();for(;A;){if(this.paused&&await new Promise(l=>this.on("resume",()=>l(void 0))),de&&+de[0]-O<=this.chunkSize){const m=de[1],S=await B(m);o||re.write(S),O+=m,de=E.pop(),H++,g+=m;continue}const T=await B(this.chunkSize);o||re.write(T),U.length==this.batchSize&&(await Promise.all(U),U=[]),U.push(b(T,O,++H)),O+=T.length}if(re&&re.end(),await Promise.all(U),!o){const T=await ae,l=X.Buffer.from(await this.currencyConfig.getSigner().sign(T));V.set(l,2),await b(V,0,0)}const ee=await this.api.post(`/chunks/${this.currency}/${a}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...c},timeout:this.api.config.timeout*10});if(ee.status===402)throw new Error("Not enough funds to send data");return Ju.default.checkAndThrow(ee,"Finalising upload",[201]),ee.status===201&&(ee.data={id:(s=ee.statusText.split(" "))===null||s===void 0?void 0:s[1]}),this.emit("done",ee),ee}get completionPromise(){return new Promise(e=>this.on("done",e))}}Rf.ChunkingUploader=a5;var jx=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($o,"__esModule",{value:!0});$o.sleep=void 0;const o5=Ao,c5=jx(Dx),f5=jx(If),u5=Rf,l5=t=>new Promise(e=>setTimeout(e,t));$o.sleep=l5;class d5{constructor(e,r,n,i){this.api=e,this.currency=n,this.currencyConfig=i,this.utils=r}async upload(e,r){return await this.chunkedUploader.uploadData(e,r)}get chunkedUploader(){return new u5.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let r;const n=o5.DataItem.isDataItem(e);if(this.forceUseChunking||n&&e.getRaw().length>5e7||!n)r=await this.chunkedUploader.uploadTransaction(n?e.getRaw():e);else{const{protocol:i,host:s,port:a,timeout:o}=this.api.getConfig();r=await this.api.post(`${i}://${s}:${a}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:o,maxBodyLength:1/0}),r.status==201&&(r.data={id:e.id})}switch(r.status){case 402:throw new Error("Not enough funds to send data");default:if(r.status>=400)throw new Error(`whilst uploading DataItem: ${r.status} ${r.statusText}`)}return r}async concurrentUploader(e,r=5,n,i){const s=[],a=await c5.default.for(e).withConcurrency(r>=1?r:5).handleError(async(o,c)=>{if(s.push(o),o.message==="Not enough funds to send data")throw o}).process(async(o,c,f)=>{await(0,f5.default)(async u=>{try{const d=await this.processItem(o);return c%r==0&&await i(`Processed ${c} Items`),n?await n({item:o,res:d,i:c}):{item:o,res:d,i:c}}catch(d){throw d.message==="Not enough funds to send data"&&u(d),d}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:s,results:a.results}}async processItem(e){return typeof e=="string"&&(e=X.Buffer.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,a]of r.entries())i.paths[s]={id:a};return i}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}$o.default=d5;var Mh={},Bf={},fs={},Mf=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fs,"__esModule",{value:!0});fs.getRedstonePrice=void 0;const h5=Mf(As),p5=Mf(Un.exports),g5=Mf(Jc.exports),y5=Mf(Os);class m5{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return p5.default.encode(X.Buffer.from(await h5.default.crypto.hash(await e.rawSignature())))}async price(){return Kx(this.ticker)}}fs.default=m5;async function Kx(t){const e=await g5.default.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await y5.default.checkAndThrow(e,"Getting price data"),e.data[0].value}fs.getRedstonePrice=Kx;var Oh=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bf,"__esModule",{value:!0});const b5=Oh(xm),zl=Ef,ds=Oh(es),$x=va,x5=Oh(fs),v5=zl.ethers.BigNumber,w5=$x.InjectedEthereumSigner;class _5 extends x5.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");return{from:n.from,to:n.to,blockHeight:n.blockNumber?new ds.default(n.blockNumber):null,amount:new ds.default(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,b5.default)(X.Buffer.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new $x.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,r,n){return w5.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new ds.default(r,16)}async getFee(e,r){const n=this.providerInstance,i={to:r,from:this.address,value:"0x"+new ds.default(e).toString(16)},s=await n.estimateGas(i),a=await n.getGasPrice();return new ds.default(s.mul(a).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const i=v5.from(new ds.default(e).toFixed()),s=this.w3signer,a=await s.estimateGas({to:r,from:this.address,value:i.toHexString()});let o=await s.getGasPrice();return this.name==="matic"&&(o=zl.ethers.BigNumber.from(new ds.default(o.toString()).multipliedBy(10).decimalPlaces(0).toString())),{txId:void 0,tx:await s.populateTransaction({to:r,from:this.address,value:i.toHexString(),gasPrice:o,gasLimit:a})}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new zl.ethers.providers.JsonRpcProvider(this.providerUrl),await((e=this.providerInstance)===null||e===void 0?void 0:e._ready())}}Bf.default=_5;var Dh={},qx={},Hx={},Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.KeyStore=void 0;class E5{}Ds.KeyStore=E5;var Go={},si={};function A5(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zx={exports:{}};(function(t){(function(e){var r=function(v){var k,C=new Float64Array(16);if(v)for(k=0;k<v.length;k++)C[k]=v[k];return C},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var a=r(),o=r([1]),c=r([56129,1]),f=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(v,k,C,h){v[k]=C>>24&255,v[k+1]=C>>16&255,v[k+2]=C>>8&255,v[k+3]=C&255,v[k+4]=h>>24&255,v[k+5]=h>>16&255,v[k+6]=h>>8&255,v[k+7]=h&255}function w(v,k,C,h,R){var G,z=0;for(G=0;G<R;G++)z|=v[k+G]^C[h+G];return(1&z-1>>>8)-1}function y(v,k,C,h){return w(v,k,C,h,16)}function _(v,k,C,h){return w(v,k,C,h,32)}function A(v,k,C,h){for(var R=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,G=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,z=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,Q=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,oe=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,pe=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,ce=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,$e=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,xe=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,ke=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,Pe=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,Me=C[16]&255|(C[17]&255)<<8|(C[18]&255)<<16|(C[19]&255)<<24,Be=C[20]&255|(C[21]&255)<<8|(C[22]&255)<<16|(C[23]&255)<<24,Ce=C[24]&255|(C[25]&255)<<8|(C[26]&255)<<16|(C[27]&255)<<24,Re=C[28]&255|(C[29]&255)<<8|(C[30]&255)<<16|(C[31]&255)<<24,Ie=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,ve=R,Ae=G,me=z,we=Q,Ee=oe,be=pe,J=ce,W=$e,se=xe,te=ke,ie=Pe,le=Me,Ne=Be,Le=Ce,qe=Re,Fe=Ie,L,Ge=0;Ge<20;Ge+=2)L=ve+Ne|0,Ee^=L<<7|L>>>32-7,L=Ee+ve|0,se^=L<<9|L>>>32-9,L=se+Ee|0,Ne^=L<<13|L>>>32-13,L=Ne+se|0,ve^=L<<18|L>>>32-18,L=be+Ae|0,te^=L<<7|L>>>32-7,L=te+be|0,Le^=L<<9|L>>>32-9,L=Le+te|0,Ae^=L<<13|L>>>32-13,L=Ae+Le|0,be^=L<<18|L>>>32-18,L=ie+J|0,qe^=L<<7|L>>>32-7,L=qe+ie|0,me^=L<<9|L>>>32-9,L=me+qe|0,J^=L<<13|L>>>32-13,L=J+me|0,ie^=L<<18|L>>>32-18,L=Fe+le|0,we^=L<<7|L>>>32-7,L=we+Fe|0,W^=L<<9|L>>>32-9,L=W+we|0,le^=L<<13|L>>>32-13,L=le+W|0,Fe^=L<<18|L>>>32-18,L=ve+we|0,Ae^=L<<7|L>>>32-7,L=Ae+ve|0,me^=L<<9|L>>>32-9,L=me+Ae|0,we^=L<<13|L>>>32-13,L=we+me|0,ve^=L<<18|L>>>32-18,L=be+Ee|0,J^=L<<7|L>>>32-7,L=J+be|0,W^=L<<9|L>>>32-9,L=W+J|0,Ee^=L<<13|L>>>32-13,L=Ee+W|0,be^=L<<18|L>>>32-18,L=ie+te|0,le^=L<<7|L>>>32-7,L=le+ie|0,se^=L<<9|L>>>32-9,L=se+le|0,te^=L<<13|L>>>32-13,L=te+se|0,ie^=L<<18|L>>>32-18,L=Fe+qe|0,Ne^=L<<7|L>>>32-7,L=Ne+Fe|0,Le^=L<<9|L>>>32-9,L=Le+Ne|0,qe^=L<<13|L>>>32-13,L=qe+Le|0,Fe^=L<<18|L>>>32-18;ve=ve+R|0,Ae=Ae+G|0,me=me+z|0,we=we+Q|0,Ee=Ee+oe|0,be=be+pe|0,J=J+ce|0,W=W+$e|0,se=se+xe|0,te=te+ke|0,ie=ie+Pe|0,le=le+Me|0,Ne=Ne+Be|0,Le=Le+Ce|0,qe=qe+Re|0,Fe=Fe+Ie|0,v[0]=ve>>>0&255,v[1]=ve>>>8&255,v[2]=ve>>>16&255,v[3]=ve>>>24&255,v[4]=Ae>>>0&255,v[5]=Ae>>>8&255,v[6]=Ae>>>16&255,v[7]=Ae>>>24&255,v[8]=me>>>0&255,v[9]=me>>>8&255,v[10]=me>>>16&255,v[11]=me>>>24&255,v[12]=we>>>0&255,v[13]=we>>>8&255,v[14]=we>>>16&255,v[15]=we>>>24&255,v[16]=Ee>>>0&255,v[17]=Ee>>>8&255,v[18]=Ee>>>16&255,v[19]=Ee>>>24&255,v[20]=be>>>0&255,v[21]=be>>>8&255,v[22]=be>>>16&255,v[23]=be>>>24&255,v[24]=J>>>0&255,v[25]=J>>>8&255,v[26]=J>>>16&255,v[27]=J>>>24&255,v[28]=W>>>0&255,v[29]=W>>>8&255,v[30]=W>>>16&255,v[31]=W>>>24&255,v[32]=se>>>0&255,v[33]=se>>>8&255,v[34]=se>>>16&255,v[35]=se>>>24&255,v[36]=te>>>0&255,v[37]=te>>>8&255,v[38]=te>>>16&255,v[39]=te>>>24&255,v[40]=ie>>>0&255,v[41]=ie>>>8&255,v[42]=ie>>>16&255,v[43]=ie>>>24&255,v[44]=le>>>0&255,v[45]=le>>>8&255,v[46]=le>>>16&255,v[47]=le>>>24&255,v[48]=Ne>>>0&255,v[49]=Ne>>>8&255,v[50]=Ne>>>16&255,v[51]=Ne>>>24&255,v[52]=Le>>>0&255,v[53]=Le>>>8&255,v[54]=Le>>>16&255,v[55]=Le>>>24&255,v[56]=qe>>>0&255,v[57]=qe>>>8&255,v[58]=qe>>>16&255,v[59]=qe>>>24&255,v[60]=Fe>>>0&255,v[61]=Fe>>>8&255,v[62]=Fe>>>16&255,v[63]=Fe>>>24&255}function B(v,k,C,h){for(var R=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,G=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,z=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,Q=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,oe=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,pe=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,ce=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,$e=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,xe=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,ke=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,Pe=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,Me=C[16]&255|(C[17]&255)<<8|(C[18]&255)<<16|(C[19]&255)<<24,Be=C[20]&255|(C[21]&255)<<8|(C[22]&255)<<16|(C[23]&255)<<24,Ce=C[24]&255|(C[25]&255)<<8|(C[26]&255)<<16|(C[27]&255)<<24,Re=C[28]&255|(C[29]&255)<<8|(C[30]&255)<<16|(C[31]&255)<<24,Ie=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,ve=R,Ae=G,me=z,we=Q,Ee=oe,be=pe,J=ce,W=$e,se=xe,te=ke,ie=Pe,le=Me,Ne=Be,Le=Ce,qe=Re,Fe=Ie,L,Ge=0;Ge<20;Ge+=2)L=ve+Ne|0,Ee^=L<<7|L>>>32-7,L=Ee+ve|0,se^=L<<9|L>>>32-9,L=se+Ee|0,Ne^=L<<13|L>>>32-13,L=Ne+se|0,ve^=L<<18|L>>>32-18,L=be+Ae|0,te^=L<<7|L>>>32-7,L=te+be|0,Le^=L<<9|L>>>32-9,L=Le+te|0,Ae^=L<<13|L>>>32-13,L=Ae+Le|0,be^=L<<18|L>>>32-18,L=ie+J|0,qe^=L<<7|L>>>32-7,L=qe+ie|0,me^=L<<9|L>>>32-9,L=me+qe|0,J^=L<<13|L>>>32-13,L=J+me|0,ie^=L<<18|L>>>32-18,L=Fe+le|0,we^=L<<7|L>>>32-7,L=we+Fe|0,W^=L<<9|L>>>32-9,L=W+we|0,le^=L<<13|L>>>32-13,L=le+W|0,Fe^=L<<18|L>>>32-18,L=ve+we|0,Ae^=L<<7|L>>>32-7,L=Ae+ve|0,me^=L<<9|L>>>32-9,L=me+Ae|0,we^=L<<13|L>>>32-13,L=we+me|0,ve^=L<<18|L>>>32-18,L=be+Ee|0,J^=L<<7|L>>>32-7,L=J+be|0,W^=L<<9|L>>>32-9,L=W+J|0,Ee^=L<<13|L>>>32-13,L=Ee+W|0,be^=L<<18|L>>>32-18,L=ie+te|0,le^=L<<7|L>>>32-7,L=le+ie|0,se^=L<<9|L>>>32-9,L=se+le|0,te^=L<<13|L>>>32-13,L=te+se|0,ie^=L<<18|L>>>32-18,L=Fe+qe|0,Ne^=L<<7|L>>>32-7,L=Ne+Fe|0,Le^=L<<9|L>>>32-9,L=Le+Ne|0,qe^=L<<13|L>>>32-13,L=qe+Le|0,Fe^=L<<18|L>>>32-18;v[0]=ve>>>0&255,v[1]=ve>>>8&255,v[2]=ve>>>16&255,v[3]=ve>>>24&255,v[4]=be>>>0&255,v[5]=be>>>8&255,v[6]=be>>>16&255,v[7]=be>>>24&255,v[8]=ie>>>0&255,v[9]=ie>>>8&255,v[10]=ie>>>16&255,v[11]=ie>>>24&255,v[12]=Fe>>>0&255,v[13]=Fe>>>8&255,v[14]=Fe>>>16&255,v[15]=Fe>>>24&255,v[16]=J>>>0&255,v[17]=J>>>8&255,v[18]=J>>>16&255,v[19]=J>>>24&255,v[20]=W>>>0&255,v[21]=W>>>8&255,v[22]=W>>>16&255,v[23]=W>>>24&255,v[24]=se>>>0&255,v[25]=se>>>8&255,v[26]=se>>>16&255,v[27]=se>>>24&255,v[28]=te>>>0&255,v[29]=te>>>8&255,v[30]=te>>>16&255,v[31]=te>>>24&255}function N(v,k,C,h){A(v,k,C,h)}function O(v,k,C,h){B(v,k,C,h)}var U=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function H(v,k,C,h,R,G,z){var Q=new Uint8Array(16),oe=new Uint8Array(64),pe,ce;for(ce=0;ce<16;ce++)Q[ce]=0;for(ce=0;ce<8;ce++)Q[ce]=G[ce];for(;R>=64;){for(N(oe,Q,z,U),ce=0;ce<64;ce++)v[k+ce]=C[h+ce]^oe[ce];for(pe=1,ce=8;ce<16;ce++)pe=pe+(Q[ce]&255)|0,Q[ce]=pe&255,pe>>>=8;R-=64,k+=64,h+=64}if(R>0)for(N(oe,Q,z,U),ce=0;ce<R;ce++)v[k+ce]=C[h+ce]^oe[ce];return 0}function V(v,k,C,h,R){var G=new Uint8Array(16),z=new Uint8Array(64),Q,oe;for(oe=0;oe<16;oe++)G[oe]=0;for(oe=0;oe<8;oe++)G[oe]=h[oe];for(;C>=64;){for(N(z,G,R,U),oe=0;oe<64;oe++)v[k+oe]=z[oe];for(Q=1,oe=8;oe<16;oe++)Q=Q+(G[oe]&255)|0,G[oe]=Q&255,Q>>>=8;C-=64,k+=64}if(C>0)for(N(z,G,R,U),oe=0;oe<C;oe++)v[k+oe]=z[oe];return 0}function re(v,k,C,h,R){var G=new Uint8Array(32);O(G,h,R,U);for(var z=new Uint8Array(8),Q=0;Q<8;Q++)z[Q]=h[Q+16];return V(v,k,C,z,G)}function ae(v,k,C,h,R,G,z){var Q=new Uint8Array(32);O(Q,G,z,U);for(var oe=new Uint8Array(8),pe=0;pe<8;pe++)oe[pe]=G[pe+16];return H(v,k,C,h,R,oe,Q)}var de=function(v){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var k,C,h,R,G,z,Q,oe;k=v[0]&255|(v[1]&255)<<8,this.r[0]=k&8191,C=v[2]&255|(v[3]&255)<<8,this.r[1]=(k>>>13|C<<3)&8191,h=v[4]&255|(v[5]&255)<<8,this.r[2]=(C>>>10|h<<6)&7939,R=v[6]&255|(v[7]&255)<<8,this.r[3]=(h>>>7|R<<9)&8191,G=v[8]&255|(v[9]&255)<<8,this.r[4]=(R>>>4|G<<12)&255,this.r[5]=G>>>1&8190,z=v[10]&255|(v[11]&255)<<8,this.r[6]=(G>>>14|z<<2)&8191,Q=v[12]&255|(v[13]&255)<<8,this.r[7]=(z>>>11|Q<<5)&8065,oe=v[14]&255|(v[15]&255)<<8,this.r[8]=(Q>>>8|oe<<8)&8191,this.r[9]=oe>>>5&127,this.pad[0]=v[16]&255|(v[17]&255)<<8,this.pad[1]=v[18]&255|(v[19]&255)<<8,this.pad[2]=v[20]&255|(v[21]&255)<<8,this.pad[3]=v[22]&255|(v[23]&255)<<8,this.pad[4]=v[24]&255|(v[25]&255)<<8,this.pad[5]=v[26]&255|(v[27]&255)<<8,this.pad[6]=v[28]&255|(v[29]&255)<<8,this.pad[7]=v[30]&255|(v[31]&255)<<8};de.prototype.blocks=function(v,k,C){for(var h=this.fin?0:2048,R,G,z,Q,oe,pe,ce,$e,xe,ke,Pe,Me,Be,Ce,Re,Ie,ve,Ae,me,we=this.h[0],Ee=this.h[1],be=this.h[2],J=this.h[3],W=this.h[4],se=this.h[5],te=this.h[6],ie=this.h[7],le=this.h[8],Ne=this.h[9],Le=this.r[0],qe=this.r[1],Fe=this.r[2],L=this.r[3],Ge=this.r[4],st=this.r[5],at=this.r[6],ze=this.r[7],rt=this.r[8],nt=this.r[9];C>=16;)R=v[k+0]&255|(v[k+1]&255)<<8,we+=R&8191,G=v[k+2]&255|(v[k+3]&255)<<8,Ee+=(R>>>13|G<<3)&8191,z=v[k+4]&255|(v[k+5]&255)<<8,be+=(G>>>10|z<<6)&8191,Q=v[k+6]&255|(v[k+7]&255)<<8,J+=(z>>>7|Q<<9)&8191,oe=v[k+8]&255|(v[k+9]&255)<<8,W+=(Q>>>4|oe<<12)&8191,se+=oe>>>1&8191,pe=v[k+10]&255|(v[k+11]&255)<<8,te+=(oe>>>14|pe<<2)&8191,ce=v[k+12]&255|(v[k+13]&255)<<8,ie+=(pe>>>11|ce<<5)&8191,$e=v[k+14]&255|(v[k+15]&255)<<8,le+=(ce>>>8|$e<<8)&8191,Ne+=$e>>>5|h,xe=0,ke=xe,ke+=we*Le,ke+=Ee*(5*nt),ke+=be*(5*rt),ke+=J*(5*ze),ke+=W*(5*at),xe=ke>>>13,ke&=8191,ke+=se*(5*st),ke+=te*(5*Ge),ke+=ie*(5*L),ke+=le*(5*Fe),ke+=Ne*(5*qe),xe+=ke>>>13,ke&=8191,Pe=xe,Pe+=we*qe,Pe+=Ee*Le,Pe+=be*(5*nt),Pe+=J*(5*rt),Pe+=W*(5*ze),xe=Pe>>>13,Pe&=8191,Pe+=se*(5*at),Pe+=te*(5*st),Pe+=ie*(5*Ge),Pe+=le*(5*L),Pe+=Ne*(5*Fe),xe+=Pe>>>13,Pe&=8191,Me=xe,Me+=we*Fe,Me+=Ee*qe,Me+=be*Le,Me+=J*(5*nt),Me+=W*(5*rt),xe=Me>>>13,Me&=8191,Me+=se*(5*ze),Me+=te*(5*at),Me+=ie*(5*st),Me+=le*(5*Ge),Me+=Ne*(5*L),xe+=Me>>>13,Me&=8191,Be=xe,Be+=we*L,Be+=Ee*Fe,Be+=be*qe,Be+=J*Le,Be+=W*(5*nt),xe=Be>>>13,Be&=8191,Be+=se*(5*rt),Be+=te*(5*ze),Be+=ie*(5*at),Be+=le*(5*st),Be+=Ne*(5*Ge),xe+=Be>>>13,Be&=8191,Ce=xe,Ce+=we*Ge,Ce+=Ee*L,Ce+=be*Fe,Ce+=J*qe,Ce+=W*Le,xe=Ce>>>13,Ce&=8191,Ce+=se*(5*nt),Ce+=te*(5*rt),Ce+=ie*(5*ze),Ce+=le*(5*at),Ce+=Ne*(5*st),xe+=Ce>>>13,Ce&=8191,Re=xe,Re+=we*st,Re+=Ee*Ge,Re+=be*L,Re+=J*Fe,Re+=W*qe,xe=Re>>>13,Re&=8191,Re+=se*Le,Re+=te*(5*nt),Re+=ie*(5*rt),Re+=le*(5*ze),Re+=Ne*(5*at),xe+=Re>>>13,Re&=8191,Ie=xe,Ie+=we*at,Ie+=Ee*st,Ie+=be*Ge,Ie+=J*L,Ie+=W*Fe,xe=Ie>>>13,Ie&=8191,Ie+=se*qe,Ie+=te*Le,Ie+=ie*(5*nt),Ie+=le*(5*rt),Ie+=Ne*(5*ze),xe+=Ie>>>13,Ie&=8191,ve=xe,ve+=we*ze,ve+=Ee*at,ve+=be*st,ve+=J*Ge,ve+=W*L,xe=ve>>>13,ve&=8191,ve+=se*Fe,ve+=te*qe,ve+=ie*Le,ve+=le*(5*nt),ve+=Ne*(5*rt),xe+=ve>>>13,ve&=8191,Ae=xe,Ae+=we*rt,Ae+=Ee*ze,Ae+=be*at,Ae+=J*st,Ae+=W*Ge,xe=Ae>>>13,Ae&=8191,Ae+=se*L,Ae+=te*Fe,Ae+=ie*qe,Ae+=le*Le,Ae+=Ne*(5*nt),xe+=Ae>>>13,Ae&=8191,me=xe,me+=we*nt,me+=Ee*rt,me+=be*ze,me+=J*at,me+=W*st,xe=me>>>13,me&=8191,me+=se*Ge,me+=te*L,me+=ie*Fe,me+=le*qe,me+=Ne*Le,xe+=me>>>13,me&=8191,xe=(xe<<2)+xe|0,xe=xe+ke|0,ke=xe&8191,xe=xe>>>13,Pe+=xe,we=ke,Ee=Pe,be=Me,J=Be,W=Ce,se=Re,te=Ie,ie=ve,le=Ae,Ne=me,k+=16,C-=16;this.h[0]=we,this.h[1]=Ee,this.h[2]=be,this.h[3]=J,this.h[4]=W,this.h[5]=se,this.h[6]=te,this.h[7]=ie,this.h[8]=le,this.h[9]=Ne},de.prototype.finish=function(v,k){var C=new Uint16Array(10),h,R,G,z;if(this.leftover){for(z=this.leftover,this.buffer[z++]=1;z<16;z++)this.buffer[z]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(h=this.h[1]>>>13,this.h[1]&=8191,z=2;z<10;z++)this.h[z]+=h,h=this.h[z]>>>13,this.h[z]&=8191;for(this.h[0]+=h*5,h=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=h,h=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=h,C[0]=this.h[0]+5,h=C[0]>>>13,C[0]&=8191,z=1;z<10;z++)C[z]=this.h[z]+h,h=C[z]>>>13,C[z]&=8191;for(C[9]-=1<<13,R=(h^1)-1,z=0;z<10;z++)C[z]&=R;for(R=~R,z=0;z<10;z++)this.h[z]=this.h[z]&R|C[z];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,G=this.h[0]+this.pad[0],this.h[0]=G&65535,z=1;z<8;z++)G=(this.h[z]+this.pad[z]|0)+(G>>>16)|0,this.h[z]=G&65535;v[k+0]=this.h[0]>>>0&255,v[k+1]=this.h[0]>>>8&255,v[k+2]=this.h[1]>>>0&255,v[k+3]=this.h[1]>>>8&255,v[k+4]=this.h[2]>>>0&255,v[k+5]=this.h[2]>>>8&255,v[k+6]=this.h[3]>>>0&255,v[k+7]=this.h[3]>>>8&255,v[k+8]=this.h[4]>>>0&255,v[k+9]=this.h[4]>>>8&255,v[k+10]=this.h[5]>>>0&255,v[k+11]=this.h[5]>>>8&255,v[k+12]=this.h[6]>>>0&255,v[k+13]=this.h[6]>>>8&255,v[k+14]=this.h[7]>>>0&255,v[k+15]=this.h[7]>>>8&255},de.prototype.update=function(v,k,C){var h,R;if(this.leftover){for(R=16-this.leftover,R>C&&(R=C),h=0;h<R;h++)this.buffer[this.leftover+h]=v[k+h];if(C-=R,k+=R,this.leftover+=R,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(C>=16&&(R=C-C%16,this.blocks(v,k,R),k+=R,C-=R),C){for(h=0;h<C;h++)this.buffer[this.leftover+h]=v[k+h];this.leftover+=C}};function ee(v,k,C,h,R,G){var z=new de(G);return z.update(C,h,R),z.finish(v,k),0}function T(v,k,C,h,R,G){var z=new Uint8Array(16);return ee(z,0,C,h,R,G),y(v,k,z,0)}function l(v,k,C,h,R){var G;if(C<32)return-1;for(ae(v,0,k,0,C,h,R),ee(v,16,v,32,C-32,v),G=0;G<16;G++)v[G]=0;return 0}function m(v,k,C,h,R){var G,z=new Uint8Array(32);if(C<32||(re(z,0,32,h,R),T(k,16,k,32,C-32,z)!==0))return-1;for(ae(v,0,k,0,C,h,R),G=0;G<32;G++)v[G]=0;return 0}function S(v,k){var C;for(C=0;C<16;C++)v[C]=k[C]|0}function I(v){var k,C,h=1;for(k=0;k<16;k++)C=v[k]+h+65535,h=Math.floor(C/65536),v[k]=C-h*65536;v[0]+=h-1+37*(h-1)}function M(v,k,C){for(var h,R=~(C-1),G=0;G<16;G++)h=R&(v[G]^k[G]),v[G]^=h,k[G]^=h}function D(v,k){var C,h,R,G=r(),z=r();for(C=0;C<16;C++)z[C]=k[C];for(I(z),I(z),I(z),h=0;h<2;h++){for(G[0]=z[0]-65517,C=1;C<15;C++)G[C]=z[C]-65535-(G[C-1]>>16&1),G[C-1]&=65535;G[15]=z[15]-32767-(G[14]>>16&1),R=G[15]>>16&1,G[14]&=65535,M(z,G,1-R)}for(C=0;C<16;C++)v[2*C]=z[C]&255,v[2*C+1]=z[C]>>8}function K(v,k){var C=new Uint8Array(32),h=new Uint8Array(32);return D(C,v),D(h,k),_(C,0,h,0)}function x(v){var k=new Uint8Array(32);return D(k,v),k[0]&1}function p(v,k){var C;for(C=0;C<16;C++)v[C]=k[2*C]+(k[2*C+1]<<8);v[15]&=32767}function P(v,k,C){for(var h=0;h<16;h++)v[h]=k[h]+C[h]}function $(v,k,C){for(var h=0;h<16;h++)v[h]=k[h]-C[h]}function F(v,k,C){var h,R,G=0,z=0,Q=0,oe=0,pe=0,ce=0,$e=0,xe=0,ke=0,Pe=0,Me=0,Be=0,Ce=0,Re=0,Ie=0,ve=0,Ae=0,me=0,we=0,Ee=0,be=0,J=0,W=0,se=0,te=0,ie=0,le=0,Ne=0,Le=0,qe=0,Fe=0,L=C[0],Ge=C[1],st=C[2],at=C[3],ze=C[4],rt=C[5],nt=C[6],sr=C[7],bt=C[8],Xt=C[9],Qt=C[10],Zt=C[11],dr=C[12],Rr=C[13],Nr=C[14],Br=C[15];h=k[0],G+=h*L,z+=h*Ge,Q+=h*st,oe+=h*at,pe+=h*ze,ce+=h*rt,$e+=h*nt,xe+=h*sr,ke+=h*bt,Pe+=h*Xt,Me+=h*Qt,Be+=h*Zt,Ce+=h*dr,Re+=h*Rr,Ie+=h*Nr,ve+=h*Br,h=k[1],z+=h*L,Q+=h*Ge,oe+=h*st,pe+=h*at,ce+=h*ze,$e+=h*rt,xe+=h*nt,ke+=h*sr,Pe+=h*bt,Me+=h*Xt,Be+=h*Qt,Ce+=h*Zt,Re+=h*dr,Ie+=h*Rr,ve+=h*Nr,Ae+=h*Br,h=k[2],Q+=h*L,oe+=h*Ge,pe+=h*st,ce+=h*at,$e+=h*ze,xe+=h*rt,ke+=h*nt,Pe+=h*sr,Me+=h*bt,Be+=h*Xt,Ce+=h*Qt,Re+=h*Zt,Ie+=h*dr,ve+=h*Rr,Ae+=h*Nr,me+=h*Br,h=k[3],oe+=h*L,pe+=h*Ge,ce+=h*st,$e+=h*at,xe+=h*ze,ke+=h*rt,Pe+=h*nt,Me+=h*sr,Be+=h*bt,Ce+=h*Xt,Re+=h*Qt,Ie+=h*Zt,ve+=h*dr,Ae+=h*Rr,me+=h*Nr,we+=h*Br,h=k[4],pe+=h*L,ce+=h*Ge,$e+=h*st,xe+=h*at,ke+=h*ze,Pe+=h*rt,Me+=h*nt,Be+=h*sr,Ce+=h*bt,Re+=h*Xt,Ie+=h*Qt,ve+=h*Zt,Ae+=h*dr,me+=h*Rr,we+=h*Nr,Ee+=h*Br,h=k[5],ce+=h*L,$e+=h*Ge,xe+=h*st,ke+=h*at,Pe+=h*ze,Me+=h*rt,Be+=h*nt,Ce+=h*sr,Re+=h*bt,Ie+=h*Xt,ve+=h*Qt,Ae+=h*Zt,me+=h*dr,we+=h*Rr,Ee+=h*Nr,be+=h*Br,h=k[6],$e+=h*L,xe+=h*Ge,ke+=h*st,Pe+=h*at,Me+=h*ze,Be+=h*rt,Ce+=h*nt,Re+=h*sr,Ie+=h*bt,ve+=h*Xt,Ae+=h*Qt,me+=h*Zt,we+=h*dr,Ee+=h*Rr,be+=h*Nr,J+=h*Br,h=k[7],xe+=h*L,ke+=h*Ge,Pe+=h*st,Me+=h*at,Be+=h*ze,Ce+=h*rt,Re+=h*nt,Ie+=h*sr,ve+=h*bt,Ae+=h*Xt,me+=h*Qt,we+=h*Zt,Ee+=h*dr,be+=h*Rr,J+=h*Nr,W+=h*Br,h=k[8],ke+=h*L,Pe+=h*Ge,Me+=h*st,Be+=h*at,Ce+=h*ze,Re+=h*rt,Ie+=h*nt,ve+=h*sr,Ae+=h*bt,me+=h*Xt,we+=h*Qt,Ee+=h*Zt,be+=h*dr,J+=h*Rr,W+=h*Nr,se+=h*Br,h=k[9],Pe+=h*L,Me+=h*Ge,Be+=h*st,Ce+=h*at,Re+=h*ze,Ie+=h*rt,ve+=h*nt,Ae+=h*sr,me+=h*bt,we+=h*Xt,Ee+=h*Qt,be+=h*Zt,J+=h*dr,W+=h*Rr,se+=h*Nr,te+=h*Br,h=k[10],Me+=h*L,Be+=h*Ge,Ce+=h*st,Re+=h*at,Ie+=h*ze,ve+=h*rt,Ae+=h*nt,me+=h*sr,we+=h*bt,Ee+=h*Xt,be+=h*Qt,J+=h*Zt,W+=h*dr,se+=h*Rr,te+=h*Nr,ie+=h*Br,h=k[11],Be+=h*L,Ce+=h*Ge,Re+=h*st,Ie+=h*at,ve+=h*ze,Ae+=h*rt,me+=h*nt,we+=h*sr,Ee+=h*bt,be+=h*Xt,J+=h*Qt,W+=h*Zt,se+=h*dr,te+=h*Rr,ie+=h*Nr,le+=h*Br,h=k[12],Ce+=h*L,Re+=h*Ge,Ie+=h*st,ve+=h*at,Ae+=h*ze,me+=h*rt,we+=h*nt,Ee+=h*sr,be+=h*bt,J+=h*Xt,W+=h*Qt,se+=h*Zt,te+=h*dr,ie+=h*Rr,le+=h*Nr,Ne+=h*Br,h=k[13],Re+=h*L,Ie+=h*Ge,ve+=h*st,Ae+=h*at,me+=h*ze,we+=h*rt,Ee+=h*nt,be+=h*sr,J+=h*bt,W+=h*Xt,se+=h*Qt,te+=h*Zt,ie+=h*dr,le+=h*Rr,Ne+=h*Nr,Le+=h*Br,h=k[14],Ie+=h*L,ve+=h*Ge,Ae+=h*st,me+=h*at,we+=h*ze,Ee+=h*rt,be+=h*nt,J+=h*sr,W+=h*bt,se+=h*Xt,te+=h*Qt,ie+=h*Zt,le+=h*dr,Ne+=h*Rr,Le+=h*Nr,qe+=h*Br,h=k[15],ve+=h*L,Ae+=h*Ge,me+=h*st,we+=h*at,Ee+=h*ze,be+=h*rt,J+=h*nt,W+=h*sr,se+=h*bt,te+=h*Xt,ie+=h*Qt,le+=h*Zt,Ne+=h*dr,Le+=h*Rr,qe+=h*Nr,Fe+=h*Br,G+=38*Ae,z+=38*me,Q+=38*we,oe+=38*Ee,pe+=38*be,ce+=38*J,$e+=38*W,xe+=38*se,ke+=38*te,Pe+=38*ie,Me+=38*le,Be+=38*Ne,Ce+=38*Le,Re+=38*qe,Ie+=38*Fe,R=1,h=G+R+65535,R=Math.floor(h/65536),G=h-R*65536,h=z+R+65535,R=Math.floor(h/65536),z=h-R*65536,h=Q+R+65535,R=Math.floor(h/65536),Q=h-R*65536,h=oe+R+65535,R=Math.floor(h/65536),oe=h-R*65536,h=pe+R+65535,R=Math.floor(h/65536),pe=h-R*65536,h=ce+R+65535,R=Math.floor(h/65536),ce=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=xe+R+65535,R=Math.floor(h/65536),xe=h-R*65536,h=ke+R+65535,R=Math.floor(h/65536),ke=h-R*65536,h=Pe+R+65535,R=Math.floor(h/65536),Pe=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Be+R+65535,R=Math.floor(h/65536),Be=h-R*65536,h=Ce+R+65535,R=Math.floor(h/65536),Ce=h-R*65536,h=Re+R+65535,R=Math.floor(h/65536),Re=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=ve+R+65535,R=Math.floor(h/65536),ve=h-R*65536,G+=R-1+37*(R-1),R=1,h=G+R+65535,R=Math.floor(h/65536),G=h-R*65536,h=z+R+65535,R=Math.floor(h/65536),z=h-R*65536,h=Q+R+65535,R=Math.floor(h/65536),Q=h-R*65536,h=oe+R+65535,R=Math.floor(h/65536),oe=h-R*65536,h=pe+R+65535,R=Math.floor(h/65536),pe=h-R*65536,h=ce+R+65535,R=Math.floor(h/65536),ce=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=xe+R+65535,R=Math.floor(h/65536),xe=h-R*65536,h=ke+R+65535,R=Math.floor(h/65536),ke=h-R*65536,h=Pe+R+65535,R=Math.floor(h/65536),Pe=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Be+R+65535,R=Math.floor(h/65536),Be=h-R*65536,h=Ce+R+65535,R=Math.floor(h/65536),Ce=h-R*65536,h=Re+R+65535,R=Math.floor(h/65536),Re=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=ve+R+65535,R=Math.floor(h/65536),ve=h-R*65536,G+=R-1+37*(R-1),v[0]=G,v[1]=z,v[2]=Q,v[3]=oe,v[4]=pe,v[5]=ce,v[6]=$e,v[7]=xe,v[8]=ke,v[9]=Pe,v[10]=Me,v[11]=Be,v[12]=Ce,v[13]=Re,v[14]=Ie,v[15]=ve}function Z(v,k){F(v,k,k)}function _e(v,k){var C=r(),h;for(h=0;h<16;h++)C[h]=k[h];for(h=253;h>=0;h--)Z(C,C),h!==2&&h!==4&&F(C,C,k);for(h=0;h<16;h++)v[h]=C[h]}function ye(v,k){var C=r(),h;for(h=0;h<16;h++)C[h]=k[h];for(h=250;h>=0;h--)Z(C,C),h!==1&&F(C,C,k);for(h=0;h<16;h++)v[h]=C[h]}function ge(v,k,C){var h=new Uint8Array(32),R=new Float64Array(80),G,z,Q=r(),oe=r(),pe=r(),ce=r(),$e=r(),xe=r();for(z=0;z<31;z++)h[z]=k[z];for(h[31]=k[31]&127|64,h[0]&=248,p(R,C),z=0;z<16;z++)oe[z]=R[z],ce[z]=Q[z]=pe[z]=0;for(Q[0]=ce[0]=1,z=254;z>=0;--z)G=h[z>>>3]>>>(z&7)&1,M(Q,oe,G),M(pe,ce,G),P($e,Q,pe),$(Q,Q,pe),P(pe,oe,ce),$(oe,oe,ce),Z(ce,$e),Z(xe,Q),F(Q,pe,Q),F(pe,oe,$e),P($e,Q,pe),$(Q,Q,pe),Z(oe,Q),$(pe,ce,xe),F(Q,pe,c),P(Q,Q,ce),F(pe,pe,Q),F(Q,ce,xe),F(ce,oe,R),Z(oe,$e),M(Q,oe,G),M(pe,ce,G);for(z=0;z<16;z++)R[z+16]=Q[z],R[z+32]=pe[z],R[z+48]=oe[z],R[z+64]=ce[z];var ke=R.subarray(32),Pe=R.subarray(16);return _e(ke,ke),F(Pe,Pe,ke),D(v,Pe),0}function He(v,k){return ge(v,k,s)}function Oe(v,k){return n(k,32),He(v,k)}function Ve(v,k,C){var h=new Uint8Array(32);return ge(h,C,k),O(v,i,h,U)}var Ir=l,yt=m;function Rt(v,k,C,h,R,G){var z=new Uint8Array(32);return Ve(z,R,G),Ir(v,k,C,h,z)}function wr(v,k,C,h,R,G){var z=new Uint8Array(32);return Ve(z,R,G),yt(v,k,C,h,z)}var Ft=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function jt(v,k,C,h){for(var R=new Int32Array(16),G=new Int32Array(16),z,Q,oe,pe,ce,$e,xe,ke,Pe,Me,Be,Ce,Re,Ie,ve,Ae,me,we,Ee,be,J,W,se,te,ie,le,Ne=v[0],Le=v[1],qe=v[2],Fe=v[3],L=v[4],Ge=v[5],st=v[6],at=v[7],ze=k[0],rt=k[1],nt=k[2],sr=k[3],bt=k[4],Xt=k[5],Qt=k[6],Zt=k[7],dr=0;h>=128;){for(Ee=0;Ee<16;Ee++)be=8*Ee+dr,R[Ee]=C[be+0]<<24|C[be+1]<<16|C[be+2]<<8|C[be+3],G[Ee]=C[be+4]<<24|C[be+5]<<16|C[be+6]<<8|C[be+7];for(Ee=0;Ee<80;Ee++)if(z=Ne,Q=Le,oe=qe,pe=Fe,ce=L,$e=Ge,xe=st,ke=at,Pe=ze,Me=rt,Be=nt,Ce=sr,Re=bt,Ie=Xt,ve=Qt,Ae=Zt,J=at,W=Zt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=(L>>>14|bt<<32-14)^(L>>>18|bt<<32-18)^(bt>>>41-32|L<<32-(41-32)),W=(bt>>>14|L<<32-14)^(bt>>>18|L<<32-18)^(L>>>41-32|bt<<32-(41-32)),se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,J=L&Ge^~L&st,W=bt&Xt^~bt&Qt,se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,J=Ft[Ee*2],W=Ft[Ee*2+1],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,J=R[Ee%16],W=G[Ee%16],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,me=ie&65535|le<<16,we=se&65535|te<<16,J=me,W=we,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=(Ne>>>28|ze<<32-28)^(ze>>>34-32|Ne<<32-(34-32))^(ze>>>39-32|Ne<<32-(39-32)),W=(ze>>>28|Ne<<32-28)^(Ne>>>34-32|ze<<32-(34-32))^(Ne>>>39-32|ze<<32-(39-32)),se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,J=Ne&Le^Ne&qe^Le&qe,W=ze&rt^ze&nt^rt&nt,se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,ke=ie&65535|le<<16,Ae=se&65535|te<<16,J=pe,W=Ce,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=me,W=we,se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,pe=ie&65535|le<<16,Ce=se&65535|te<<16,Le=z,qe=Q,Fe=oe,L=pe,Ge=ce,st=$e,at=xe,Ne=ke,rt=Pe,nt=Me,sr=Be,bt=Ce,Xt=Re,Qt=Ie,Zt=ve,ze=Ae,Ee%16===15)for(be=0;be<16;be++)J=R[be],W=G[be],se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=R[(be+9)%16],W=G[(be+9)%16],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,me=R[(be+1)%16],we=G[(be+1)%16],J=(me>>>1|we<<32-1)^(me>>>8|we<<32-8)^me>>>7,W=(we>>>1|me<<32-1)^(we>>>8|me<<32-8)^(we>>>7|me<<32-7),se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,me=R[(be+14)%16],we=G[(be+14)%16],J=(me>>>19|we<<32-19)^(we>>>61-32|me<<32-(61-32))^me>>>6,W=(we>>>19|me<<32-19)^(me>>>61-32|we<<32-(61-32))^(we>>>6|me<<32-6),se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,R[be]=ie&65535|le<<16,G[be]=se&65535|te<<16;J=Ne,W=ze,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[0],W=k[0],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[0]=Ne=ie&65535|le<<16,k[0]=ze=se&65535|te<<16,J=Le,W=rt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[1],W=k[1],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[1]=Le=ie&65535|le<<16,k[1]=rt=se&65535|te<<16,J=qe,W=nt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[2],W=k[2],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[2]=qe=ie&65535|le<<16,k[2]=nt=se&65535|te<<16,J=Fe,W=sr,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[3],W=k[3],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[3]=Fe=ie&65535|le<<16,k[3]=sr=se&65535|te<<16,J=L,W=bt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[4],W=k[4],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[4]=L=ie&65535|le<<16,k[4]=bt=se&65535|te<<16,J=Ge,W=Xt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[5],W=k[5],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[5]=Ge=ie&65535|le<<16,k[5]=Xt=se&65535|te<<16,J=st,W=Qt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[6],W=k[6],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[6]=st=ie&65535|le<<16,k[6]=Qt=se&65535|te<<16,J=at,W=Zt,se=W&65535,te=W>>>16,ie=J&65535,le=J>>>16,J=v[7],W=k[7],se+=W&65535,te+=W>>>16,ie+=J&65535,le+=J>>>16,te+=se>>>16,ie+=te>>>16,le+=ie>>>16,v[7]=at=ie&65535|le<<16,k[7]=Zt=se&65535|te<<16,dr+=128,h-=128}return h}function en(v,k,C){var h=new Int32Array(8),R=new Int32Array(8),G=new Uint8Array(256),z,Q=C;for(h[0]=1779033703,h[1]=3144134277,h[2]=1013904242,h[3]=2773480762,h[4]=1359893119,h[5]=2600822924,h[6]=528734635,h[7]=1541459225,R[0]=4089235720,R[1]=2227873595,R[2]=4271175723,R[3]=1595750129,R[4]=2917565137,R[5]=725511199,R[6]=4215389547,R[7]=327033209,jt(h,R,k,C),C%=128,z=0;z<C;z++)G[z]=k[Q-C+z];for(G[C]=128,C=256-128*(C<112?1:0),G[C-9]=0,E(G,C-8,Q/536870912|0,Q<<3),jt(h,R,G,C),z=0;z<8;z++)E(v,8*z,h[z],R[z]);return 0}function wt(v,k){var C=r(),h=r(),R=r(),G=r(),z=r(),Q=r(),oe=r(),pe=r(),ce=r();$(C,v[1],v[0]),$(ce,k[1],k[0]),F(C,C,ce),P(h,v[0],v[1]),P(ce,k[0],k[1]),F(h,h,ce),F(R,v[3],k[3]),F(R,R,u),F(G,v[2],k[2]),P(G,G,G),$(z,h,C),$(Q,G,R),P(oe,G,R),P(pe,h,C),F(v[0],z,Q),F(v[1],pe,oe),F(v[2],oe,Q),F(v[3],z,pe)}function Kt(v,k,C){var h;for(h=0;h<4;h++)M(v[h],k[h],C)}function di(v,k){var C=r(),h=r(),R=r();_e(R,k[2]),F(C,k[0],R),F(h,k[1],R),D(v,h),v[31]^=x(C)<<7}function Nt(v,k,C){var h,R;for(S(v[0],a),S(v[1],o),S(v[2],o),S(v[3],a),R=255;R>=0;--R)h=C[R/8|0]>>(R&7)&1,Kt(v,k,h),wt(k,v),wt(v,v),Kt(v,k,h)}function _t(v,k){var C=[r(),r(),r(),r()];S(C[0],d),S(C[1],g),S(C[2],o),F(C[3],d,g),Nt(v,C,k)}function hi(v,k,C){var h=new Uint8Array(64),R=[r(),r(),r(),r()],G;for(C||n(k,32),en(h,k,32),h[0]&=248,h[31]&=127,h[31]|=64,_t(R,h),di(v,R),G=0;G<32;G++)k[G+32]=v[G];return 0}var Et=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Bt(v,k){var C,h,R,G;for(h=63;h>=32;--h){for(C=0,R=h-32,G=h-12;R<G;++R)k[R]+=C-16*k[h]*Et[R-(h-32)],C=Math.floor((k[R]+128)/256),k[R]-=C*256;k[R]+=C,k[h]=0}for(C=0,R=0;R<32;R++)k[R]+=C-(k[31]>>4)*Et[R],C=k[R]>>8,k[R]&=255;for(R=0;R<32;R++)k[R]-=C*Et[R];for(h=0;h<32;h++)k[h+1]+=k[h]>>8,v[h]=k[h]&255}function jn(v){var k=new Float64Array(64),C;for(C=0;C<64;C++)k[C]=v[C];for(C=0;C<64;C++)v[C]=0;Bt(v,k)}function Mt(v,k,C,h){var R=new Uint8Array(64),G=new Uint8Array(64),z=new Uint8Array(64),Q,oe,pe=new Float64Array(64),ce=[r(),r(),r(),r()];en(R,h,32),R[0]&=248,R[31]&=127,R[31]|=64;var $e=C+64;for(Q=0;Q<C;Q++)v[64+Q]=k[Q];for(Q=0;Q<32;Q++)v[32+Q]=R[32+Q];for(en(z,v.subarray(32),C+32),jn(z),_t(ce,z),di(v,ce),Q=32;Q<64;Q++)v[Q]=h[Q];for(en(G,v,C+64),jn(G),Q=0;Q<64;Q++)pe[Q]=0;for(Q=0;Q<32;Q++)pe[Q]=z[Q];for(Q=0;Q<32;Q++)for(oe=0;oe<32;oe++)pe[Q+oe]+=G[Q]*R[oe];return Bt(v.subarray(32),pe),$e}function $t(v,k){var C=r(),h=r(),R=r(),G=r(),z=r(),Q=r(),oe=r();return S(v[2],o),p(v[1],k),Z(R,v[1]),F(G,R,f),$(R,R,v[2]),P(G,v[2],G),Z(z,G),Z(Q,z),F(oe,Q,z),F(C,oe,R),F(C,C,G),ye(C,C),F(C,C,R),F(C,C,G),F(C,C,G),F(v[0],C,G),Z(h,v[0]),F(h,h,G),K(h,R)&&F(v[0],v[0],b),Z(h,v[0]),F(h,h,G),K(h,R)?-1:(x(v[0])===k[31]>>7&&$(v[0],a,v[0]),F(v[3],v[0],v[1]),0)}function Kn(v,k,C,h){var R,G=new Uint8Array(32),z=new Uint8Array(64),Q=[r(),r(),r(),r()],oe=[r(),r(),r(),r()];if(C<64||$t(oe,h))return-1;for(R=0;R<C;R++)v[R]=k[R];for(R=0;R<32;R++)v[R+32]=h[R];if(en(z,v,C),jn(z),Nt(Q,oe,z),_t(oe,k.subarray(32)),wt(Q,oe),di(G,Q),C-=64,_(k,0,G,0)){for(R=0;R<C;R++)v[R]=0;return-1}for(R=0;R<C;R++)v[R]=k[R+64];return C}var At=32,mt=24,pn=32,ut=16,ht=32,Sn=32,pt=32,gt=32,$n=32,Ot=mt,qt=pn,Mi=ut,tt=64,ct=32,tn=64,St=32,Tt=64;e.lowlevel={crypto_core_hsalsa20:O,crypto_stream_xor:ae,crypto_stream:re,crypto_stream_salsa20_xor:H,crypto_stream_salsa20:V,crypto_onetimeauth:ee,crypto_onetimeauth_verify:T,crypto_verify_16:y,crypto_verify_32:_,crypto_secretbox:l,crypto_secretbox_open:m,crypto_scalarmult:ge,crypto_scalarmult_base:He,crypto_box_beforenm:Ve,crypto_box_afternm:Ir,crypto_box:Rt,crypto_box_open:wr,crypto_box_keypair:Oe,crypto_hash:en,crypto_sign:Mt,crypto_sign_keypair:hi,crypto_sign_open:Kn,crypto_secretbox_KEYBYTES:At,crypto_secretbox_NONCEBYTES:mt,crypto_secretbox_ZEROBYTES:pn,crypto_secretbox_BOXZEROBYTES:ut,crypto_scalarmult_BYTES:ht,crypto_scalarmult_SCALARBYTES:Sn,crypto_box_PUBLICKEYBYTES:pt,crypto_box_SECRETKEYBYTES:gt,crypto_box_BEFORENMBYTES:$n,crypto_box_NONCEBYTES:Ot,crypto_box_ZEROBYTES:qt,crypto_box_BOXZEROBYTES:Mi,crypto_sign_BYTES:tt,crypto_sign_PUBLICKEYBYTES:ct,crypto_sign_SECRETKEYBYTES:tn,crypto_sign_SEEDBYTES:St,crypto_hash_BYTES:Tt,gf:r,D:f,L:Et,pack25519:D,unpack25519:p,M:F,A:P,S:Z,Z:$,pow2523:ye,add:wt,set25519:S,modL:Bt,scalarmult:Nt,scalarbase:_t};function pi(v,k){if(v.length!==At)throw new Error("bad key size");if(k.length!==mt)throw new Error("bad nonce size")}function Ht(v,k){if(v.length!==pt)throw new Error("bad public key size");if(k.length!==gt)throw new Error("bad secret key size")}function Je(){for(var v=0;v<arguments.length;v++)if(!(arguments[v]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function gi(v){for(var k=0;k<v.length;k++)v[k]=0}e.randomBytes=function(v){var k=new Uint8Array(v);return n(k,v),k},e.secretbox=function(v,k,C){Je(v,k,C),pi(C,k);for(var h=new Uint8Array(pn+v.length),R=new Uint8Array(h.length),G=0;G<v.length;G++)h[G+pn]=v[G];return l(R,h,h.length,k,C),R.subarray(ut)},e.secretbox.open=function(v,k,C){Je(v,k,C),pi(C,k);for(var h=new Uint8Array(ut+v.length),R=new Uint8Array(h.length),G=0;G<v.length;G++)h[G+ut]=v[G];return h.length<32||m(R,h,h.length,k,C)!==0?null:R.subarray(pn)},e.secretbox.keyLength=At,e.secretbox.nonceLength=mt,e.secretbox.overheadLength=ut,e.scalarMult=function(v,k){if(Je(v,k),v.length!==Sn)throw new Error("bad n size");if(k.length!==ht)throw new Error("bad p size");var C=new Uint8Array(ht);return ge(C,v,k),C},e.scalarMult.base=function(v){if(Je(v),v.length!==Sn)throw new Error("bad n size");var k=new Uint8Array(ht);return He(k,v),k},e.scalarMult.scalarLength=Sn,e.scalarMult.groupElementLength=ht,e.box=function(v,k,C,h){var R=e.box.before(C,h);return e.secretbox(v,k,R)},e.box.before=function(v,k){Je(v,k),Ht(v,k);var C=new Uint8Array($n);return Ve(C,v,k),C},e.box.after=e.secretbox,e.box.open=function(v,k,C,h){var R=e.box.before(C,h);return e.secretbox.open(v,k,R)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var v=new Uint8Array(pt),k=new Uint8Array(gt);return Oe(v,k),{publicKey:v,secretKey:k}},e.box.keyPair.fromSecretKey=function(v){if(Je(v),v.length!==gt)throw new Error("bad secret key size");var k=new Uint8Array(pt);return He(k,v),{publicKey:k,secretKey:new Uint8Array(v)}},e.box.publicKeyLength=pt,e.box.secretKeyLength=gt,e.box.sharedKeyLength=$n,e.box.nonceLength=Ot,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(v,k){if(Je(v,k),k.length!==tn)throw new Error("bad secret key size");var C=new Uint8Array(tt+v.length);return Mt(C,v,v.length,k),C},e.sign.open=function(v,k){if(Je(v,k),k.length!==ct)throw new Error("bad public key size");var C=new Uint8Array(v.length),h=Kn(C,v,v.length,k);if(h<0)return null;for(var R=new Uint8Array(h),G=0;G<R.length;G++)R[G]=C[G];return R},e.sign.detached=function(v,k){for(var C=e.sign(v,k),h=new Uint8Array(tt),R=0;R<h.length;R++)h[R]=C[R];return h},e.sign.detached.verify=function(v,k,C){if(Je(v,k,C),k.length!==tt)throw new Error("bad signature size");if(C.length!==ct)throw new Error("bad public key size");var h=new Uint8Array(tt+v.length),R=new Uint8Array(tt+v.length),G;for(G=0;G<tt;G++)h[G]=k[G];for(G=0;G<v.length;G++)h[G+tt]=v[G];return Kn(R,h,h.length,C)>=0},e.sign.keyPair=function(){var v=new Uint8Array(ct),k=new Uint8Array(tn);return hi(v,k),{publicKey:v,secretKey:k}},e.sign.keyPair.fromSecretKey=function(v){if(Je(v),v.length!==tn)throw new Error("bad secret key size");for(var k=new Uint8Array(ct),C=0;C<k.length;C++)k[C]=v[32+C];return{publicKey:k,secretKey:new Uint8Array(v)}},e.sign.keyPair.fromSeed=function(v){if(Je(v),v.length!==St)throw new Error("bad seed size");for(var k=new Uint8Array(ct),C=new Uint8Array(tn),h=0;h<32;h++)C[h]=v[h];return hi(k,C,!0),{publicKey:k,secretKey:C}},e.sign.publicKeyLength=ct,e.sign.secretKeyLength=tn,e.sign.seedLength=St,e.sign.signatureLength=tt,e.hash=function(v){Je(v);var k=new Uint8Array(Tt);return en(k,v,v.length),k},e.hash.hashLength=Tt,e.verify=function(v,k){return Je(v,k),v.length===0||k.length===0||v.length!==k.length?!1:w(v,0,k,0,v.length)===0},e.setPRNG=function(v){n=v},function(){var v=typeof self<"u"?self.crypto||self.msCrypto:null;if(v&&v.getRandomValues){var k=65536;e.setPRNG(function(C,h){var R,G=new Uint8Array(h);for(R=0;R<h;R+=k)v.getRandomValues(G.subarray(R,R+Math.min(h-R,k)));for(R=0;R<h;R++)C[R]=G[R];gi(G)})}else typeof A5<"u"&&(v=Qi(),v&&v.randomBytes&&e.setPRNG(function(C,h){var R,G=v.randomBytes(h);for(R=0;R<h;R++)C[R]=G[R];gi(G)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(zx);var Uh={},Wt={},Bi={exports:{}};(function(t){(function(e,r){function n(T,l){if(!T)throw new Error(l||"Assertion failed")}function i(T,l){T.super_=l;var m=function(){};m.prototype=l.prototype,T.prototype=new m,T.prototype.constructor=T}function s(T,l,m){if(s.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((l==="le"||l==="be")&&(m=l,l=10),this._init(T||0,l||10,m||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=X.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,m){return l.cmp(m)>0?l:m},s.min=function(l,m){return l.cmp(m)<0?l:m},s.prototype._init=function(l,m,S){if(typeof l=="number")return this._initNumber(l,m,S);if(typeof l=="object")return this._initArray(l,m,S);m==="hex"&&(m=16),n(m===(m|0)&&m>=2&&m<=36),l=l.toString().replace(/\s+/g,"");var I=0;l[0]==="-"&&(I++,this.negative=1),I<l.length&&(m===16?this._parseHex(l,I,S):(this._parseBase(l,m,I),S==="le"&&this._initArray(this.toArray(),m,S)))},s.prototype._initNumber=function(l,m,S){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),m,S)},s.prototype._initArray=function(l,m,S){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var M,D,K=0;if(S==="be")for(I=l.length-1,M=0;I>=0;I-=3)D=l[I]|l[I-1]<<8|l[I-2]<<16,this.words[M]|=D<<K&67108863,this.words[M+1]=D>>>26-K&67108863,K+=24,K>=26&&(K-=26,M++);else if(S==="le")for(I=0,M=0;I<l.length;I+=3)D=l[I]|l[I+1]<<8|l[I+2]<<16,this.words[M]|=D<<K&67108863,this.words[M+1]=D>>>26-K&67108863,K+=24,K>=26&&(K-=26,M++);return this._strip()};function o(T,l){var m=T.charCodeAt(l);if(m>=48&&m<=57)return m-48;if(m>=65&&m<=70)return m-55;if(m>=97&&m<=102)return m-87;n(!1,"Invalid character in "+T)}function c(T,l,m){var S=o(T,m);return m-1>=l&&(S|=o(T,m-1)<<4),S}s.prototype._parseHex=function(l,m,S){this.length=Math.ceil((l.length-m)/6),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var M=0,D=0,K;if(S==="be")for(I=l.length-1;I>=m;I-=2)K=c(l,m,I)<<M,this.words[D]|=K&67108863,M>=18?(M-=18,D+=1,this.words[D]|=K>>>26):M+=8;else{var x=l.length-m;for(I=x%2===0?m+1:m;I<l.length;I+=2)K=c(l,m,I)<<M,this.words[D]|=K&67108863,M>=18?(M-=18,D+=1,this.words[D]|=K>>>26):M+=8}this._strip()};function f(T,l,m,S){for(var I=0,M=0,D=Math.min(T.length,m),K=l;K<D;K++){var x=T.charCodeAt(K)-48;I*=S,x>=49?M=x-49+10:x>=17?M=x-17+10:M=x,n(x>=0&&M<S,"Invalid character"),I+=M}return I}s.prototype._parseBase=function(l,m,S){this.words=[0],this.length=1;for(var I=0,M=1;M<=67108863;M*=m)I++;I--,M=M/m|0;for(var D=l.length-S,K=D%I,x=Math.min(D,D-K)+S,p=0,P=S;P<x;P+=I)p=f(l,P,P+I,m),this.imuln(M),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(K!==0){var $=1;for(p=f(l,P,l.length,m),P=0;P<K;P++)$*=m;this.imuln($),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this._strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var m=0;m<this.length;m++)l.words[m]=this.words[m];l.length=this.length,l.negative=this.negative,l.red=this.red};function u(T,l){T.words=l.words,T.length=l.length,T.negative=l.negative,T.red=l.red}if(s.prototype._move=function(l){u(l,this)},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,m){l=l||10,m=m|0||1;var S;if(l===16||l==="hex"){S="";for(var I=0,M=0,D=0;D<this.length;D++){var K=this.words[D],x=((K<<I|M)&16777215).toString(16);M=K>>>24-I&16777215,M!==0||D!==this.length-1?S=g[6-x.length]+x+S:S=x+S,I+=2,I>=26&&(I-=26,D--)}for(M!==0&&(S=M.toString(16)+S);S.length%m!==0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(l===(l|0)&&l>=2&&l<=36){var p=b[l],P=E[l];S="";var $=this.clone();for($.negative=0;!$.isZero();){var F=$.modrn(P).toString(l);$=$.idivn(P),$.isZero()?S=F+S:S=g[p-F.length]+F+S}for(this.isZero()&&(S="0"+S);S.length%m!==0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(l,m){return this.toArrayLike(a,l,m)}),s.prototype.toArray=function(l,m){return this.toArrayLike(Array,l,m)};var w=function(l,m){return l.allocUnsafe?l.allocUnsafe(m):new l(m)};s.prototype.toArrayLike=function(l,m,S){this._strip();var I=this.byteLength(),M=S||Math.max(1,I);n(I<=M,"byte array longer than desired length"),n(M>0,"Requested array length <= 0");var D=w(l,M),K=m==="le"?"LE":"BE";return this["_toArrayLike"+K](D,I),D},s.prototype._toArrayLikeLE=function(l,m){for(var S=0,I=0,M=0,D=0;M<this.length;M++){var K=this.words[M]<<D|I;l[S++]=K&255,S<l.length&&(l[S++]=K>>8&255),S<l.length&&(l[S++]=K>>16&255),D===6?(S<l.length&&(l[S++]=K>>24&255),I=0,D=0):(I=K>>>24,D+=2)}if(S<l.length)for(l[S++]=I;S<l.length;)l[S++]=0},s.prototype._toArrayLikeBE=function(l,m){for(var S=l.length-1,I=0,M=0,D=0;M<this.length;M++){var K=this.words[M]<<D|I;l[S--]=K&255,S>=0&&(l[S--]=K>>8&255),S>=0&&(l[S--]=K>>16&255),D===6?(S>=0&&(l[S--]=K>>24&255),I=0,D=0):(I=K>>>24,D+=2)}if(S>=0)for(l[S--]=I;S>=0;)l[S--]=0},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var m=l,S=0;return m>=4096&&(S+=13,m>>>=13),m>=64&&(S+=7,m>>>=7),m>=8&&(S+=4,m>>>=4),m>=2&&(S+=2,m>>>=2),S+m},s.prototype._zeroBits=function(l){if(l===0)return 26;var m=l,S=0;return(m&8191)===0&&(S+=13,m>>>=13),(m&127)===0&&(S+=7,m>>>=7),(m&15)===0&&(S+=4,m>>>=4),(m&3)===0&&(S+=2,m>>>=2),(m&1)===0&&S++,S},s.prototype.bitLength=function(){var l=this.words[this.length-1],m=this._countBits(l);return(this.length-1)*26+m};function y(T){for(var l=new Array(T.bitLength()),m=0;m<l.length;m++){var S=m/26|0,I=m%26;l[m]=T.words[S]>>>I&1}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,m=0;m<this.length;m++){var S=this._zeroBits(this.words[m]);if(l+=S,S!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var m=0;m<l.length;m++)this.words[m]=this.words[m]|l.words[m];return this._strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var m;this.length>l.length?m=l:m=this;for(var S=0;S<m.length;S++)this.words[S]=this.words[S]&l.words[S];return this.length=m.length,this._strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var m,S;this.length>l.length?(m=this,S=l):(m=l,S=this);for(var I=0;I<S.length;I++)this.words[I]=m.words[I]^S.words[I];if(this!==m)for(;I<m.length;I++)this.words[I]=m.words[I];return this.length=m.length,this._strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var m=Math.ceil(l/26)|0,S=l%26;this._expand(m),S>0&&m--;for(var I=0;I<m;I++)this.words[I]=~this.words[I]&67108863;return S>0&&(this.words[I]=~this.words[I]&67108863>>26-S),this._strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,m){n(typeof l=="number"&&l>=0);var S=l/26|0,I=l%26;return this._expand(S+1),m?this.words[S]=this.words[S]|1<<I:this.words[S]=this.words[S]&~(1<<I),this._strip()},s.prototype.iadd=function(l){var m;if(this.negative!==0&&l.negative===0)return this.negative=0,m=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,m=this.isub(l),l.negative=1,m._normSign();var S,I;this.length>l.length?(S=this,I=l):(S=l,I=this);for(var M=0,D=0;D<I.length;D++)m=(S.words[D]|0)+(I.words[D]|0)+M,this.words[D]=m&67108863,M=m>>>26;for(;M!==0&&D<S.length;D++)m=(S.words[D]|0)+M,this.words[D]=m&67108863,M=m>>>26;if(this.length=S.length,M!==0)this.words[this.length]=M,this.length++;else if(S!==this)for(;D<S.length;D++)this.words[D]=S.words[D];return this},s.prototype.add=function(l){var m;return l.negative!==0&&this.negative===0?(l.negative=0,m=this.sub(l),l.negative^=1,m):l.negative===0&&this.negative!==0?(this.negative=0,m=l.sub(this),this.negative=1,m):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var m=this.iadd(l);return l.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var S=this.cmp(l);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;var I,M;S>0?(I=this,M=l):(I=l,M=this);for(var D=0,K=0;K<M.length;K++)m=(I.words[K]|0)-(M.words[K]|0)+D,D=m>>26,this.words[K]=m&67108863;for(;D!==0&&K<I.length;K++)m=(I.words[K]|0)+D,D=m>>26,this.words[K]=m&67108863;if(D===0&&K<I.length&&I!==this)for(;K<I.length;K++)this.words[K]=I.words[K];return this.length=Math.max(this.length,K),I!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function _(T,l,m){m.negative=l.negative^T.negative;var S=T.length+l.length|0;m.length=S,S=S-1|0;var I=T.words[0]|0,M=l.words[0]|0,D=I*M,K=D&67108863,x=D/67108864|0;m.words[0]=K;for(var p=1;p<S;p++){for(var P=x>>>26,$=x&67108863,F=Math.min(p,l.length-1),Z=Math.max(0,p-T.length+1);Z<=F;Z++){var _e=p-Z|0;I=T.words[_e]|0,M=l.words[Z]|0,D=I*M+$,P+=D/67108864|0,$=D&67108863}m.words[p]=$|0,x=P|0}return x!==0?m.words[p]=x|0:m.length--,m._strip()}var A=function(l,m,S){var I=l.words,M=m.words,D=S.words,K=0,x,p,P,$=I[0]|0,F=$&8191,Z=$>>>13,_e=I[1]|0,ye=_e&8191,ge=_e>>>13,He=I[2]|0,Oe=He&8191,Ve=He>>>13,Ir=I[3]|0,yt=Ir&8191,Rt=Ir>>>13,wr=I[4]|0,Ft=wr&8191,jt=wr>>>13,en=I[5]|0,wt=en&8191,Kt=en>>>13,di=I[6]|0,Nt=di&8191,_t=di>>>13,hi=I[7]|0,Et=hi&8191,Bt=hi>>>13,jn=I[8]|0,Mt=jn&8191,$t=jn>>>13,Kn=I[9]|0,At=Kn&8191,mt=Kn>>>13,pn=M[0]|0,ut=pn&8191,ht=pn>>>13,Sn=M[1]|0,pt=Sn&8191,gt=Sn>>>13,$n=M[2]|0,Ot=$n&8191,qt=$n>>>13,Mi=M[3]|0,tt=Mi&8191,ct=Mi>>>13,tn=M[4]|0,St=tn&8191,Tt=tn>>>13,pi=M[5]|0,Ht=pi&8191,Je=pi>>>13,gi=M[6]|0,v=gi&8191,k=gi>>>13,C=M[7]|0,h=C&8191,R=C>>>13,G=M[8]|0,z=G&8191,Q=G>>>13,oe=M[9]|0,pe=oe&8191,ce=oe>>>13;S.negative=l.negative^m.negative,S.length=19,x=Math.imul(F,ut),p=Math.imul(F,ht),p=p+Math.imul(Z,ut)|0,P=Math.imul(Z,ht);var $e=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+($e>>>26)|0,$e&=67108863,x=Math.imul(ye,ut),p=Math.imul(ye,ht),p=p+Math.imul(ge,ut)|0,P=Math.imul(ge,ht),x=x+Math.imul(F,pt)|0,p=p+Math.imul(F,gt)|0,p=p+Math.imul(Z,pt)|0,P=P+Math.imul(Z,gt)|0;var xe=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(xe>>>26)|0,xe&=67108863,x=Math.imul(Oe,ut),p=Math.imul(Oe,ht),p=p+Math.imul(Ve,ut)|0,P=Math.imul(Ve,ht),x=x+Math.imul(ye,pt)|0,p=p+Math.imul(ye,gt)|0,p=p+Math.imul(ge,pt)|0,P=P+Math.imul(ge,gt)|0,x=x+Math.imul(F,Ot)|0,p=p+Math.imul(F,qt)|0,p=p+Math.imul(Z,Ot)|0,P=P+Math.imul(Z,qt)|0;var ke=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(ke>>>26)|0,ke&=67108863,x=Math.imul(yt,ut),p=Math.imul(yt,ht),p=p+Math.imul(Rt,ut)|0,P=Math.imul(Rt,ht),x=x+Math.imul(Oe,pt)|0,p=p+Math.imul(Oe,gt)|0,p=p+Math.imul(Ve,pt)|0,P=P+Math.imul(Ve,gt)|0,x=x+Math.imul(ye,Ot)|0,p=p+Math.imul(ye,qt)|0,p=p+Math.imul(ge,Ot)|0,P=P+Math.imul(ge,qt)|0,x=x+Math.imul(F,tt)|0,p=p+Math.imul(F,ct)|0,p=p+Math.imul(Z,tt)|0,P=P+Math.imul(Z,ct)|0;var Pe=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,x=Math.imul(Ft,ut),p=Math.imul(Ft,ht),p=p+Math.imul(jt,ut)|0,P=Math.imul(jt,ht),x=x+Math.imul(yt,pt)|0,p=p+Math.imul(yt,gt)|0,p=p+Math.imul(Rt,pt)|0,P=P+Math.imul(Rt,gt)|0,x=x+Math.imul(Oe,Ot)|0,p=p+Math.imul(Oe,qt)|0,p=p+Math.imul(Ve,Ot)|0,P=P+Math.imul(Ve,qt)|0,x=x+Math.imul(ye,tt)|0,p=p+Math.imul(ye,ct)|0,p=p+Math.imul(ge,tt)|0,P=P+Math.imul(ge,ct)|0,x=x+Math.imul(F,St)|0,p=p+Math.imul(F,Tt)|0,p=p+Math.imul(Z,St)|0,P=P+Math.imul(Z,Tt)|0;var Me=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Me>>>26)|0,Me&=67108863,x=Math.imul(wt,ut),p=Math.imul(wt,ht),p=p+Math.imul(Kt,ut)|0,P=Math.imul(Kt,ht),x=x+Math.imul(Ft,pt)|0,p=p+Math.imul(Ft,gt)|0,p=p+Math.imul(jt,pt)|0,P=P+Math.imul(jt,gt)|0,x=x+Math.imul(yt,Ot)|0,p=p+Math.imul(yt,qt)|0,p=p+Math.imul(Rt,Ot)|0,P=P+Math.imul(Rt,qt)|0,x=x+Math.imul(Oe,tt)|0,p=p+Math.imul(Oe,ct)|0,p=p+Math.imul(Ve,tt)|0,P=P+Math.imul(Ve,ct)|0,x=x+Math.imul(ye,St)|0,p=p+Math.imul(ye,Tt)|0,p=p+Math.imul(ge,St)|0,P=P+Math.imul(ge,Tt)|0,x=x+Math.imul(F,Ht)|0,p=p+Math.imul(F,Je)|0,p=p+Math.imul(Z,Ht)|0,P=P+Math.imul(Z,Je)|0;var Be=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Be>>>26)|0,Be&=67108863,x=Math.imul(Nt,ut),p=Math.imul(Nt,ht),p=p+Math.imul(_t,ut)|0,P=Math.imul(_t,ht),x=x+Math.imul(wt,pt)|0,p=p+Math.imul(wt,gt)|0,p=p+Math.imul(Kt,pt)|0,P=P+Math.imul(Kt,gt)|0,x=x+Math.imul(Ft,Ot)|0,p=p+Math.imul(Ft,qt)|0,p=p+Math.imul(jt,Ot)|0,P=P+Math.imul(jt,qt)|0,x=x+Math.imul(yt,tt)|0,p=p+Math.imul(yt,ct)|0,p=p+Math.imul(Rt,tt)|0,P=P+Math.imul(Rt,ct)|0,x=x+Math.imul(Oe,St)|0,p=p+Math.imul(Oe,Tt)|0,p=p+Math.imul(Ve,St)|0,P=P+Math.imul(Ve,Tt)|0,x=x+Math.imul(ye,Ht)|0,p=p+Math.imul(ye,Je)|0,p=p+Math.imul(ge,Ht)|0,P=P+Math.imul(ge,Je)|0,x=x+Math.imul(F,v)|0,p=p+Math.imul(F,k)|0,p=p+Math.imul(Z,v)|0,P=P+Math.imul(Z,k)|0;var Ce=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,x=Math.imul(Et,ut),p=Math.imul(Et,ht),p=p+Math.imul(Bt,ut)|0,P=Math.imul(Bt,ht),x=x+Math.imul(Nt,pt)|0,p=p+Math.imul(Nt,gt)|0,p=p+Math.imul(_t,pt)|0,P=P+Math.imul(_t,gt)|0,x=x+Math.imul(wt,Ot)|0,p=p+Math.imul(wt,qt)|0,p=p+Math.imul(Kt,Ot)|0,P=P+Math.imul(Kt,qt)|0,x=x+Math.imul(Ft,tt)|0,p=p+Math.imul(Ft,ct)|0,p=p+Math.imul(jt,tt)|0,P=P+Math.imul(jt,ct)|0,x=x+Math.imul(yt,St)|0,p=p+Math.imul(yt,Tt)|0,p=p+Math.imul(Rt,St)|0,P=P+Math.imul(Rt,Tt)|0,x=x+Math.imul(Oe,Ht)|0,p=p+Math.imul(Oe,Je)|0,p=p+Math.imul(Ve,Ht)|0,P=P+Math.imul(Ve,Je)|0,x=x+Math.imul(ye,v)|0,p=p+Math.imul(ye,k)|0,p=p+Math.imul(ge,v)|0,P=P+Math.imul(ge,k)|0,x=x+Math.imul(F,h)|0,p=p+Math.imul(F,R)|0,p=p+Math.imul(Z,h)|0,P=P+Math.imul(Z,R)|0;var Re=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Re>>>26)|0,Re&=67108863,x=Math.imul(Mt,ut),p=Math.imul(Mt,ht),p=p+Math.imul($t,ut)|0,P=Math.imul($t,ht),x=x+Math.imul(Et,pt)|0,p=p+Math.imul(Et,gt)|0,p=p+Math.imul(Bt,pt)|0,P=P+Math.imul(Bt,gt)|0,x=x+Math.imul(Nt,Ot)|0,p=p+Math.imul(Nt,qt)|0,p=p+Math.imul(_t,Ot)|0,P=P+Math.imul(_t,qt)|0,x=x+Math.imul(wt,tt)|0,p=p+Math.imul(wt,ct)|0,p=p+Math.imul(Kt,tt)|0,P=P+Math.imul(Kt,ct)|0,x=x+Math.imul(Ft,St)|0,p=p+Math.imul(Ft,Tt)|0,p=p+Math.imul(jt,St)|0,P=P+Math.imul(jt,Tt)|0,x=x+Math.imul(yt,Ht)|0,p=p+Math.imul(yt,Je)|0,p=p+Math.imul(Rt,Ht)|0,P=P+Math.imul(Rt,Je)|0,x=x+Math.imul(Oe,v)|0,p=p+Math.imul(Oe,k)|0,p=p+Math.imul(Ve,v)|0,P=P+Math.imul(Ve,k)|0,x=x+Math.imul(ye,h)|0,p=p+Math.imul(ye,R)|0,p=p+Math.imul(ge,h)|0,P=P+Math.imul(ge,R)|0,x=x+Math.imul(F,z)|0,p=p+Math.imul(F,Q)|0,p=p+Math.imul(Z,z)|0,P=P+Math.imul(Z,Q)|0;var Ie=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,x=Math.imul(At,ut),p=Math.imul(At,ht),p=p+Math.imul(mt,ut)|0,P=Math.imul(mt,ht),x=x+Math.imul(Mt,pt)|0,p=p+Math.imul(Mt,gt)|0,p=p+Math.imul($t,pt)|0,P=P+Math.imul($t,gt)|0,x=x+Math.imul(Et,Ot)|0,p=p+Math.imul(Et,qt)|0,p=p+Math.imul(Bt,Ot)|0,P=P+Math.imul(Bt,qt)|0,x=x+Math.imul(Nt,tt)|0,p=p+Math.imul(Nt,ct)|0,p=p+Math.imul(_t,tt)|0,P=P+Math.imul(_t,ct)|0,x=x+Math.imul(wt,St)|0,p=p+Math.imul(wt,Tt)|0,p=p+Math.imul(Kt,St)|0,P=P+Math.imul(Kt,Tt)|0,x=x+Math.imul(Ft,Ht)|0,p=p+Math.imul(Ft,Je)|0,p=p+Math.imul(jt,Ht)|0,P=P+Math.imul(jt,Je)|0,x=x+Math.imul(yt,v)|0,p=p+Math.imul(yt,k)|0,p=p+Math.imul(Rt,v)|0,P=P+Math.imul(Rt,k)|0,x=x+Math.imul(Oe,h)|0,p=p+Math.imul(Oe,R)|0,p=p+Math.imul(Ve,h)|0,P=P+Math.imul(Ve,R)|0,x=x+Math.imul(ye,z)|0,p=p+Math.imul(ye,Q)|0,p=p+Math.imul(ge,z)|0,P=P+Math.imul(ge,Q)|0,x=x+Math.imul(F,pe)|0,p=p+Math.imul(F,ce)|0,p=p+Math.imul(Z,pe)|0,P=P+Math.imul(Z,ce)|0;var ve=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(ve>>>26)|0,ve&=67108863,x=Math.imul(At,pt),p=Math.imul(At,gt),p=p+Math.imul(mt,pt)|0,P=Math.imul(mt,gt),x=x+Math.imul(Mt,Ot)|0,p=p+Math.imul(Mt,qt)|0,p=p+Math.imul($t,Ot)|0,P=P+Math.imul($t,qt)|0,x=x+Math.imul(Et,tt)|0,p=p+Math.imul(Et,ct)|0,p=p+Math.imul(Bt,tt)|0,P=P+Math.imul(Bt,ct)|0,x=x+Math.imul(Nt,St)|0,p=p+Math.imul(Nt,Tt)|0,p=p+Math.imul(_t,St)|0,P=P+Math.imul(_t,Tt)|0,x=x+Math.imul(wt,Ht)|0,p=p+Math.imul(wt,Je)|0,p=p+Math.imul(Kt,Ht)|0,P=P+Math.imul(Kt,Je)|0,x=x+Math.imul(Ft,v)|0,p=p+Math.imul(Ft,k)|0,p=p+Math.imul(jt,v)|0,P=P+Math.imul(jt,k)|0,x=x+Math.imul(yt,h)|0,p=p+Math.imul(yt,R)|0,p=p+Math.imul(Rt,h)|0,P=P+Math.imul(Rt,R)|0,x=x+Math.imul(Oe,z)|0,p=p+Math.imul(Oe,Q)|0,p=p+Math.imul(Ve,z)|0,P=P+Math.imul(Ve,Q)|0,x=x+Math.imul(ye,pe)|0,p=p+Math.imul(ye,ce)|0,p=p+Math.imul(ge,pe)|0,P=P+Math.imul(ge,ce)|0;var Ae=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,x=Math.imul(At,Ot),p=Math.imul(At,qt),p=p+Math.imul(mt,Ot)|0,P=Math.imul(mt,qt),x=x+Math.imul(Mt,tt)|0,p=p+Math.imul(Mt,ct)|0,p=p+Math.imul($t,tt)|0,P=P+Math.imul($t,ct)|0,x=x+Math.imul(Et,St)|0,p=p+Math.imul(Et,Tt)|0,p=p+Math.imul(Bt,St)|0,P=P+Math.imul(Bt,Tt)|0,x=x+Math.imul(Nt,Ht)|0,p=p+Math.imul(Nt,Je)|0,p=p+Math.imul(_t,Ht)|0,P=P+Math.imul(_t,Je)|0,x=x+Math.imul(wt,v)|0,p=p+Math.imul(wt,k)|0,p=p+Math.imul(Kt,v)|0,P=P+Math.imul(Kt,k)|0,x=x+Math.imul(Ft,h)|0,p=p+Math.imul(Ft,R)|0,p=p+Math.imul(jt,h)|0,P=P+Math.imul(jt,R)|0,x=x+Math.imul(yt,z)|0,p=p+Math.imul(yt,Q)|0,p=p+Math.imul(Rt,z)|0,P=P+Math.imul(Rt,Q)|0,x=x+Math.imul(Oe,pe)|0,p=p+Math.imul(Oe,ce)|0,p=p+Math.imul(Ve,pe)|0,P=P+Math.imul(Ve,ce)|0;var me=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(me>>>26)|0,me&=67108863,x=Math.imul(At,tt),p=Math.imul(At,ct),p=p+Math.imul(mt,tt)|0,P=Math.imul(mt,ct),x=x+Math.imul(Mt,St)|0,p=p+Math.imul(Mt,Tt)|0,p=p+Math.imul($t,St)|0,P=P+Math.imul($t,Tt)|0,x=x+Math.imul(Et,Ht)|0,p=p+Math.imul(Et,Je)|0,p=p+Math.imul(Bt,Ht)|0,P=P+Math.imul(Bt,Je)|0,x=x+Math.imul(Nt,v)|0,p=p+Math.imul(Nt,k)|0,p=p+Math.imul(_t,v)|0,P=P+Math.imul(_t,k)|0,x=x+Math.imul(wt,h)|0,p=p+Math.imul(wt,R)|0,p=p+Math.imul(Kt,h)|0,P=P+Math.imul(Kt,R)|0,x=x+Math.imul(Ft,z)|0,p=p+Math.imul(Ft,Q)|0,p=p+Math.imul(jt,z)|0,P=P+Math.imul(jt,Q)|0,x=x+Math.imul(yt,pe)|0,p=p+Math.imul(yt,ce)|0,p=p+Math.imul(Rt,pe)|0,P=P+Math.imul(Rt,ce)|0;var we=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(we>>>26)|0,we&=67108863,x=Math.imul(At,St),p=Math.imul(At,Tt),p=p+Math.imul(mt,St)|0,P=Math.imul(mt,Tt),x=x+Math.imul(Mt,Ht)|0,p=p+Math.imul(Mt,Je)|0,p=p+Math.imul($t,Ht)|0,P=P+Math.imul($t,Je)|0,x=x+Math.imul(Et,v)|0,p=p+Math.imul(Et,k)|0,p=p+Math.imul(Bt,v)|0,P=P+Math.imul(Bt,k)|0,x=x+Math.imul(Nt,h)|0,p=p+Math.imul(Nt,R)|0,p=p+Math.imul(_t,h)|0,P=P+Math.imul(_t,R)|0,x=x+Math.imul(wt,z)|0,p=p+Math.imul(wt,Q)|0,p=p+Math.imul(Kt,z)|0,P=P+Math.imul(Kt,Q)|0,x=x+Math.imul(Ft,pe)|0,p=p+Math.imul(Ft,ce)|0,p=p+Math.imul(jt,pe)|0,P=P+Math.imul(jt,ce)|0;var Ee=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,x=Math.imul(At,Ht),p=Math.imul(At,Je),p=p+Math.imul(mt,Ht)|0,P=Math.imul(mt,Je),x=x+Math.imul(Mt,v)|0,p=p+Math.imul(Mt,k)|0,p=p+Math.imul($t,v)|0,P=P+Math.imul($t,k)|0,x=x+Math.imul(Et,h)|0,p=p+Math.imul(Et,R)|0,p=p+Math.imul(Bt,h)|0,P=P+Math.imul(Bt,R)|0,x=x+Math.imul(Nt,z)|0,p=p+Math.imul(Nt,Q)|0,p=p+Math.imul(_t,z)|0,P=P+Math.imul(_t,Q)|0,x=x+Math.imul(wt,pe)|0,p=p+Math.imul(wt,ce)|0,p=p+Math.imul(Kt,pe)|0,P=P+Math.imul(Kt,ce)|0;var be=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(be>>>26)|0,be&=67108863,x=Math.imul(At,v),p=Math.imul(At,k),p=p+Math.imul(mt,v)|0,P=Math.imul(mt,k),x=x+Math.imul(Mt,h)|0,p=p+Math.imul(Mt,R)|0,p=p+Math.imul($t,h)|0,P=P+Math.imul($t,R)|0,x=x+Math.imul(Et,z)|0,p=p+Math.imul(Et,Q)|0,p=p+Math.imul(Bt,z)|0,P=P+Math.imul(Bt,Q)|0,x=x+Math.imul(Nt,pe)|0,p=p+Math.imul(Nt,ce)|0,p=p+Math.imul(_t,pe)|0,P=P+Math.imul(_t,ce)|0;var J=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(J>>>26)|0,J&=67108863,x=Math.imul(At,h),p=Math.imul(At,R),p=p+Math.imul(mt,h)|0,P=Math.imul(mt,R),x=x+Math.imul(Mt,z)|0,p=p+Math.imul(Mt,Q)|0,p=p+Math.imul($t,z)|0,P=P+Math.imul($t,Q)|0,x=x+Math.imul(Et,pe)|0,p=p+Math.imul(Et,ce)|0,p=p+Math.imul(Bt,pe)|0,P=P+Math.imul(Bt,ce)|0;var W=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(W>>>26)|0,W&=67108863,x=Math.imul(At,z),p=Math.imul(At,Q),p=p+Math.imul(mt,z)|0,P=Math.imul(mt,Q),x=x+Math.imul(Mt,pe)|0,p=p+Math.imul(Mt,ce)|0,p=p+Math.imul($t,pe)|0,P=P+Math.imul($t,ce)|0;var se=(K+x|0)+((p&8191)<<13)|0;K=(P+(p>>>13)|0)+(se>>>26)|0,se&=67108863,x=Math.imul(At,pe),p=Math.imul(At,ce),p=p+Math.imul(mt,pe)|0,P=Math.imul(mt,ce);var te=(K+x|0)+((p&8191)<<13)|0;return K=(P+(p>>>13)|0)+(te>>>26)|0,te&=67108863,D[0]=$e,D[1]=xe,D[2]=ke,D[3]=Pe,D[4]=Me,D[5]=Be,D[6]=Ce,D[7]=Re,D[8]=Ie,D[9]=ve,D[10]=Ae,D[11]=me,D[12]=we,D[13]=Ee,D[14]=be,D[15]=J,D[16]=W,D[17]=se,D[18]=te,K!==0&&(D[19]=K,S.length++),S};Math.imul||(A=_);function B(T,l,m){m.negative=l.negative^T.negative,m.length=T.length+l.length;for(var S=0,I=0,M=0;M<m.length-1;M++){var D=I;I=0;for(var K=S&67108863,x=Math.min(M,l.length-1),p=Math.max(0,M-T.length+1);p<=x;p++){var P=M-p,$=T.words[P]|0,F=l.words[p]|0,Z=$*F,_e=Z&67108863;D=D+(Z/67108864|0)|0,_e=_e+K|0,K=_e&67108863,D=D+(_e>>>26)|0,I+=D>>>26,D&=67108863}m.words[M]=K,S=D,D=I}return S!==0?m.words[M]=S:m.length--,m._strip()}function N(T,l,m){return B(T,l,m)}s.prototype.mulTo=function(l,m){var S,I=this.length+l.length;return this.length===10&&l.length===10?S=A(this,l,m):I<63?S=_(this,l,m):I<1024?S=B(this,l,m):S=N(this,l,m),S},s.prototype.mul=function(l){var m=new s(null);return m.words=new Array(this.length+l.length),this.mulTo(l,m)},s.prototype.mulf=function(l){var m=new s(null);return m.words=new Array(this.length+l.length),N(this,l,m)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){var m=l<0;m&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var S=0,I=0;I<this.length;I++){var M=(this.words[I]|0)*l,D=(M&67108863)+(S&67108863);S>>=26,S+=M/67108864|0,S+=D>>>26,this.words[I]=D&67108863}return S!==0&&(this.words[I]=S,this.length++),m?this.ineg():this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var m=y(l);if(m.length===0)return new s(1);for(var S=this,I=0;I<m.length&&m[I]===0;I++,S=S.sqr());if(++I<m.length)for(var M=S.sqr();I<m.length;I++,M=M.sqr())m[I]!==0&&(S=S.mul(M));return S},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var m=l%26,S=(l-m)/26,I=67108863>>>26-m<<26-m,M;if(m!==0){var D=0;for(M=0;M<this.length;M++){var K=this.words[M]&I,x=(this.words[M]|0)-K<<m;this.words[M]=x|D,D=K>>>26-m}D&&(this.words[M]=D,this.length++)}if(S!==0){for(M=this.length-1;M>=0;M--)this.words[M+S]=this.words[M];for(M=0;M<S;M++)this.words[M]=0;this.length+=S}return this._strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,m,S){n(typeof l=="number"&&l>=0);var I;m?I=(m-m%26)/26:I=0;var M=l%26,D=Math.min((l-M)/26,this.length),K=67108863^67108863>>>M<<M,x=S;if(I-=D,I=Math.max(0,I),x){for(var p=0;p<D;p++)x.words[p]=this.words[p];x.length=D}if(D!==0)if(this.length>D)for(this.length-=D,p=0;p<this.length;p++)this.words[p]=this.words[p+D];else this.words[0]=0,this.length=1;var P=0;for(p=this.length-1;p>=0&&(P!==0||p>=I);p--){var $=this.words[p]|0;this.words[p]=P<<26-M|$>>>M,P=$&K}return x&&P!==0&&(x.words[x.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(l,m,S){return n(this.negative===0),this.iushrn(l,m,S)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var m=l%26,S=(l-m)/26,I=1<<m;if(this.length<=S)return!1;var M=this.words[S];return!!(M&I)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var m=l%26,S=(l-m)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(m!==0&&S++,this.length=Math.min(S,this.length),m!==0){var I=67108863^67108863>>>m<<m;this.words[this.length-1]&=I}return this._strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this._strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,m,S){var I=l.length+S,M;this._expand(I);var D,K=0;for(M=0;M<l.length;M++){D=(this.words[M+S]|0)+K;var x=(l.words[M]|0)*m;D-=x&67108863,K=(D>>26)-(x/67108864|0),this.words[M+S]=D&67108863}for(;M<this.length-S;M++)D=(this.words[M+S]|0)+K,K=D>>26,this.words[M+S]=D&67108863;if(K===0)return this._strip();for(n(K===-1),K=0,M=0;M<this.length;M++)D=-(this.words[M]|0)+K,K=D>>26,this.words[M]=D&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(l,m){var S=this.length-l.length,I=this.clone(),M=l,D=M.words[M.length-1]|0,K=this._countBits(D);S=26-K,S!==0&&(M=M.ushln(S),I.iushln(S),D=M.words[M.length-1]|0);var x=I.length-M.length,p;if(m!=="mod"){p=new s(null),p.length=x+1,p.words=new Array(p.length);for(var P=0;P<p.length;P++)p.words[P]=0}var $=I.clone()._ishlnsubmul(M,1,x);$.negative===0&&(I=$,p&&(p.words[x]=1));for(var F=x-1;F>=0;F--){var Z=(I.words[M.length+F]|0)*67108864+(I.words[M.length+F-1]|0);for(Z=Math.min(Z/D|0,67108863),I._ishlnsubmul(M,Z,F);I.negative!==0;)Z--,I.negative=0,I._ishlnsubmul(M,1,F),I.isZero()||(I.negative^=1);p&&(p.words[F]=Z)}return p&&p._strip(),I._strip(),m!=="div"&&S!==0&&I.iushrn(S),{div:p||null,mod:I}},s.prototype.divmod=function(l,m,S){if(n(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var I,M,D;return this.negative!==0&&l.negative===0?(D=this.neg().divmod(l,m),m!=="mod"&&(I=D.div.neg()),m!=="div"&&(M=D.mod.neg(),S&&M.negative!==0&&M.iadd(l)),{div:I,mod:M}):this.negative===0&&l.negative!==0?(D=this.divmod(l.neg(),m),m!=="mod"&&(I=D.div.neg()),{div:I,mod:D.mod}):(this.negative&l.negative)!==0?(D=this.neg().divmod(l.neg(),m),m!=="div"&&(M=D.mod.neg(),S&&M.negative!==0&&M.isub(l)),{div:D.div,mod:M}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?m==="div"?{div:this.divn(l.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modrn(l.words[0]))}:this._wordDiv(l,m)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var m=this.divmod(l);if(m.mod.isZero())return m.div;var S=m.div.negative!==0?m.mod.isub(l):m.mod,I=l.ushrn(1),M=l.andln(1),D=S.cmp(I);return D<0||M===1&&D===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},s.prototype.modrn=function(l){var m=l<0;m&&(l=-l),n(l<=67108863);for(var S=(1<<26)%l,I=0,M=this.length-1;M>=0;M--)I=(S*I+(this.words[M]|0))%l;return m?-I:I},s.prototype.modn=function(l){return this.modrn(l)},s.prototype.idivn=function(l){var m=l<0;m&&(l=-l),n(l<=67108863);for(var S=0,I=this.length-1;I>=0;I--){var M=(this.words[I]|0)+S*67108864;this.words[I]=M/l|0,S=M%l}return this._strip(),m?this.ineg():this},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var m=this,S=l.clone();m.negative!==0?m=m.umod(l):m=m.clone();for(var I=new s(1),M=new s(0),D=new s(0),K=new s(1),x=0;m.isEven()&&S.isEven();)m.iushrn(1),S.iushrn(1),++x;for(var p=S.clone(),P=m.clone();!m.isZero();){for(var $=0,F=1;(m.words[0]&F)===0&&$<26;++$,F<<=1);if($>0)for(m.iushrn($);$-- >0;)(I.isOdd()||M.isOdd())&&(I.iadd(p),M.isub(P)),I.iushrn(1),M.iushrn(1);for(var Z=0,_e=1;(S.words[0]&_e)===0&&Z<26;++Z,_e<<=1);if(Z>0)for(S.iushrn(Z);Z-- >0;)(D.isOdd()||K.isOdd())&&(D.iadd(p),K.isub(P)),D.iushrn(1),K.iushrn(1);m.cmp(S)>=0?(m.isub(S),I.isub(D),M.isub(K)):(S.isub(m),D.isub(I),K.isub(M))}return{a:D,b:K,gcd:S.iushln(x)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var m=this,S=l.clone();m.negative!==0?m=m.umod(l):m=m.clone();for(var I=new s(1),M=new s(0),D=S.clone();m.cmpn(1)>0&&S.cmpn(1)>0;){for(var K=0,x=1;(m.words[0]&x)===0&&K<26;++K,x<<=1);if(K>0)for(m.iushrn(K);K-- >0;)I.isOdd()&&I.iadd(D),I.iushrn(1);for(var p=0,P=1;(S.words[0]&P)===0&&p<26;++p,P<<=1);if(p>0)for(S.iushrn(p);p-- >0;)M.isOdd()&&M.iadd(D),M.iushrn(1);m.cmp(S)>=0?(m.isub(S),I.isub(M)):(S.isub(m),M.isub(I))}var $;return m.cmpn(1)===0?$=I:$=M,$.cmpn(0)<0&&$.iadd(l),$},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var m=this.clone(),S=l.clone();m.negative=0,S.negative=0;for(var I=0;m.isEven()&&S.isEven();I++)m.iushrn(1),S.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;S.isEven();)S.iushrn(1);var M=m.cmp(S);if(M<0){var D=m;m=S,S=D}else if(M===0||S.cmpn(1)===0)break;m.isub(S)}while(!0);return S.iushln(I)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var m=l%26,S=(l-m)/26,I=1<<m;if(this.length<=S)return this._expand(S+1),this.words[S]|=I,this;for(var M=I,D=S;M!==0&&D<this.length;D++){var K=this.words[D]|0;K+=M,M=K>>>26,K&=67108863,this.words[D]=K}return M!==0&&(this.words[D]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var m=l<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this._strip();var S;if(this.length>1)S=1;else{m&&(l=-l),n(l<=67108863,"Number is too big");var I=this.words[0]|0;S=I===l?0:I<l?-1:1}return this.negative!==0?-S|0:S},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var m=this.ucmp(l);return this.negative!==0?-m|0:m},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var m=0,S=this.length-1;S>=0;S--){var I=this.words[S]|0,M=l.words[S]|0;if(I!==M){I<M?m=-1:I>M&&(m=1);break}}return m},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new de(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var O={k256:null,p224:null,p192:null,p25519:null};function U(T,l){this.name=T,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},U.prototype.ireduce=function(l){var m=l,S;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),S=m.bitLength();while(S>this.n);var I=S<this.n?-1:m.ucmp(this.p);return I===0?(m.words[0]=0,m.length=1):I>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},U.prototype.split=function(l,m){l.iushrn(this.n,0,m)},U.prototype.imulK=function(l){return l.imul(this.k)};function H(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(H,U),H.prototype.split=function(l,m){for(var S=4194303,I=Math.min(l.length,9),M=0;M<I;M++)m.words[M]=l.words[M];if(m.length=I,l.length<=9){l.words[0]=0,l.length=1;return}var D=l.words[9];for(m.words[m.length++]=D&S,M=10;M<l.length;M++){var K=l.words[M]|0;l.words[M-10]=(K&S)<<4|D>>>22,D=K}D>>>=22,l.words[M-10]=D,D===0&&l.length>10?l.length-=10:l.length-=9},H.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var m=0,S=0;S<l.length;S++){var I=l.words[S]|0;m+=I*977,l.words[S]=m&67108863,m=I*64+(m/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function V(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(V,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(re,U);function ae(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ae,U),ae.prototype.imulK=function(l){for(var m=0,S=0;S<l.length;S++){var I=(l.words[S]|0)*19+m,M=I&67108863;I>>>=26,l.words[S]=M,m=I}return m!==0&&(l.words[l.length++]=m),l},s._prime=function(l){if(O[l])return O[l];var m;if(l==="k256")m=new H;else if(l==="p224")m=new V;else if(l==="p192")m=new re;else if(l==="p25519")m=new ae;else throw new Error("Unknown prime "+l);return O[l]=m,m};function de(T){if(typeof T=="string"){var l=s._prime(T);this.m=l.p,this.prime=l}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}de.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},de.prototype._verify2=function(l,m){n((l.negative|m.negative)===0,"red works only with positives"),n(l.red&&l.red===m.red,"red works only with red numbers")},de.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(u(l,l.umod(this.m)._forceRed(this)),l)},de.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},de.prototype.add=function(l,m){this._verify2(l,m);var S=l.add(m);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},de.prototype.iadd=function(l,m){this._verify2(l,m);var S=l.iadd(m);return S.cmp(this.m)>=0&&S.isub(this.m),S},de.prototype.sub=function(l,m){this._verify2(l,m);var S=l.sub(m);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},de.prototype.isub=function(l,m){this._verify2(l,m);var S=l.isub(m);return S.cmpn(0)<0&&S.iadd(this.m),S},de.prototype.shl=function(l,m){return this._verify1(l),this.imod(l.ushln(m))},de.prototype.imul=function(l,m){return this._verify2(l,m),this.imod(l.imul(m))},de.prototype.mul=function(l,m){return this._verify2(l,m),this.imod(l.mul(m))},de.prototype.isqr=function(l){return this.imul(l,l.clone())},de.prototype.sqr=function(l){return this.mul(l,l)},de.prototype.sqrt=function(l){if(l.isZero())return l.clone();var m=this.m.andln(3);if(n(m%2===1),m===3){var S=this.m.add(new s(1)).iushrn(2);return this.pow(l,S)}for(var I=this.m.subn(1),M=0;!I.isZero()&&I.andln(1)===0;)M++,I.iushrn(1);n(!I.isZero());var D=new s(1).toRed(this),K=D.redNeg(),x=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new s(2*p*p).toRed(this);this.pow(p,x).cmp(K)!==0;)p.redIAdd(K);for(var P=this.pow(p,I),$=this.pow(l,I.addn(1).iushrn(1)),F=this.pow(l,I),Z=M;F.cmp(D)!==0;){for(var _e=F,ye=0;_e.cmp(D)!==0;ye++)_e=_e.redSqr();n(ye<Z);var ge=this.pow(P,new s(1).iushln(Z-ye-1));$=$.redMul(ge),P=ge.redSqr(),F=F.redMul(P),Z=ye}return $},de.prototype.invm=function(l){var m=l._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},de.prototype.pow=function(l,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return l.clone();var S=4,I=new Array(1<<S);I[0]=new s(1).toRed(this),I[1]=l;for(var M=2;M<I.length;M++)I[M]=this.mul(I[M-1],l);var D=I[0],K=0,x=0,p=m.bitLength()%26;for(p===0&&(p=26),M=m.length-1;M>=0;M--){for(var P=m.words[M],$=p-1;$>=0;$--){var F=P>>$&1;if(D!==I[0]&&(D=this.sqr(D)),F===0&&K===0){x=0;continue}K<<=1,K|=F,x++,!(x!==S&&(M!==0||$!==0))&&(D=this.mul(D,I[K]),x=0,K=0)}p=26}return D},de.prototype.convertTo=function(l){var m=l.umod(this.m);return m===l?m.clone():m},de.prototype.convertFrom=function(l){var m=l.clone();return m.red=null,m},s.mont=function(l){return new ee(l)};function ee(T){de.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ee,de),ee.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},ee.prototype.convertFrom=function(l){var m=this.imod(l.mul(this.rinv));return m.red=null,m},ee.prototype.imul=function(l,m){if(l.isZero()||m.isZero())return l.words[0]=0,l.length=1,l;var S=l.imul(m),I=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=S.isub(I).iushrn(this.shift),D=M;return M.cmp(this.m)>=0?D=M.isub(this.m):M.cmpn(0)<0&&(D=M.iadd(this.m)),D._forceRed(this)},ee.prototype.mul=function(l,m){if(l.isZero()||m.isZero())return new s(0)._forceRed(this);var S=l.mul(m),I=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=S.isub(I).iushrn(this.shift),D=M;return M.cmp(this.m)>=0?D=M.isub(this.m):M.cmpn(0)<0&&(D=M.iadd(this.m)),D._forceRed(this)},ee.prototype.invm=function(l){var m=this.imod(l._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(t,q)})(Bi);var S5=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),T5=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ui=q&&q.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},k5=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&S5(e,t,r);return T5(e,t),e},Gx=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.deserializeUnchecked=Wt.deserialize=Wt.serialize=Wt.BinaryReader=Wt.BinaryWriter=Wt.BorshError=Wt.baseDecode=Wt.baseEncode=void 0;const Gi=Gx(Bi.exports),Vx=Gx(Vc),P5=k5(v1),C5=typeof q.TextDecoder!="function"?P5.TextDecoder:q.TextDecoder,I5=new C5("utf-8",{fatal:!0});function R5(t){return typeof t=="string"&&(t=X.Buffer.from(t,"utf8")),Vx.default.encode(X.Buffer.from(t))}Wt.baseEncode=R5;function N5(t){return X.Buffer.from(Vx.default.decode(t))}Wt.baseDecode=N5;const Yu=1024;class $r extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Wt.BorshError=$r;class Jx{constructor(){this.buf=X.Buffer.alloc(Yu),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=X.Buffer.concat([this.buf,X.Buffer.alloc(Yu)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(X.Buffer.from(new Gi.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(X.Buffer.from(new Gi.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(X.Buffer.from(new Gi.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(X.Buffer.from(new Gi.default(e).toArray("le",64)))}writeBuffer(e){this.buf=X.Buffer.concat([X.Buffer.from(this.buf.subarray(0,this.length)),e,X.Buffer.alloc(Yu)]),this.length+=e.length}writeString(e){this.maybeResize();const r=X.Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(X.Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}Wt.BinaryWriter=Jx;function li(t,e,r){const n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new $r("Reached the end of buffer when deserializing")}throw s}}}class hn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Gi.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Gi.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Gi.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Gi.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new $r(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return I5.decode(r)}catch(n){throw new $r(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(e());return n}}ui([li],hn.prototype,"readU8",null);ui([li],hn.prototype,"readU16",null);ui([li],hn.prototype,"readU32",null);ui([li],hn.prototype,"readU64",null);ui([li],hn.prototype,"readU128",null);ui([li],hn.prototype,"readU256",null);ui([li],hn.prototype,"readU512",null);ui([li],hn.prototype,"readString",null);ui([li],hn.prototype,"readFixedArray",null);ui([li],hn.prototype,"readArray",null);Wt.BinaryReader=hn;function Wx(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ao(t,e,r,n,i){try{if(typeof n=="string")i[`write${Wx(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new $r(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new $r(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let s=0;s<n[1];s++)ao(t,null,r[s],n[0],i)}else i.writeArray(r,s=>{ao(t,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),ao(t,e,r,n.type,i));break}default:throw new $r(`FieldType ${n} unrecognized`)}else Yx(t,r,i)}catch(s){throw s instanceof $r&&s.addToFieldPath(e),s}}function Yx(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new $r(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{ao(t,i,e[i],s,r)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[a,o]=n.values[s];if(a===i){r.writeU8(s),ao(t,a,e[a],o,r);break}}}else throw new $r(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function B5(t,e,r=Jx){const n=new r;return Yx(t,e,n),n.toArray()}Wt.serialize=B5;function oo(t,e,r,n){try{if(typeof r=="string")return n[`read${Wx(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const i=[];for(let s=0;s<r[1];s++)i.push(oo(t,null,r[0],n));return i}else return n.readArray(()=>oo(t,e,r[0],n))}return r.kind==="option"?n.readU8()?oo(t,e,r.type,n):void 0:Lh(t,r,n)}catch(i){throw i instanceof $r&&i.addToFieldPath(e),i}}function Lh(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new $r(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,a]of t.get(e).fields)i[s]=oo(t,s,a,r);return new e(i)}if(n.kind==="enum"){const i=r.readU8();if(i>=n.values.length)throw new $r(`Enum index: ${i} is out of range`);const[s,a]=n.values[i],o=oo(t,s,a,r);return new e({[s]:o})}throw new $r(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function M5(t,e,r,n=hn){const i=new n(r),s=Lh(t,e,i);if(i.offset<r.length)throw new $r(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s}Wt.deserialize=M5;function O5(t,e,r,n=hn){const i=new n(r);return Lh(t,e,i)}Wt.deserializeUnchecked=O5;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Wt;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(Uh);var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.Assignable=Xi.Enum=void 0;class D5{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}Xi.Enum=D5;class U5{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}Xi.Assignable=U5;(function(t){var e=q&&q.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const r=e(zx.exports),n=Uh,i=Xi;var s;(function(d){d[d.ED25519=0]="ED25519"})(s=t.KeyType||(t.KeyType={}));function a(d){switch(d){case s.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${d}`)}}function o(d){switch(d.toLowerCase()){case"ed25519":return s.ED25519;default:throw new Error(`Unknown key type ${d}`)}}class c extends i.Assignable{static from(g){return typeof g=="string"?c.fromString(g):g}static fromString(g){const b=g.split(":");if(b.length===1)return new c({keyType:s.ED25519,data:n.base_decode(b[0])});if(b.length===2)return new c({keyType:o(b[0]),data:n.base_decode(b[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${a(this.keyType)}:${n.base_encode(this.data)}`}verify(g,b){switch(this.keyType){case s.ED25519:return r.default.sign.detached.verify(g,b,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}t.PublicKey=c;class f{static fromRandom(g){switch(g.toUpperCase()){case"ED25519":return u.fromRandom();default:throw new Error(`Unknown curve ${g}`)}}static fromString(g){const b=g.split(":");if(b.length===1)return new u(b[0]);if(b.length===2)switch(b[0].toUpperCase()){case"ED25519":return new u(b[1]);default:throw new Error(`Unknown curve: ${b[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=f;class u extends f{constructor(g){super();const b=r.default.sign.keyPair.fromSecretKey(n.base_decode(g));this.publicKey=new c({keyType:s.ED25519,data:b.publicKey}),this.secretKey=g}static fromRandom(){const g=r.default.sign.keyPair();return new u(n.base_encode(g.secretKey))}sign(g){return{signature:r.default.sign.detached(g,n.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(g,b){return this.publicKey.verify(g,b)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=u})(si);Object.defineProperty(Go,"__esModule",{value:!0});Go.InMemoryKeyStore=void 0;const L5=Ds,F5=si;class j5 extends L5.KeyStore{constructor(){super(),this.keys={}}async setKey(e,r,n){this.keys[`${r}:${e}`]=n.toString()}async getKey(e,r){const n=this.keys[`${r}:${e}`];return n?F5.KeyPair.fromString(n):null}async removeKey(e,r){delete this.keys[`${r}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r}toString(){return"InMemoryKeyStore"}}Go.InMemoryKeyStore=j5;var Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.BrowserLocalStorageKeyStore=void 0;const K5=Ds,$5=si,q5="near-api-js:keystore:";class H5 extends K5.KeyStore{constructor(e=window.localStorage,r=q5){super(),this.localStorage=e,this.prefix=r}async setKey(e,r,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())}async getKey(e,r){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?$5.KeyPair.fromString(n):null}async removeKey(e,r){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Of.BrowserLocalStorageKeyStore=H5;var Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.MergeKeyStore=void 0;const z5=Ds;class G5 extends z5.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}async setKey(e,r,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)}async getKey(e,r){for(const n of this.keyStores){const i=await n.getKey(e,r);if(i)return i}return null}async removeKey(e,r){for(const n of this.keyStores)await n.removeKey(e,r)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const r of this.keyStores)for(const n of await r.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const r=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))r.add(i);return Array.from(r)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}Df.MergeKeyStore=G5;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=Ds;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const r=Go;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=Of;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=Df;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(Hx);var Xu={},Qu={},Fh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(n){n.Unknown="Unknown",n.Pending="Pending",n.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(n){n.NotStarted="NotStarted",n.Started="Started",n.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(n){n.Transaction="transaction",n.Receipt="receipt"}(t.IdType||(t.IdType={}));class e{}t.Provider=e;function r(n){if(typeof n.status=="object"&&typeof n.status.SuccessValue=="string"){const i=X.Buffer.from(n.status.SuccessValue,"base64").toString();try{return JSON.parse(i)}catch{return i}}return null}t.getTransactionLastResult=r})(Fh);var Zu={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Ta=V5;function V5(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=J5,e.property=W5,e}function J5(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function W5(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var ja={},Xx={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Y5=X5;function X5(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=Q5,e.property=Z5,e}function Q5(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function Z5(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var e8=Object.setPrototypeOf||({__proto__:[]}instanceof Array?t8:r8);function t8(t,e){return t.__proto__=e,t}function r8(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}const n8={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var Qx=n8,i8=Zn;Zn.STATUS_CODES=Qx;Zn.codes=s8(Zn,Qx);Zn.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Zn.empty={204:!0,205:!0,304:!0};Zn.retry={502:!0,503:!0,504:!0};function s8(t,e){var r=[];return Object.keys(e).forEach(function(i){var s=e[i],a=Number(i);t[a]=s,t[s]=a,t[s.toLowerCase()]=a,r.push(a)}),r}function Zn(t){if(typeof t=="number"){if(!Zn[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!Zn[e])throw new Error("invalid status code: "+e);return e}if(e=Zn[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var a8=o8;function o8(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=Y5("http-errors"),r=e8,n=i8,i=w1.exports,s=a8;t.exports=o,t.exports.HttpError=c(),t.exports.isHttpError=u(t.exports.HttpError),b(t.exports,n.codes,t.exports.HttpError);function a(w){return Number(String(w).charAt(0)+"00")}function o(){for(var w,y,_=500,A={},B=0;B<arguments.length;B++){var N=arguments[B];if(N instanceof Error){w=N,_=w.status||w.statusCode||_;continue}switch(typeof N){case"string":y=N;break;case"number":_=N;break;case"object":A=N;break}}(typeof _!="number"||!n[_]&&(_<400||_>=600))&&(_=500);var O=o[_]||o[a(_)];w||(w=O?new O(y):new Error(y||n[_]),Error.captureStackTrace(w,o)),(!O||!(w instanceof O)||w.status!==_)&&(w.expose=_<500,w.status=w.statusCode=_);for(var U in A)U!=="status"&&U!=="statusCode"&&(w[U]=A[U]);return w}function c(){function w(){throw new TypeError("cannot construct abstract class")}return i(w,Error),w}function f(w,y,_){var A=E(y);function B(N){var O=N??n[_],U=new Error(O);return Error.captureStackTrace(U,B),r(U,B.prototype),Object.defineProperty(U,"message",{enumerable:!0,configurable:!0,value:O,writable:!0}),Object.defineProperty(U,"name",{enumerable:!1,configurable:!0,value:A,writable:!0}),U}return i(B,w),g(B,A),B.prototype.status=_,B.prototype.statusCode=_,B.prototype.expose=!0,B}function u(w){return function(_){return!_||typeof _!="object"?!1:_ instanceof w?!0:_ instanceof Error&&typeof _.expose=="boolean"&&typeof _.statusCode=="number"&&_.status===_.statusCode}}function d(w,y,_){var A=E(y);function B(N){var O=N??n[_],U=new Error(O);return Error.captureStackTrace(U,B),r(U,B.prototype),Object.defineProperty(U,"message",{enumerable:!0,configurable:!0,value:O,writable:!0}),Object.defineProperty(U,"name",{enumerable:!1,configurable:!0,value:A,writable:!0}),U}return i(B,w),g(B,A),B.prototype.status=_,B.prototype.statusCode=_,B.prototype.expose=!1,B}function g(w,y){var _=Object.getOwnPropertyDescriptor(w,"name");_&&_.configurable&&(_.value=y,Object.defineProperty(w,"name",_))}function b(w,y,_){y.forEach(function(B){var N,O=s(n[B]);switch(a(B)){case 400:N=f(_,O,B);break;case 500:N=d(_,O,B);break}N&&(w[B]=N,w[O]=N)}),w["I'mateapot"]=e.function(w.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function E(w){return w.substr(-5)!=="Error"?w+"Error":w}})(Xx);var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});async function c8(t,e,r,n){let i=t;for(let s=0;s<e;s++){const a=await n();if(a)return a;await f8(i),i*=r}return null}Vo.default=c8;function f8(t){return new Promise(e=>setTimeout(e,t))}var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.logWarning=Ar.ErrorContext=Ar.TypedError=Ar.ArgumentTypeError=Ar.PositionalArgsError=void 0;class u8 extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Ar.PositionalArgsError=u8;class l8 extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Ar.ArgumentTypeError=l8;class d8 extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Ar.TypedError=d8;class h8{constructor(e){this.transactionHash=e}}Ar.ErrorContext=h8;function p8(...t){({}).NEAR_NO_LOGS||console.warn(...t)}Ar.logWarning=p8;var _g;function Uf(){if(_g)return ja;_g=1;var t=q&&q.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ja,"__esModule",{value:!0}),ja.fetchJson=void 0;const e=t(Xx.exports),r=t(Vo),n=Jo(),i=Ar,s=1e3,a=1.5,o=10;async function c(f,u){let d={url:null};typeof f=="string"?d.url=f:d=f;const g=await r.default(s,o,a,async()=>{try{const b=await fetch(d.url,{method:u?"POST":"GET",body:u||void 0,headers:{...d.headers,"Content-Type":"application/json"}});if(!b.ok){if(b.status===503)return i.logWarning(`Retrying HTTP request for ${d.url} as it's not available now`),null;throw e.default(b.status,await b.text())}return b}catch(b){if(b.toString().includes("FetchError")||b.toString().includes("Failed to fetch"))return i.logWarning(`Retrying HTTP request for ${d.url} because of error: ${b}`),null;throw b}});if(!g)throw new n.TypedError(`Exceeded ${o} attempts for ${d.url}.`,"RetriesExceeded");return await g.json()}return ja.fetchJson=c,ja}var nn={},Zx={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(q,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(T){return r.call(T)==="[object Array]"};function i(ee){return typeof ee=="function"}function s(ee){return n(ee)?"array":typeof ee}function a(ee){return ee.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(ee,T){return ee!=null&&typeof ee=="object"&&T in ee}function c(ee,T){return ee!=null&&typeof ee!="object"&&ee.hasOwnProperty&&ee.hasOwnProperty(T)}var f=RegExp.prototype.test;function u(ee,T){return f.call(ee,T)}var d=/\S/;function g(ee){return!u(d,ee)}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function E(ee){return String(ee).replace(/[&<>"'`=\/]/g,function(l){return b[l]})}var w=/\s*/,y=/\s+/,_=/\s*=/,A=/\s*\}/,B=/#|\^|\/|>|\{|&|=|!/;function N(ee,T){if(!ee)return[];var l=!1,m=[],S=[],I=[],M=!1,D=!1,K="",x=0;function p(){if(M&&!D)for(;I.length;)delete S[I.pop()];else I=[];M=!1,D=!1}var P,$,F;function Z(wr){if(typeof wr=="string"&&(wr=wr.split(y,2)),!n(wr)||wr.length!==2)throw new Error("Invalid tags: "+wr);P=new RegExp(a(wr[0])+"\\s*"),$=new RegExp("\\s*"+a(wr[1])),F=new RegExp("\\s*"+a("}"+wr[1]))}Z(T||ae.tags);for(var _e=new H(ee),ye,ge,He,Oe,Ve,Ir;!_e.eos();){if(ye=_e.pos,He=_e.scanUntil(P),He)for(var yt=0,Rt=He.length;yt<Rt;++yt)Oe=He.charAt(yt),g(Oe)?(I.push(S.length),K+=Oe):(D=!0,l=!0,K+=" "),S.push(["text",Oe,ye,ye+1]),ye+=1,Oe===`
`&&(p(),K="",x=0,l=!1);if(!_e.scan(P))break;if(M=!0,ge=_e.scan(B)||"name",_e.scan(w),ge==="="?(He=_e.scanUntil(_),_e.scan(_),_e.scanUntil($)):ge==="{"?(He=_e.scanUntil(F),_e.scan(A),_e.scanUntil($),ge="&"):He=_e.scanUntil($),!_e.scan($))throw new Error("Unclosed tag at "+_e.pos);if(ge==">"?Ve=[ge,He,ye,_e.pos,K,x,l]:Ve=[ge,He,ye,_e.pos],x++,S.push(Ve),ge==="#"||ge==="^")m.push(Ve);else if(ge==="/"){if(Ir=m.pop(),!Ir)throw new Error('Unopened section "'+He+'" at '+ye);if(Ir[1]!==He)throw new Error('Unclosed section "'+Ir[1]+'" at '+ye)}else ge==="name"||ge==="{"||ge==="&"?D=!0:ge==="="&&Z(He)}if(p(),Ir=m.pop(),Ir)throw new Error('Unclosed section "'+Ir[1]+'" at '+_e.pos);return U(O(S))}function O(ee){for(var T=[],l,m,S=0,I=ee.length;S<I;++S)l=ee[S],l&&(l[0]==="text"&&m&&m[0]==="text"?(m[1]+=l[1],m[3]=l[3]):(T.push(l),m=l));return T}function U(ee){for(var T=[],l=T,m=[],S,I,M=0,D=ee.length;M<D;++M)switch(S=ee[M],S[0]){case"#":case"^":l.push(S),m.push(S),l=S[4]=[];break;case"/":I=m.pop(),I[5]=S[2],l=m.length>0?m[m.length-1][4]:T;break;default:l.push(S)}return T}function H(ee){this.string=ee,this.tail=ee,this.pos=0}H.prototype.eos=function(){return this.tail===""},H.prototype.scan=function(T){var l=this.tail.match(T);if(!l||l.index!==0)return"";var m=l[0];return this.tail=this.tail.substring(m.length),this.pos+=m.length,m},H.prototype.scanUntil=function(T){var l=this.tail.search(T),m;switch(l){case-1:m=this.tail,this.tail="";break;case 0:m="";break;default:m=this.tail.substring(0,l),this.tail=this.tail.substring(l)}return this.pos+=m.length,m};function V(ee,T){this.view=ee,this.cache={".":this.view},this.parent=T}V.prototype.push=function(T){return new V(T,this)},V.prototype.lookup=function(T){var l=this.cache,m;if(l.hasOwnProperty(T))m=l[T];else{for(var S=this,I,M,D,K=!1;S;){if(T.indexOf(".")>0)for(I=S.view,M=T.split("."),D=0;I!=null&&D<M.length;)D===M.length-1&&(K=o(I,M[D])||c(I,M[D])),I=I[M[D++]];else I=S.view[T],K=o(S.view,T);if(K){m=I;break}S=S.parent}l[T]=m}return i(m)&&(m=m.call(this.view)),m};function re(){this.templateCache={_cache:{},set:function(T,l){this._cache[T]=l},get:function(T){return this._cache[T]},clear:function(){this._cache={}}}}re.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},re.prototype.parse=function(T,l){var m=this.templateCache,S=T+":"+(l||ae.tags).join(":"),I=typeof m<"u",M=I?m.get(S):void 0;return M==null&&(M=N(T,l),I&&m.set(S,M)),M},re.prototype.render=function(T,l,m,S){var I=this.getConfigTags(S),M=this.parse(T,I),D=l instanceof V?l:new V(l,void 0);return this.renderTokens(M,D,m,T,S)},re.prototype.renderTokens=function(T,l,m,S,I){for(var M="",D,K,x,p=0,P=T.length;p<P;++p)x=void 0,D=T[p],K=D[0],K==="#"?x=this.renderSection(D,l,m,S,I):K==="^"?x=this.renderInverted(D,l,m,S,I):K===">"?x=this.renderPartial(D,l,m,I):K==="&"?x=this.unescapedValue(D,l):K==="name"?x=this.escapedValue(D,l,I):K==="text"&&(x=this.rawValue(D)),x!==void 0&&(M+=x);return M},re.prototype.renderSection=function(T,l,m,S,I){var M=this,D="",K=l.lookup(T[1]);function x($){return M.render($,l,m,I)}if(!!K){if(n(K))for(var p=0,P=K.length;p<P;++p)D+=this.renderTokens(T[4],l.push(K[p]),m,S,I);else if(typeof K=="object"||typeof K=="string"||typeof K=="number")D+=this.renderTokens(T[4],l.push(K),m,S,I);else if(i(K)){if(typeof S!="string")throw new Error("Cannot use higher-order sections without the original template");K=K.call(l.view,S.slice(T[3],T[5]),x),K!=null&&(D+=K)}else D+=this.renderTokens(T[4],l,m,S,I);return D}},re.prototype.renderInverted=function(T,l,m,S,I){var M=l.lookup(T[1]);if(!M||n(M)&&M.length===0)return this.renderTokens(T[4],l,m,S,I)},re.prototype.indentPartial=function(T,l,m){for(var S=l.replace(/[^ \t]/g,""),I=T.split(`
`),M=0;M<I.length;M++)I[M].length&&(M>0||!m)&&(I[M]=S+I[M]);return I.join(`
`)},re.prototype.renderPartial=function(T,l,m,S){if(!!m){var I=this.getConfigTags(S),M=i(m)?m(T[1]):m[T[1]];if(M!=null){var D=T[6],K=T[5],x=T[4],p=M;K==0&&x&&(p=this.indentPartial(M,x,D));var P=this.parse(p,I);return this.renderTokens(P,l,m,p,S)}}},re.prototype.unescapedValue=function(T,l){var m=l.lookup(T[1]);if(m!=null)return m},re.prototype.escapedValue=function(T,l,m){var S=this.getConfigEscape(m)||ae.escape,I=l.lookup(T[1]);if(I!=null)return typeof I=="number"&&S===ae.escape?String(I):S(I)},re.prototype.rawValue=function(T){return T[1]},re.prototype.getConfigTags=function(T){return n(T)?T:T&&typeof T=="object"?T.tags:void 0},re.prototype.getConfigEscape=function(T){if(T&&typeof T=="object"&&!n(T))return T.escape};var ae={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(ee){de.templateCache=ee},get templateCache(){return de.templateCache}},de=new re;return ae.clearCache=function(){return de.clearCache()},ae.parse=function(T,l){return de.parse(T,l)},ae.render=function(T,l,m,S){if(typeof T!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(T)+'" was given as the first argument for mustache#render(template, view, partials)');return de.render(T,l,m,S)},ae.escape=E,ae.Scanner=H,ae.Context=V,ae.Writer=re,ae})})(Zx);const g8={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}},y8={schema:g8},m8="Exceeded the maximum amount of gas allowed to burn per contract",b8="Method name is empty",x8="Wasmer compilation error: {{msg}}",v8="Smart contract panicked: {{panic_msg}}",w8="Error creating Wasm memory",_8="Exceeded the prepaid gas",E8="Method name is not valid UTF8 string",A8="String encoding is bad UTF-16 sequence",S8="WebAssembly trap: {{msg}}",T8="Gas instrumentation failed or contract has denied instructions.",k8="{{promise_idx}} does not correspond to existing promises",P8="Accessed invalid promise result index: {{result_idx}}",C8="Error happened while deserializing the module",I8="Contract method is not found",R8="Accessed invalid register id: {{register_id}}",N8="VM Logic returned an invalid receipt index: {{receipt_index}}",B8="Method name is empty in contract call",M8="Returning joint promise is currently prohibited",O8="Stack instrumentation failed",D8="Cannot find contract code for account {{account_id}}",U8="Invalid method signature",L8="Integer overflow happened during contract execution",F8="MemoryAccessViolation",j8="Iterator index {{iterator_index}} does not exist",K8="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",$8="VM Logic returned an invalid account id",q8="Error happened while serializing the module",H8="Actions can only be appended to non-joint promise.",z8="Internal memory declaration has been found in the module",G8="Error happened during instantiation",V8="{{method_name}} is not allowed in view calls",J8="VM Logic returned an invalid method name",W8="String encoding is bad UTF-8 sequence",Y8="Exceeded the account balance",X8="Wasm contract link error: {{msg}}",Q8="VM Logic provided an invalid public key",Z8="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",eS="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",tS="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",rS="Transaction gas or balance cost is too high",nS="Transaction is not signed with the given public key",iS=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,sS="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",aS="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",oS="Transaction has expired",cS="Account {{account_id}} is staking and can not be deleted",fS="Signer {{signer_id}} does not exist",uS="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",lS="The public key {{public_key}} is already used for an existing access key",dS="Invalid signer account ID {{signer_id}} according to requirements",hS="The new account_id {{account_id}} can't be created by {{predecessor_id}}",pS="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",gS="Account {{account_id}} is not yet staked, but tried to unstake",yS="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",mS="Can't create a new account {{account_id}}, because it already exists",bS="Transaction parent block hash doesn't belong to the current chain",xS="Can't complete the action because account {{account_id}} doesn't exist",vS="Transaction method name {{method_name}} isn't allowed by the access key",wS="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",_S="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",ES="Invalid receiver account ID {{receiver_id}} according to requirements",AS="Account {{account_id}} tries to remove an access key that doesn't exist",SS="Timeout exceeded",TS="Connection closed",kS={GasLimitExceeded:m8,MethodEmptyName:b8,WasmerCompileError:x8,GuestPanic:v8,Memory:w8,GasExceeded:_8,MethodUTF8Error:E8,BadUTF16:A8,WasmTrap:S8,GasInstrumentation:T8,InvalidPromiseIndex:k8,InvalidPromiseResultIndex:P8,Deserialization:C8,MethodNotFound:I8,InvalidRegisterId:R8,InvalidReceiptIndex:N8,EmptyMethodName:B8,CannotReturnJointPromise:M8,StackHeightInstrumentation:O8,CodeDoesNotExist:D8,MethodInvalidSignature:U8,IntegerOverflow:L8,MemoryAccessViolation:F8,InvalidIteratorIndex:j8,IteratorWasInvalidated:K8,InvalidAccountId:$8,Serialization:q8,CannotAppendActionToJointPromise:H8,InternalMemoryDeclared:z8,Instantiate:G8,ProhibitedInView:V8,InvalidMethodName:J8,BadUTF8:W8,BalanceExceeded:Y8,LinkError:X8,InvalidPublicKey:Q8,ActorNoPermission:Z8,LackBalanceForState:eS,ReceiverMismatch:tS,CostOverflow:rS,InvalidSignature:nS,AccessKeyNotFound:iS,NotEnoughBalance:sS,NotEnoughAllowance:aS,Expired:oS,DeleteAccountStaking:cS,SignerDoesNotExist:fS,TriesToStake:uS,AddKeyAlreadyExists:lS,InvalidSigner:dS,CreateAccountNotAllowed:hS,RequiresFullAccess:pS,TriesToUnstake:gS,InvalidNonce:yS,AccountAlreadyExists:mS,InvalidChain:bS,AccountDoesNotExist:xS,MethodNameMismatch:vS,DeleteAccountHasRent:wS,DeleteAccountHasEnoughBalance:_S,InvalidReceiver:ES,DeleteKeyDoesNotExist:AS,Timeout:SS,Closed:TS};var Eg;function jh(){if(Eg)return nn;Eg=1;var t=q&&q.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(nn,"__esModule",{value:!0}),nn.getErrorTypeFromErrorMessage=nn.formatError=nn.parseResultError=nn.parseRpcError=nn.ServerError=void 0;const e=t(Zx.exports),r=t(y8),n=t(kS),i=o1(),s=Ar,a={formatNear:()=>(y,_)=>i.utils.format.formatNearAmount(_(y))};class o extends s.TypedError{}nn.ServerError=o;class c extends o{}function f(y){const _={},A=g(y,r.default.schema,_,""),B=new o(d(A,_),A);return Object.assign(B,_),B}nn.parseRpcError=f;function u(y){const _=f(y.status.Failure),A=new c;return Object.assign(A,_),A.type=_.type,A.message=_.message,A.transaction_outcome=y.transaction_outcome,A}nn.parseResultError=u;function d(y,_){return typeof n.default[y]=="string"?e.default.render(n.default[y],{..._,...a}):JSON.stringify(_)}nn.formatError=d;function g(y,_,A,B){let N,O,U;for(const H in _){if(w(y[H]))return y[H];if(E(y[H]))N=y[H],O=_[H],U=H;else if(E(y.kind)&&E(y.kind[H]))N=y.kind[H],O=_[H],U=H;else continue}if(N&&O){for(const H of Object.keys(O.props))A[H]=N[H];return g(N,_,A,U)}else return A.kind=y,B}function b(y){switch(!0){case/^account .*? does not exist while viewing$/.test(y):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(y):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(y):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(y):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(y):return"InvalidNonce";default:return"UntypedError"}}nn.getErrorTypeFromErrorMessage=b;function E(y){return Object.prototype.toString.call(y)==="[object Object]"}function w(y){return Object.prototype.toString.call(y)==="[object String]"}return nn}var Ag;function PS(){return Ag||(Ag=1,function(t){var e=q&&q.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const r=e(Ta),n=Fh,i=Uf(),s=Ar;Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return s.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return s.ErrorContext}});const a=Wt,o=e(Vo),c=jh(),f=12,u=500,d=1.5;let g=123;class b extends n.Provider{constructor(w){super(),w!=null&&typeof w=="object"?this.connection=w:(r.default("JsonRpcProvider(url?: string)")("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:w})}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(w){const y=w.encode();return this.sendJsonRpc("broadcast_tx_commit",[X.Buffer.from(y).toString("base64")])}async sendTransactionAsync(w){const y=w.encode();return this.sendJsonRpc("broadcast_tx_async",[X.Buffer.from(y).toString("base64")])}async txStatus(w,y){return typeof w=="string"?this.txStatusString(w,y):this.txStatusUint8Array(w,y)}async txStatusUint8Array(w,y){return this.sendJsonRpc("tx",[a.baseEncode(w),y])}async txStatusString(w,y){return this.sendJsonRpc("tx",[w,y])}async txStatusReceipts(w,y){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[a.baseEncode(w),y])}async query(...w){let y;if(w.length===1)y=await this.sendJsonRpc("query",w[0]);else{const[_,A]=w;y=await this.sendJsonRpc("query",[_,A])}if(y&&y.error)throw new s.TypedError(`Querying ${w} failed: ${y.error}.
${JSON.stringify(y,null,2)}`,c.getErrorTypeFromErrorMessage(y.error));return y}async block(w){const{finality:y}=w;let{blockId:_}=w;return typeof w!="object"&&(r.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),_=w),this.sendJsonRpc("block",{block_id:_,finality:y})}async blockChanges(w){const{finality:y}=w,{blockId:_}=w;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:_,finality:y})}async chunk(w){return this.sendJsonRpc("chunk",[w])}async validators(w){return this.sendJsonRpc("validators",[w])}async experimental_genesisConfig(){return r.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(w){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",w)}async experimental_lightClientProof(w){return r.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(w)}async lightClientProof(w){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",w)}async accessKeyChanges(w,y){const{finality:_}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:w,block_id:A,finality:_})}async singleAccessKeyChanges(w,y){const{finality:_}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:w,block_id:A,finality:_})}async accountChanges(w,y){const{finality:_}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:w,block_id:A,finality:_})}async contractStateChanges(w,y,_=""){const{finality:A}=y,{blockId:B}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:w,key_prefix_base64:_,block_id:B,finality:A})}async contractCodeChanges(w,y){const{finality:_}=y,{blockId:A}=y;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:w,block_id:A,finality:_})}async gasPrice(w){return await this.sendJsonRpc("gas_price",[w])}async sendJsonRpc(w,y){const _=await o.default(u,f,d,async()=>{try{const B={method:w,params:y,id:g++,jsonrpc:"2.0"},N=await i.fetchJson(this.connection,JSON.stringify(B));if(N.error){if(typeof N.error.data=="object")throw typeof N.error.data.error_message=="string"&&typeof N.error.data.error_type=="string"?new s.TypedError(N.error.data.error_message,N.error.data.error_type):c.parseRpcError(N.error.data);{const O=`[${N.error.code}] ${N.error.message}: ${N.error.data}`;throw N.error.data==="Timeout"||O.includes("Timeout error")||O.includes("query has timed out")?new s.TypedError(O,"TimeoutError"):new s.TypedError(O,c.getErrorTypeFromErrorMessage(N.error.data))}}return N}catch(B){if(B.type==="TimeoutError")return{}.NEAR_NO_LOGS||console.warn(`Retrying request to ${w} as it has timed out`,y),null;throw B}}),{result:A}=_;if(typeof A>"u")throw new s.TypedError(`Exceeded ${f} attempts for request to ${w}.`,"RetriesExceeded");return A}}t.JsonRpcProvider=b}(Zu)),Zu}var Sg;function Jo(){return Sg||(Sg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const e=Fh;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const r=PS();Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}})}(Qu)),Qu}var el={},Kh={};(function(t){var e=q&&q.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const r=e(Bi.exports);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new r.default("10",10).pow(new r.default(t.NEAR_NOMINATION_EXP,10));const n=[],i=new r.default(10);for(let d=0,g=new r.default(5);d<t.NEAR_NOMINATION_EXP;d++,g=g.mul(i))n[d]=g;function s(d,g=t.NEAR_NOMINATION_EXP){const b=new r.default(d,10);if(g!==t.NEAR_NOMINATION_EXP){const y=t.NEAR_NOMINATION_EXP-g-1;y>0&&b.iadd(n[y])}d=b.toString();const E=d.substring(0,d.length-t.NEAR_NOMINATION_EXP)||"0",w=d.substring(d.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,g);return c(`${u(E)}.${w}`)}t.formatNearAmount=s;function a(d){if(!d)return null;d=o(d);const g=d.split("."),b=g[0],E=g[1]||"";if(g.length>2||E.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${d}' as NEAR amount`);return f(b+E.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=a;function o(d){return d.replace(/,/g,"").trim()}function c(d){return d.replace(/\.?0*$/,"")}function f(d){return d=d.replace(/^0+/,""),d===""?"0":d}function u(d){const g=/(-?\d+)(\d{3})/;for(;g.test(d);)d=d.replace(g,"$1,$2");return d}})(Kh);var Tg;function e1(){return Tg||(Tg=1,function(t){var e=q&&q.__createBinding||(Object.create?function(g,b,E,w){w===void 0&&(w=E),Object.defineProperty(g,w,{enumerable:!0,get:function(){return b[E]}})}:function(g,b,E,w){w===void 0&&(w=E),g[w]=b[E]}),r=q&&q.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),n=q&&q.__importStar||function(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var E in g)E!=="default"&&Object.hasOwnProperty.call(g,E)&&e(b,g,E);return r(b,g),b};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const i=n(si);t.key_pair=i;const s=n(Uh);t.serialize=s;const a=n(Uf());t.web=a;const o=n(Xi);t.enums=o;const c=n(Kh);t.format=c;const f=n(jh());t.rpc_errors=f;const u=si;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return u.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return u.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return u.KeyPairEd25519}});const d=Ar;Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return d.logWarning}})}(el)),el}var Wo={};(function(t){var e=q&&q.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const r=e(Jl.exports),n=Xi,i=Wt,s=si;class a extends n.Assignable{}t.FunctionCallPermission=a;class o extends n.Assignable{}t.FullAccessPermission=o;class c extends n.Enum{}t.AccessKeyPermission=c;class f extends n.Assignable{}t.AccessKey=f;function u(){return new f({nonce:0,permission:new c({fullAccess:new o({})})})}t.fullAccessKey=u;function d(x,p,P){return new f({nonce:0,permission:new c({functionCall:new a({receiverId:x,allowance:P,methodNames:p})})})}t.functionCallAccessKey=d;class g extends n.Assignable{}t.IAction=g;class b extends g{}t.CreateAccount=b;class E extends g{}t.DeployContract=E;class w extends g{}t.FunctionCall=w;class y extends g{}t.Transfer=y;class _ extends g{}t.Stake=_;class A extends g{}t.AddKey=A;class B extends g{}t.DeleteKey=B;class N extends g{}t.DeleteAccount=N;function O(){return new I({createAccount:new b({})})}t.createAccount=O;function U(x){return new I({deployContract:new E({code:x})})}t.deployContract=U;function H(x){return x.byteLength!==void 0&&x.byteLength===x.length?x:X.Buffer.from(JSON.stringify(x))}t.stringifyJsonOrBytes=H;function V(x,p,P,$,F=H){return new I({functionCall:new w({methodName:x,args:F(p),gas:P,deposit:$})})}t.functionCall=V;function re(x){return new I({transfer:new y({deposit:x})})}t.transfer=re;function ae(x,p){return new I({stake:new _({stake:x,publicKey:p})})}t.stake=ae;function de(x,p){return new I({addKey:new A({publicKey:x,accessKey:p})})}t.addKey=de;function ee(x){return new I({deleteKey:new B({publicKey:x})})}t.deleteKey=ee;function T(x){return new I({deleteAccount:new N({beneficiaryId:x})})}t.deleteAccount=T;class l extends n.Assignable{}t.Signature=l;class m extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(p){return i.deserialize(t.SCHEMA,m,p)}}t.Transaction=m;class S extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(p){return i.deserialize(t.SCHEMA,S,p)}}t.SignedTransaction=S;class I extends n.Enum{}t.Action=I,t.SCHEMA=new Map([[l,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",m],["signature",l]]}],[m,{kind:"struct",fields:[["signerId","string"],["publicKey",s.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[I]]]}],[s.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[f,{kind:"struct",fields:[["nonce","u64"],["permission",c]]}],[c,{kind:"enum",field:"enum",values:[["functionCall",a],["fullAccess",o]]}],[a,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[o,{kind:"struct",fields:[]}],[I,{kind:"enum",field:"enum",values:[["createAccount",b],["deployContract",E],["functionCall",w],["transfer",y],["stake",_],["addKey",A],["deleteKey",B],["deleteAccount",N]]}],[b,{kind:"struct",fields:[]}],[E,{kind:"struct",fields:[["code",["u8"]]]}],[w,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[_,{kind:"struct",fields:[["stake","u128"],["publicKey",s.PublicKey]]}],[A,{kind:"struct",fields:[["publicKey",s.PublicKey],["accessKey",f]]}],[B,{kind:"struct",fields:[["publicKey",s.PublicKey]]}],[N,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function M(x,p,P,$,F,Z){return new m({signerId:x,publicKey:p,nonce:$,receiverId:P,actions:F,blockHash:Z})}t.createTransaction=M;async function D(x,p,P,$){const F=i.serialize(t.SCHEMA,x),Z=new Uint8Array(r.default.sha256.array(F)),_e=await p.signMessage(F,P,$),ye=new S({transaction:x,signature:new l({keyType:x.publicKey.keyType,data:_e.signature})});return[Z,ye]}async function K(...x){if(x[0].constructor===m){const[p,P,$,F]=x;return D(p,P,$,F)}else{const[p,P,$,F,Z,_e,ye]=x,ge=await Z.getPublicKey(_e,ye),He=M(_e,ge,p,P,$,F);return D(He,Z,_e,ye)}}t.signTransaction=K})(Wo);var pa={},t1=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pa,"__esModule",{value:!0});pa.diffEpochValidators=pa.findSeatPrice=void 0;const In=t1(Bi.exports),CS=t1(Ta);function IS(t,e,r,n){return n&&n<49?RS(t,e):(r||(CS.default("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),NS(t,e,r))}pa.findSeatPrice=IS;function RS(t,e){const r=t.map(o=>new In.default(o.stake,10)).sort((o,c)=>o.cmp(c)),n=new In.default(e),i=r.reduce((o,c)=>o.add(c));if(i.lt(n))throw new Error("Stakes are below seats");let s=new In.default(1),a=i.add(new In.default(1));for(;!s.eq(a.sub(new In.default(1)));){const o=s.add(a).div(new In.default(2));let c=!1,f=new In.default(0);for(let u=0;u<r.length;++u)if(f=f.add(r[u].div(o)),f.gte(n)){s=o,c=!0;break}c||(a=o)}return s}function NS(t,e,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=t.map(s=>new In.default(s.stake,10)).sort((s,a)=>s.cmp(a)),i=n.reduce((s,a)=>s.add(a));return t.length<e?i.mul(new In.default(r[0])).div(new In.default(r[1])):n[0].add(new In.default(1))}function BS(t,e){const r=new Map;t.forEach(i=>r.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!r.has(i.account_id)),removedValidators:t.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>r.has(i.account_id)&&r.get(i.account_id).stake!=i.stake).map(i=>({current:r.get(i.account_id),next:i}))}}pa.diffEpochValidators=BS;var Ka={},Lf={},MS=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.DEFAULT_FUNCTION_CALL_GAS=void 0;const OS=MS(Bi.exports);Lf.DEFAULT_FUNCTION_CALL_GAS=new OS.default("30000000000000");var kg;function Ff(){if(kg)return Ka;kg=1;var t=q&&q.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.Account=void 0;const e=t(Bi.exports),r=t(Ta),n=Wo,i=Jo(),s=Wt,a=si,o=Ar,c=jh(),f=Lf,u=t(Vo),d=12,g=500,b=1.5;function E(_){return JSON.parse(X.Buffer.from(_).toString())}function w(_){return X.Buffer.from(JSON.stringify(_))}class y{constructor(A,B){this.accessKeyByPublicKeyCache={},this.connection=A,this.accountId=B}get ready(){return r.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){r.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(A,B){if(!{}.NEAR_NO_LOGS)for(const N of B)console.log(`Receipt${N.receiptIds.length>1?"s":""}: ${N.receiptIds.join(", ")}`),this.printLogs(A,N.logs,"	"),N.failure&&console.warn(`	Failure [${A}]: ${N.failure}`)}printLogs(A,B,N=""){if(!{}.NEAR_NO_LOGS)for(const O of B)console.log(`${N}Log [${A}]: ${O}`)}async signTransaction(A,B){const N=await this.findAccessKey(A,B);if(!N)throw new i.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:O}=N,H=(await this.connection.provider.block({finality:"final"})).header.hash,V=++O.nonce;return await n.signTransaction(A,V,B,s.baseDecode(H),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...A){return typeof A[0]=="string"?this.signAndSendTransactionV1(A[0],A[1]):this.signAndSendTransactionV2(A[0])}signAndSendTransactionV1(A,B){return r.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:A,actions:B})}async signAndSendTransactionV2({receiverId:A,actions:B,returnError:N}){let O,U;const H=await u.default(g,d,b,async()=>{[O,U]=await this.signTransaction(A,B);const re=U.transaction.publicKey;try{return await this.connection.provider.sendTransaction(U)}catch(ae){if(ae.type==="InvalidNonce")return o.logWarning(`Retrying transaction ${A}:${s.baseEncode(O)} with new nonce.`),delete this.accessKeyByPublicKeyCache[re.toString()],null;if(ae.type==="Expired")return o.logWarning(`Retrying transaction ${A}:${s.baseEncode(O)} due to expired block hash`),null;throw ae.context=new i.ErrorContext(s.baseEncode(O)),ae}});if(!H)throw new i.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const V=[H.transaction_outcome,...H.receipts_outcome].reduce((re,ae)=>ae.outcome.logs.length||typeof ae.outcome.status=="object"&&typeof ae.outcome.status.Failure=="object"?re.concat({receiptIds:ae.outcome.receipt_ids,logs:ae.outcome.logs,failure:typeof ae.outcome.status.Failure<"u"?c.parseRpcError(ae.outcome.status.Failure):null}):re,[]);if(this.printLogsAndFailures(U.transaction.receiverId,V),!N&&typeof H.status=="object"&&typeof H.status.Failure=="object")throw H.status.Failure.error_message&&H.status.Failure.error_type?new i.TypedError(`Transaction ${H.transaction_outcome.id} failed. ${H.status.Failure.error_message}`,H.status.Failure.error_type):c.parseResultError(H);return H}async findAccessKey(A,B){const N=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!N)return null;const O=this.accessKeyByPublicKeyCache[N.toString()];if(O!==void 0)return{publicKey:N,accessKey:O};try{const U=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:N.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[N.toString()]?{publicKey:N,accessKey:this.accessKeyByPublicKeyCache[N.toString()]}:(this.accessKeyByPublicKeyCache[N.toString()]=U,{publicKey:N,accessKey:U})}catch(U){if(U.type=="AccessKeyDoesNotExist")return null;throw U}}async createAndDeployContract(A,B,N,O){const U=n.fullAccessKey();return await this.signAndSendTransaction({receiverId:A,actions:[n.createAccount(),n.transfer(O),n.addKey(a.PublicKey.from(B),U),n.deployContract(N)]}),new y(this.connection,A)}async sendMoney(A,B){return this.signAndSendTransaction({receiverId:A,actions:[n.transfer(B)]})}async createAccount(A,B,N){const O=n.fullAccessKey();return this.signAndSendTransaction({receiverId:A,actions:[n.createAccount(),n.transfer(N),n.addKey(a.PublicKey.from(B),O)]})}async deleteAccount(A){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.deleteAccount(A)]})}async deployContract(A){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.deployContract(A)]})}async functionCall(...A){return typeof A[0]=="string"?this.functionCallV1(A[0],A[1],A[2],A[3],A[4]):this.functionCallV2(A[0])}functionCallV1(A,B,N,O,U){return r.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),N=N||{},this.validateArgs(N),this.signAndSendTransaction({receiverId:A,actions:[n.functionCall(B,N,O||f.DEFAULT_FUNCTION_CALL_GAS,U)]})}functionCallV2({contractId:A,methodName:B,args:N={},gas:O=f.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:U,walletMeta:H,walletCallbackUrl:V,stringify:re}){this.validateArgs(N);const ae=re===void 0?n.stringifyJsonOrBytes:re;return this.signAndSendTransaction({receiverId:A,actions:[n.functionCall(B,N,O,U,ae)],walletMeta:H,walletCallbackUrl:V})}async addKey(A,B,N,O){N||(N=[]),Array.isArray(N)||(N=[N]);let U;return B?U=n.functionCallAccessKey(B,N,O):U=n.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[n.addKey(a.PublicKey.from(A),U)]})}async deleteKey(A){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.deleteKey(a.PublicKey.from(A))]})}async stake(A,B){return this.signAndSendTransaction({receiverId:this.accountId,actions:[n.stake(B,a.PublicKey.from(A))]})}validateArgs(A){if(!(A.byteLength!==void 0&&A.byteLength===A.length)&&(Array.isArray(A)||typeof A!="object"))throw new o.PositionalArgsError}async viewFunction(A,B,N={},{parse:O=E,stringify:U=w}={}){this.validateArgs(N);const H=U(N).toString("base64"),V=await this.connection.provider.query({request_type:"call_function",account_id:A,method_name:B,args_base64:H,finality:"optimistic"});return V.logs&&this.printLogs(A,V.logs),V.result&&V.result.length>0&&O(X.Buffer.from(V.result))}async viewState(A,B={finality:"optimistic"}){const{values:N}=await this.connection.provider.query({request_type:"view_state",...B,account_id:this.accountId,prefix_base64:X.Buffer.from(A).toString("base64")});return N.map(({key:O,value:U})=>({key:X.Buffer.from(O,"base64"),value:X.Buffer.from(U,"base64")}))}async getAccessKeys(){const A=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(A)?A:A.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(N=>N.access_key.permission!=="FullAccess").map(N=>{const O=N.access_key.permission;return{contractId:O.FunctionCall.receiver_id,amount:O.FunctionCall.allowance,publicKey:N.public_key}})}}async getAccountBalance(){const A=await this.connection.provider.experimental_protocolConfig({finality:"final"}),B=await this.state(),N=new e.default(A.runtime_config.storage_amount_per_byte),O=new e.default(B.storage_usage).mul(N),U=new e.default(B.locked),H=new e.default(B.amount).add(U),V=H.sub(e.default.max(U,O));return{total:H.toString(),stateStaked:O.toString(),staked:U.toString(),available:V.toString()}}}return Ka.Account=y,Ka}var tl={},Pg;function DS(){return Pg||(Pg=1,function(t){var e=q&&q.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const r=e(Bi.exports),n=e(Ta),i=Ff(),s=Kh,a=si,o=Wo,c=Uf();t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new r.default(s.parseNearAmount("1")),t.MULTISIG_GAS=new r.default("100000000000000"),t.MULTISIG_DEPOSIT=new r.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"];const f={[t.MULTISIG_STORAGE_KEY]:null};class u extends i.Account{constructor(y,_,A){super(y,_),this.storage=A.storage,this.onAddRequestResult=A.onAddRequestResult}async signAndSendTransactionWithAccount(y,_){return super.signAndSendTransaction({receiverId:y,actions:_})}signAndSendTransaction(...y){return typeof y[0]=="string"?this._signAndSendTransaction({receiverId:y[0],actions:y[1]}):this._signAndSendTransaction(y[0])}async _signAndSendTransaction({receiverId:y,actions:_}){const{accountId:A}=this,B=X.Buffer.from(JSON.stringify({request:{receiver_id:y,actions:E(_,A,y)}}));let N;try{N=await super.signAndSendTransaction({receiverId:A,actions:[o.functionCall("add_request_and_confirm",B,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(U){if(U.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(y,_);throw U}if(!N.status)throw new Error("Request failed");const O={...N.status};if(!O.SuccessValue||typeof O.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:A,actions:_,requestId:parseInt(X.Buffer.from(O.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(N),this.deleteUnconfirmedRequests(),N}async deleteUnconfirmedRequests(){const y=await this.getRequestIds(),{requestId:_}=this.getRequest();for(const A of y)if(A!=_)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[o.functionCall("delete_request",{request_id:A},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):f[t.MULTISIG_STORAGE_KEY]}setRequest(y){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(y));f[t.MULTISIG_STORAGE_KEY]=y}}t.AccountMultisig=u;class d extends u{constructor(y,_,A){super(y,_,A),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=A.helperUrl||this.helperUrl,this.storage=A.storage,this.sendCode=A.sendCode||this.sendCodeDefault,this.getCode=A.getCode||this.getCodeDefault,this.verifyCode=A.verifyCode||this.verifyCodeDefault,this.onConfirmResult=A.onConfirmResult}async signAndSendTransaction(...y){return typeof y[0]=="string"?(n.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:y[0],actions:y[1]})):this.__signAndSendTransaction(y[0])}async __signAndSendTransaction({receiverId:y,actions:_}){await super.signAndSendTransaction({receiverId:y,actions:_}),await this.sendCode();const A=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(A),A}async deployMultisig(y){const{accountId:_}=this,A=(await this.getRecoveryMethods()).data.filter(({kind:H,publicKey:V})=>(H==="phrase"||H==="ledger")&&V!==null).map(H=>H.publicKey),B=(await this.getAccessKeys()).filter(({public_key:H,access_key:{permission:V}})=>V==="FullAccess"&&!A.includes(H)).map(H=>H.public_key).map(g),N=g((await this.postSignedJson("/2fa/getAccessKey",{accountId:_})).publicKey),O=X.Buffer.from(JSON.stringify({num_confirmations:2})),U=[...B.map(H=>o.deleteKey(H)),...B.map(H=>o.addKey(H,o.functionCallAccessKey(_,t.MULTISIG_CHANGE_METHODS,null))),o.addKey(N,o.functionCallAccessKey(_,t.MULTISIG_CONFIRM_METHODS,null)),o.deployContract(y)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&U.push(o.functionCall("new",O,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",_),await super.signAndSendTransactionWithAccount(_,U)}async disable(y){const{accountId:_}=this,B=(await this.getAccessKeys()).filter(({access_key:U})=>U.permission!=="FullAccess").filter(({access_key:U})=>{const H=U.permission.FunctionCall;return H.receiver_id===_&&H.method_names.length===4&&H.method_names.includes("add_request_and_confirm")}),N=a.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:_})).publicKey),O=[o.deleteKey(N),...B.map(({public_key:U})=>o.deleteKey(a.PublicKey.from(U))),...B.map(({public_key:U})=>o.addKey(a.PublicKey.from(U),null)),o.deployContract(y)];return console.log("disabling 2fa for",_),await this.signAndSendTransaction({receiverId:_,actions:O})}async sendCodeDefault(){const{accountId:y}=this,{requestId:_}=this.getRequest(),A=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:y,method:A,requestId:_}),_}async getCodeDefault(y){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const y=await this.get2faMethod(),_=await this.getCode(y);try{return await this.verifyCode(_)}catch(A){if(console.warn("Error validating security code:",A),A.toString().includes("invalid 2fa code provided")||A.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw A}}async verifyCodeDefault(y){const{accountId:_}=this,A=this.getRequest();if(!A)throw new Error("no request pending");const{requestId:B}=A;return await this.postSignedJson("/2fa/verify",{accountId:_,securityCode:y,requestId:B})}async getRecoveryMethods(){const{accountId:y}=this;return{accountId:y,data:await this.postSignedJson("/account/recoveryMethods",{accountId:y})}}async get2faMethod(){let{data:y}=await this.getRecoveryMethods();if(y&&y.length&&(y=y.find(B=>B.kind.indexOf("2fa-")===0)),!y)return null;const{kind:_,detail:A}=y;return{kind:_,detail:A}}async signatureFor(){const{accountId:y}=this,A=(await this.connection.provider.block({finality:"final"})).header.height.toString(),B=await this.connection.signer.signMessage(X.Buffer.from(A),y,this.connection.networkId),N=X.Buffer.from(B.signature).toString("base64");return{blockNumber:A,blockNumberSignature:N}}async postSignedJson(y,_){return await c.fetchJson(this.helperUrl+y,JSON.stringify({..._,...await this.signatureFor()}))}}t.Account2FA=d;const g=w=>a.PublicKey.from(w),b=w=>w.toString().replace("ed25519:",""),E=(w,y,_)=>w.map(A=>{const B=A.enum,{gas:N,publicKey:O,methodName:U,args:H,deposit:V,accessKey:re,code:ae}=A[B],de={type:B[0].toUpperCase()+B.substr(1),gas:N&&N.toString()||void 0,public_key:O&&b(O)||void 0,method_name:U,args:H&&X.Buffer.from(H).toString("base64")||void 0,code:ae&&X.Buffer.from(ae).toString("base64")||void 0,amount:V&&V.toString()||void 0,deposit:V&&V.toString()||"0",permission:void 0};if(re&&(_===y&&re.permission.enum!=="fullAccess"&&(de.permission={receiver_id:y,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),re.permission.enum==="functionCall")){const{receiverId:ee,methodNames:T,allowance:l}=re.permission.functionCall;de.permission={receiver_id:ee,allowance:l&&l.toString()||void 0,method_names:T}}return de})}(tl)),tl}var yi={},Cg;function r1(){if(Cg)return yi;Cg=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.UrlAccountCreator=yi.LocalAccountCreator=yi.AccountCreator=void 0;const t=Uf();class e{}yi.AccountCreator=e;class r extends e{constructor(s,a){super(),this.masterAccount=s,this.initialBalance=a}async createAccount(s,a){await this.masterAccount.createAccount(s,a,this.initialBalance)}}yi.LocalAccountCreator=r;class n extends e{constructor(s,a){super(),this.connection=s,this.helperUrl=a}async createAccount(s,a){await t.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:s,newAccountPublicKey:a.toString()}))}}return yi.UrlAccountCreator=n,yi}var $a={},Es={},US=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Es,"__esModule",{value:!0});Es.InMemorySigner=Es.Signer=void 0;const LS=US(Jl.exports),FS=si,jS=Go;class n1{}Es.Signer=n1;class $h extends n1{constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,r,n){const i=new jS.InMemoryKeyStore;return await i.setKey(e,r,n),new $h(i)}async createKey(e,r){const n=FS.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(r,e,n),n.getPublicKey()}async getPublicKey(e,r){const n=await this.keyStore.getKey(r,e);return n===null?null:n.getPublicKey()}async signMessage(e,r,n){const i=new Uint8Array(LS.default.sha256.array(e));if(!r)throw new Error("InMemorySigner requires provided account id");const s=await this.keyStore.getKey(n,r);if(s===null)throw new Error(`Key for ${r} not found in ${n}`);return s.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}Es.InMemorySigner=$h;var Ig;function i1(){if(Ig)return $a;Ig=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.Connection=void 0;const t=Jo(),e=Es;function r(s){switch(s.type){case void 0:return s;case"JsonRpcProvider":return new t.JsonRpcProvider({...s.args});default:throw new Error(`Unknown provider type ${s.type}`)}}function n(s){switch(s.type){case void 0:return s;case"InMemorySigner":return new e.InMemorySigner(s.keyStore);default:throw new Error(`Unknown signer type ${s.type}`)}}class i{constructor(a,o,c){this.networkId=a,this.provider=o,this.signer=c}static fromConfig(a){const o=r(a.provider),c=n(a.signer);return new i(a.networkId,o,c)}}return $a.Connection=i,$a}var qa={},Rg;function s1(){if(Rg)return qa;Rg=1;var t=q&&q.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(qa,"__esModule",{value:!0}),qa.Contract=void 0;const e=t(Bi.exports),r=t(Ta),n=Jo(),i=Ar;function s(u,d){return{[u](...g){return d(...g)}}[u]}const a=u=>u&&u.byteLength!==void 0&&u.byteLength===u.length,o=u=>Object.prototype.toString.call(u)==="[object Object]";class c{constructor(d,g,b){this.account=d,this.contractId=g;const{viewMethods:E=[],changeMethods:w=[]}=b;E.forEach(y=>{Object.defineProperty(this,y,{writable:!1,enumerable:!0,value:s(y,async(_={},A={},...B)=>{if(B.length||!(o(_)||a(_))||!o(A))throw new i.PositionalArgsError;return this.account.viewFunction(this.contractId,y,_,A)})})}),w.forEach(y=>{Object.defineProperty(this,y,{writable:!1,enumerable:!0,value:s(y,async(..._)=>{if(_.length&&(_.length>3||!(o(_[0])||a(_[0]))))throw new i.PositionalArgsError;return _.length>1||!(_[0]&&_[0].args)?(r.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:y,args:_[0],gas:_[1],amount:_[2]})):this._changeMethod({methodName:y,..._[0]})})})})}async _changeMethod({args:d,methodName:g,gas:b,amount:E,meta:w,callbackUrl:y}){f({gas:b,amount:E});const _=await this.account.functionCall({contractId:this.contractId,methodName:g,args:d,gas:b,attachedDeposit:E,walletMeta:w,walletCallbackUrl:y});return n.getTransactionLastResult(_)}}qa.Contract=c;function f(u){const d="number, decimal string or BN";for(const g of Object.keys(u)){const b=u[g];if(b&&!e.default.isBN(b)&&isNaN(b))throw new i.ArgumentTypeError(g,d,b)}}return qa}var Ha={},Ng;function a1(){if(Ng)return Ha;Ng=1;var t=q&&q.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.Near=void 0;const e=t(Bi.exports),r=Ff(),n=i1(),i=s1(),s=r1();class a{constructor(c){if(this.config=c,this.connection=n.Connection.fromConfig({networkId:c.networkId,provider:{type:"JsonRpcProvider",args:{url:c.nodeUrl,headers:c.headers}},signer:c.signer||{type:"InMemorySigner",keyStore:c.keyStore||c.deps.keyStore}}),c.masterAccount){const f=c.initialBalance?new e.default(c.initialBalance):new e.default("500000000000000000000000000");this.accountCreator=new s.LocalAccountCreator(new r.Account(this.connection,c.masterAccount),f)}else c.helperUrl?this.accountCreator=new s.UrlAccountCreator(this.connection,c.helperUrl):this.accountCreator=null}async account(c){return new r.Account(this.connection,c)}async createAccount(c,f){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(c,f),new r.Account(this.connection,c)}async loadContract(c,f){const u=new r.Account(this.connection,f.sender);return new i.Contract(u,c,f)}async sendTokens(c,f,u){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new r.Account(this.connection,f).sendMoney(u,c)).transaction_outcome.id}}return Ha.Near=a,Ha}var mi={},Bg;function KS(){if(Bg)return mi;Bg=1;var t=q&&q.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(mi,"__esModule",{value:!0}),mi.ConnectedWalletAccount=mi.WalletAccount=mi.WalletConnection=void 0;const e=t(Ta),r=Ff(),n=Wo,i=e1(),s=Wt,a=Wt,o="/login/",c="add_request_and_confirm",f="_wallet_auth_key",u="pending_key";class d{constructor(E,w){this._near=E;const y=w+f,_=JSON.parse(window.localStorage.getItem(y));this._networkId=E.config.networkId,this._walletBaseUrl=E.config.walletUrl,w=w||E.config.contractName||"default",this._keyStore=E.connection.signer.keyStore,this._authData=_||{allKeys:[]},this._authDataKey=y,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(E={},w,y,_){let A;typeof E=="string"?(e.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),A={contractId:E,successUrl:y,failureUrl:_}):A=E;const B=new URL(window.location.href),N=new URL(this._walletBaseUrl+o);if(N.searchParams.set("success_url",A.successUrl||B.href),N.searchParams.set("failure_url",A.failureUrl||B.href),A.contractId){await(await this._near.account(A.contractId)).state(),N.searchParams.set("contract_id",A.contractId);const U=i.KeyPair.fromRandom("ed25519");N.searchParams.set("public_key",U.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,u+U.getPublicKey(),U)}A.methodNames&&A.methodNames.forEach(O=>{N.searchParams.append("methodNames",O)}),window.location.assign(N.toString())}async requestSignTransactions(...E){return Array.isArray(E[0])?(e.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:E[0],callbackUrl:E[1],meta:E[2]})):this._requestSignTransactions(E[0])}async _requestSignTransactions({transactions:E,meta:w,callbackUrl:y}){const _=new URL(window.location.href),A=new URL("sign",this._walletBaseUrl);A.searchParams.set("transactions",E.map(B=>a.serialize(n.SCHEMA,B)).map(B=>X.Buffer.from(B).toString("base64")).join(",")),A.searchParams.set("callbackUrl",y||_.href),w&&A.searchParams.set("meta",w),window.location.assign(A.toString())}async _completeSignInWithAccessKey(){const E=new URL(window.location.href),w=E.searchParams.get("public_key")||"",y=(E.searchParams.get("all_keys")||"").split(","),_=E.searchParams.get("account_id")||"";_&&(this._authData={accountId:_,allKeys:y},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),w&&await this._moveKeyFromTempToPermanent(_,w)),E.searchParams.delete("public_key"),E.searchParams.delete("all_keys"),E.searchParams.delete("account_id"),E.searchParams.delete("meta"),E.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,E.toString())}async _moveKeyFromTempToPermanent(E,w){const y=await this._keyStore.getKey(this._networkId,u+w);await this._keyStore.setKey(this._networkId,E,y),await this._keyStore.removeKey(this._networkId,u+w)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new g(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}mi.WalletConnection=d,mi.WalletAccount=d;class g extends r.Account{constructor(E,w,y){super(w,y),this.walletConnection=E}signAndSendTransaction(...E){return typeof E[0]=="string"?this._signAndSendTransaction({receiverId:E[0],actions:E[1]}):this._signAndSendTransaction(E[0])}async _signAndSendTransaction({receiverId:E,actions:w,walletMeta:y,walletCallbackUrl:_=window.location.href}){const A=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let B=await this.accessKeyForTransaction(E,w,A);if(!B)throw new Error(`Cannot find matching key for transaction sent to ${E}`);if(A&&A.toString()===B.public_key)try{return await super.signAndSendTransaction({receiverId:E,actions:w})}catch(re){if(re.type==="NotEnoughAllowance")B=await this.accessKeyForTransaction(E,w);else throw re}const N=await this.connection.provider.block({finality:"final"}),O=s.baseDecode(N.header.hash),U=i.PublicKey.from(B.public_key),H=B.access_key.nonce+1,V=n.createTransaction(this.accountId,U,E,H,w,O);return await this.walletConnection.requestSignTransactions({transactions:[V],meta:y,callbackUrl:_}),new Promise((re,ae)=>{setTimeout(()=>{ae(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(E,w,y){const{access_key:{permission:_}}=E;if(_==="FullAccess")return!0;if(_.FunctionCall){const{receiver_id:A,method_names:B}=_.FunctionCall;if(A===this.accountId&&B.includes(c))return!0;if(A===w){if(y.length!==1)return!1;const[{functionCall:N}]=y;return N&&(!N.deposit||N.deposit.toString()==="0")&&(B.length===0||B.includes(N.methodName))}}return!1}async accessKeyForTransaction(E,w,y){const _=await this.getAccessKeys();if(y){const B=_.find(N=>N.public_key.toString()===y.toString());if(B&&await this.accessKeyMatchesTransaction(B,E,w))return B}const A=this.walletConnection._authData.allKeys;for(const B of _)if(A.indexOf(B.public_key)!==-1&&await this.accessKeyMatchesTransaction(B,E,w))return B;return null}}return mi.ConnectedWalletAccount=g,mi}var Mg;function o1(){return Mg||(Mg=1,function(t){var e=q&&q.__createBinding||(Object.create?function(_,A,B,N){N===void 0&&(N=B),Object.defineProperty(_,N,{enumerable:!0,get:function(){return A[B]}})}:function(_,A,B,N){N===void 0&&(N=B),_[N]=A[B]}),r=q&&q.__setModuleDefault||(Object.create?function(_,A){Object.defineProperty(_,"default",{enumerable:!0,value:A})}:function(_,A){_.default=A}),n=q&&q.__importStar||function(_){if(_&&_.__esModule)return _;var A={};if(_!=null)for(var B in _)B!=="default"&&Object.hasOwnProperty.call(_,B)&&e(A,_,B);return r(A,_),A};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.WalletAccount=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const i=n(Jo());t.providers=i;const s=n(e1());t.utils=s;const a=n(Wo);t.transactions=a;const o=n(pa);t.validators=o;const c=Ff();Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return c.Account}});const f=n(DS());t.multisig=f;const u=n(r1());t.accountCreator=u;const d=i1();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return d.Connection}});const g=Es;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return g.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return g.InMemorySigner}});const b=s1();Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return b.Contract}});const E=si;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return E.KeyPair}});const w=a1();Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return w.Near}});const y=KS();Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return y.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletAccount",{enumerable:!0,get:function(){return y.WalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return y.WalletConnection}})}(Xu)),Xu}var jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.connect=void 0;const $S=a1();async function qS(t){return new $S.Near(t)}jf.connect=qS;var HS={exports:{}},Kf={exports:{}},Gl=function(){this.tests={},this.cache={}};Gl.prototype={constructor:Gl,define:function(t,e){if(typeof t!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[t])throw new Error('Duplicated capability definition by "'+t+'".');this.tests[t]=e},check:function(t){if(!this.test(t))throw new Error('The current environment does not support "'+t+'", therefore we cannot continue.')},test:function(t){if(this.cache[t]!==void 0)return this.cache[t];if(!this.tests[t])throw new Error('Unknown capability with name "'+t+'".');var e=this.tests[t];return this.cache[t]=!!e(),this.cache[t]}};var zS=Gl,GS=zS,qh=new GS,vo=function(t){return qh.test(t)};vo.define=function(t,e){qh.define(t,e)};vo.check=function(t){qh.check(t)};vo.test=vo;var c1=vo,f1=c1,An=f1.define,hs=f1.test;An("strict mode",function(){return this===void 0});An("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});An("es5",function(){return hs("Array.prototype.forEach")&&hs("Array.prototype.map")&&hs("Function.prototype.bind")&&hs("Object.create")&&hs("Object.defineProperties")&&hs("Object.defineProperty")&&hs("Object.prototype.hasOwnProperty")});An("Array.prototype.forEach",function(){return Array.prototype.forEach});An("Array.prototype.map",function(){return Array.prototype.map});An("Function.prototype.bind",function(){return Function.prototype.bind});An("Object.create",function(){return Object.create});An("Object.defineProperties",function(){return Object.defineProperties});An("Object.defineProperty",function(){return Object.defineProperty});An("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});An("Error.captureStackTrace",function(){return Error.captureStackTrace});An("Error.prototype.stack",function(){try{throw new Error}catch(t){return t.stack||t.stacktrace}});(function(t){t.exports=c1})(Kf);Kf.exports.check("es5");var rl,Og;function Hh(){if(Og)return rl;Og=1;var t=function(e,r,n){var i="";if(i+=e.name||"Error",i+=": "+(e.message||""),n instanceof Array)for(var s in n){var a=n[s];i+=`
   # `+a}for(var o in r){var c=r[o];i+=`
   at `+c.toString()}return i};return rl=t,rl}var nl,Dg;function VS(){if(Dg)return nl;Dg=1;var t=Hh();return nl=function(){return Error.getStackTrace=function(e){return e.stack},{prepareStackTrace:t}},nl}var il={exports:{}},sl,Ug;function JS(){if(Ug)return sl;Ug=1;var t=function(){var e=Object.create({Source:Object,config:{},buildArgs:[]});function r(c){var f="config";if(c instanceof Function)f="Source";else if(c instanceof Array)f="buildArgs";else if(c instanceof Object)f="config";else throw new Error("Invalid configuration option.");if(e.hasOwnProperty(f))throw new Error("Duplicated configuration option: "+f+".");e[f]=c}for(var n=0,i=arguments.length;n<i;++n)r(arguments[n]);var s=e.Source,a=e.config,o=e.buildArgs;return(s.extend||t.extend).call(s,a,o)};return t.factory=function(){return function(){var e=this;e.build instanceof Function&&e.build.apply(e,arguments),e.init instanceof Function&&e.init.apply(e,arguments)}},t.extend=function(e,r){var n=this;e||(e={});var i;return e.prototype instanceof Object&&e.prototype.constructor!==Object?i=e.prototype.constructor:e.factory instanceof Function&&(i=e.factory.call(n)),i=(n.clone||t.clone).call(n,i,r),(i.merge||t.merge).call(i,e),i},t.prototype.extend=function(e,r){var n=this,i=(n.clone||t.prototype.clone).apply(n,r);return(i.merge||t.prototype.merge).call(i,e),i},t.clone=function(e,r){var n=this;e instanceof Function||(e=(n.factory||t.factory).call(n)),e.prototype=(n.prototype.clone||t.prototype.clone).apply(n.prototype,r||[]),e.prototype.constructor=e;for(var i in n)i!=="prototype"&&(e[i]=n[i]);return e},t.prototype.clone=function(){var e=this,r=Object.create(e);return r.build instanceof Function&&r.build.apply(r,arguments),r},t.merge=function(e){var r=this;for(var n in e)n!=="prototype"&&(r[n]=e[n]);return e.prototype instanceof Object&&(r.prototype.merge||t.prototype.merge).call(r.prototype,e.prototype),r},t.prototype.merge=function(e){var r=this;for(var n in e)n!=="constructor"&&(r[n]=e[n]);return r},t.absorb=function(e){var r=this;for(var n in e)n!=="prototype"&&(r[n]===void 0||r[n]===Function.prototype[n])&&(r[n]=e[n]);return e.prototype instanceof Object&&(r.prototype.absorb||t.prototype.absorb).call(r.prototype,e.prototype),r},t.prototype.absorb=function(e){var r=this;for(var n in e)n!=="constructor"&&(r[n]===void 0||r[n]===Object.prototype[n])&&(r[n]=e[n]);return r},t.getAncestor=function(){var e=this;if(e!==e.prototype.constructor)return e.prototype.constructor},t.newInstance=function(){var e=this,r=Object.create(this.prototype);return e.apply(r,arguments),r},sl=t,sl}var al,Lg;function WS(){return Lg||(Lg=1,al=function(){throw new Error("Not implemented.")}),al}var ol,Fg;function YS(){return Fg||(Fg=1,ol={Class:JS(),abstractMethod:WS()}),ol}var jg;function wo(){return jg||(jg=1,function(t){t.exports=YS()}(il)),il.exports}var cl={exports:{}},fl,Kg;function XS(){if(Kg)return fl;Kg=1;var t=function(e){var r=!1,n;return e instanceof Function||(r=!0,n=e,e=null),function(){return r||(r=!0,n=e.apply(this,arguments),e=null),n}};return fl=t,fl}var ul,$g;function QS(){return $g||($g=1,ul=function t(e,r,n){if(n||(n=[]),n.length<e.length){var i=e[n.length];for(var s in i)n[n.length]=i[s],t(e,r,n),--n.length}else r.apply(null,n)}),ul}var ll,qg;function ZS(){return qg||(qg=1,ll={cache:XS(),eachCombination:QS()}),ll}var Hg;function _o(){return Hg||(Hg=1,function(t){t.exports=ZS()}(cl)),cl.exports}var dl,zg;function e7(){if(zg)return dl;zg=1;var t=wo().Class,e=wo().abstractMethod,r=_o().eachCombination,n=_o().cache,i=Kf.exports,s=t(Object,{prototype:{captureFrameStrings:function(o){var c=this.createError();o.unshift(this.captureFrameStrings),o.unshift(this.createError);var f=this.getFrameStrings(c),u=f.slice(o.length),d=[];if(i("arguments.callee.caller")){var g=[this.createError,this.captureFrameStrings];try{for(var b=arguments.callee;b=b.caller;)g.push(b)}catch{}d=g.slice(o.length)}return{frameStrings:u,functionValues:d}},getFrameStrings:function(o){var c=o.message||"",f=o.name||"",u=this.getStackString(o);if(u!==void 0){var d=u.split(`
`),g=0,b=d.length;return this.hasHeader&&(g+=f.split(`
`).length+c.split(`
`).length-1),this.hasFooter&&(b-=1),d.slice(g,b)}},createError:e,getStackString:e,hasHeader:void 0,hasFooter:void 0}}),a=t(Object,{prototype:{calibrateClass:function(o){return this.calibrateMethods(o)&&this.calibrateEnvelope(o)},calibrateMethods:function(o){try{r([[function(c){return new Error(c)},function(c){try{throw new Error(c)}catch(f){return f}}],[function(c){return c.stack},function(c){return c.stacktrace}]],function(c,f){if(f(c()))throw{getStackString:f,createError:c}})}catch(c){return t.merge.call(o,{prototype:c}),!0}return!1},calibrateEnvelope:function(o){var c=o.prototype.getStackString,f=o.prototype.createError,u=c(f("marker")),d=u.split(`
`);return t.merge.call(o,{prototype:{hasHeader:/marker/.test(d[0]),hasFooter:d[d.length-1]===""}}),!0}}});return dl={getClass:n(function(){var o;if(o)return o;o=t(s,{});var c=new a;if(!c.calibrateClass(o))throw new Error("Cannot read Error.prototype.stack in this environment.");return o}),getInstance:n(function(){var o=this.getClass(),c=new o;return c})},dl}var hl,Gg;function t7(){if(Gg)return hl;Gg=1;var t=wo().Class,e=wo().abstractMethod,r=t(Object,{prototype:{init:t.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:e,getTypeName:e,getFunction:function(){return this.functionValue},getFunctionName:e,getMethodName:e,getFileName:e,getLineNumber:e,getColumnNumber:e,getEvalOrigin:e,isTopLevel:e,isEval:e,isNative:e,isConstructor:e}});return hl=r,hl}var pl,Vg;function r7(){if(Vg)return pl;Vg=1;var t=wo().Class,e=t7(),r=_o().cache,n=t(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(i){t.prototype.merge.call(this,i)},getFrames:function(i,s){for(var a=[],o=0,c=i.length;o<c;++o)a[o]=this.getFrame(i[o],s[o]);return a},getFrame:function(i,s){var a={frameString:i,functionValue:s};return new e(a)}}});return pl={getClass:r(function(){return n}),getInstance:r(function(){var i=this.getClass(),s=new i;return s})},pl}var gl,Jg;function n7(){if(Jg)return gl;Jg=1;var t=e7(),e=r7(),r=_o().cache,n=Hh();return gl=function(){return Error.captureStackTrace=function i(s,a){var o,c=[i];a&&c.push(a);var f=t.getInstance().captureFrameStrings(c);Object.defineProperties(s,{stack:{configurable:!0,get:r(function(){var u=e.getInstance().getFrames(f.frameStrings,f.functionValues);return(Error.prepareStackTrace||n)(s,u,o)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(i){if(i.cachedStack)return i.stack;var s=t.getInstance().getFrameStrings(i),a=[],o;s?a=e.getInstance().getFrames(s,[]):o=["The stack is not readable by unthrown errors in this environment."];var c=(Error.prepareStackTrace||n)(i,a,o);if(s)try{Object.defineProperties(i,{stack:{configurable:!0,writable:!0,enumerable:!1,value:c},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return c},{prepareStackTrace:n}},gl}var yl,Wg;function i7(){if(Wg)return yl;Wg=1;var t=_o().cache,e=Hh();return yl=function(){return Error.captureStackTrace=function(r,n){Object.defineProperties(r,{stack:{configurable:!0,get:t(function(){return(Error.prepareStackTrace||e)(r,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(r){if(r.cachedStack)return r.stack;var n=(Error.prepareStackTrace||e)(r,[]);try{Object.defineProperties(r,{stack:{configurable:!0,writable:!0,enumerable:!1,value:n},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return n},{prepareStackTrace:e}},yl}var Yg=Kf.exports,kc;Yg("Error.captureStackTrace")?kc=VS():Yg("Error.prototype.stack")?kc=n7():kc=i7();var s7=kc();(function(t){t.exports=s7})(HS);(function(t){var e=q&&q.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=q&&q.__setModuleDefault||(Object.create?function(s,a){Object.defineProperty(s,"default",{enumerable:!0,value:a})}:function(s,a){s.default=a}),n=q&&q.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var o in s)o!=="default"&&Object.hasOwnProperty.call(s,o)&&e(a,s,o);return r(a,s),a},i=q&&q.__exportStar||function(s,a){for(var o in s)o!=="default"&&!a.hasOwnProperty(o)&&e(a,s,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=n(Hx),i(o1(),t),i(jf,t)})(qx);var zh=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dh,"__esModule",{value:!0});const Xg=va,za=zh(es),bi=qx,ml=Vc,a7=zh(ry.exports),o7=Jl.exports,c7=zh(fs);class f7 extends c7.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new bi.keyStores.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=bi.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var r;const n=await this.providerInstance,[i,s]=e.split(":"),a=await n.txStatusReceipts((0,ml.decode)(s),i),o=await n.block(a.transaction_outcome.block_hash),c=(await n.block({finality:"final"})).header.height;if(a.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const f=(r=a.receipts[0].receipt.Action.actions[0].Transfer.deposit)!==null&&r!==void 0?r:0;return{from:i,to:a.transaction.receiver_id,amount:new za.default(f),blockHeight:new za.default(o.header.height),pending:!1,confirmed:c-o.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:(0,ml.encode)(e);return(0,ml.decode)(r.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new Xg.NearSigner(this.keyPair.secretKey)}async verify(e,r,n){return Xg.NearSigner.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new za.default(e.sync_info.latest_block_height)}async getFee(e,r){const n=await this.providerInstance.gasPrice(null);return new za.default(n.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,a=bi.utils.serialize.base_decode(i.block_hash),o=[bi.transactions.transfer(new a7.default(new za.default(e).toString()))],c=bi.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),r,s,o,a),f=bi.utils.serialize.serialize(bi.transactions.SCHEMA,c),u=new Uint8Array(o7.sha256.array(f)),d=this.keyPair.sign(u);return{tx:new bi.transactions.SignedTransaction({transaction:c,signature:new bi.transactions.Signature({keyType:c.publicKey.keyType,data:d.signature})}),txId:void 0}}async getPublicKey(){return X.Buffer.from(this.keyPair.getPublicKey().data)}}Dh.default=f7;var Gh={},u7=q&&q.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l7=q&&q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d7=q&&q.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u7(e,t,r);return l7(e,t),e},$f=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gh,"__esModule",{value:!0});const Qg=va,Ws=$f(es),h7=$f(fs),Ga=d7(_1),p7=$f(Vc),g7=$f(If);class y7 extends h7.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new Ga.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await r.getSlot("confirmed"),s=new Ws.default(n.meta.postBalances[1]).minus(new Ws.default(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new Ws.default(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=X.Buffer.from(e)),p7.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new Qg.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,r,n){return Qg.HexInjectedSolanaSigner.verify(e,r,n)}async getCurrentHeight(){return new Ws.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,r){return new Ws.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const i=new Ga.PublicKey(await this.getPublicKey()),s=await(0,g7.default)(async o=>{var c;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(f){throw!((c=f.message)===null||c===void 0)&&c.includes("blockhash")?f:(o(f),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),a=new Ga.Transaction({recentBlockhash:s,feePayer:i});return a.add(Ga.SystemProgram.transfer({fromPubkey:i,toPubkey:new Ga.PublicKey(r),lamports:+new Ws.default(e).toNumber()})),{tx:a,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}Gh.default=y7;var u1={};(function(t){var e=q&&q.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.erc20abi=void 0;const r=e(es),n=Ef,i=fs,s=e(Bf);class a extends s.default{constructor(c){super(c),this.contractAddress=c.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new n.ethers.Contract(this.contractAddress,t.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(c){const f=await this.providerInstance.getTransaction(c);if(!f)throw new Error("Tx doesn't exist");if(f.data.length!==138||f.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const u=`0x${f.data.slice(34,74)}`,d=new r.default(f.data.slice(74),16);return{from:f.from,to:u,blockHeight:f.blockNumber?new r.default(f.blockNumber):null,amount:d,pending:!f.blockNumber,confirmed:f.confirmations>=this.minConfirm}}async getFee(c,f){const u="0x"+new r.default(c).toString(16),d=await this.getContract(),g=await this.providerInstance.getGasPrice(),b=await d.estimateGas.transfer(f,u),E=new r.default(g.mul(b).toString()),[w]=await this.getGas(),y=w.multipliedBy(E),_=new r.default(await this.price());return new r.default(y).dividedToIntegerBy(_)}async createTx(c,f,u){const d=await this.getContract(),g="0x"+new r.default(c).toString(16),b=await d.populateTransaction.transfer(f,g);return b.gasPrice=await this.providerInstance.getGasPrice(),b.gasLimit=await d.estimateGas.transfer(f,g),b.chainId=(await this.providerInstance.getNetwork()).chainId,b.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:b}}async getGas(){return[new r.default(await(0,i.getRedstonePrice)("ETH")),1e18]}}t.default=a,t.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]})(u1);var ka=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mh,"__esModule",{value:!0});const Ys=ka(Bf),m7=ka(Dh),b7=ka(Gh),x7=ka(u1),v7=ka(Jc.exports),w7=ka(Os);function _7(t,e,r,n){switch(t){case"ethereum":return new Ys.default({name:"ethereum",ticker:"ETH",providerUrl:r??"https://cloudflare-eth.com/",wallet:e});case"matic":return new Ys.default({name:"matic",ticker:"MATIC",providerUrl:r??"https://polygon-rpc.com",wallet:e,minConfirm:1});case"arbitrum":return new Ys.default({name:"arbitrum",ticker:"ETH",providerUrl:r??"https://arb1.arbitrum.io/rpc",wallet:e});case"bnb":return new Ys.default({name:"bnb",ticker:"BNB",providerUrl:r??"https://bsc-dataseed.binance.org",wallet:e});case"avalanche":return new Ys.default({name:"avalanche",ticker:"AVAX",providerUrl:r??"https://api.avax.network/ext/bc/C/rpc",wallet:e});case"boba-eth":return new Ys.default({name:"boba-eth",ticker:"ETH",providerUrl:r??"https://mainnet.boba.network/",minConfirm:1,wallet:e});case"boba":{const i=new x7.default({name:"boba",ticker:"BOBA",providerUrl:r??"https://mainnet.boba.network/",contractAddress:n??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:e});return i.price=async()=>{var s;const a=await v7.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${i.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await w7.default.checkAndThrow(a,"Getting price data"),!(!((s=a?.data)===null||s===void 0)&&s.rate))throw new Error(`unable to get price for ${i.name}`);return+a.data.rate},i}case"solana":return new b7.default({name:"solana",ticker:"SOL",providerUrl:r??"https://api.mainnet-beta.solana.com/",wallet:e});case"near":return new m7.default({name:"near",ticker:"NEAR",providerUrl:r??"https://rpc.mainnet.near.org",wallet:e});default:throw new Error(`Unknown/Unsupported currency ${t}`)}}Mh.default=_7;var Pa=q&&q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pc,"__esModule",{value:!0});const E7=Pa(Yl),A7=Pa(td),S7=Pa(Nh),T7=Pa($o),k7=Pa(Os),P7=Pa(Mh);class C7 extends A7.default{constructor(e,r,n,i){var s;super();const a=new URL(e);this.api=new E7.default({protocol:a.protocol.slice(0,-1),port:a.port,host:a.hostname,timeout:(s=i?.timeout)!==null&&s!==void 0?s:1e5}),this.currency=r.toLowerCase(),this.currencyConfig=(0,P7.default)(r,n,i?.providerUrl,i?.contractAddress),this.utils=new k7.default(this.api,this.currency,this.currencyConfig),this.uploader=new T7.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new S7.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}Pc.default=C7;(function(t){var e=q&&q.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBundlr=t.default=void 0;var r=Pc;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e(r).default}});var n=Pc;Object.defineProperty(t,"WebBundlr",{enumerable:!0,get:function(){return e(n).default}})})(Wl);const I7=E1(Wl),B7=A1({__proto__:null,default:I7},[Wl]);export{B7 as i};
